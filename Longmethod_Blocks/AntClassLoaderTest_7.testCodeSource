void#testCodeSource#(#)#throws#Exception#{#executeTarget#(#"prepareGetPackageTest"#)#;#Path#myPath#=#new#Path#(#getProject#(#)#)#;#myPath#.#setLocation#(#new#File#(#getProject#(#)#.#getProperty#(#"tmp.dir"#)#+#"/test.jar"#)#)#;#getProject#(#)#.#setUserProperty#(#"build.sysclasspath"#,#"ignore"#)#;#loader#=#getProject#(#)#.#createClassLoader#(#myPath#)#;#Class#foo#=#loader#.#findClass#(#"org.example.Foo"#)#;#String#codeSourceLocation#=#foo#.#getProtectionDomain#(#)#.#getCodeSource#(#)#.#getLocation#(#)#.#toString#(#)#;#assertTrue#(#codeSourceLocation#+#" should point to test.jar"#,#codeSourceLocation#.#endsWith#(#"test.jar"#)#)#;#}