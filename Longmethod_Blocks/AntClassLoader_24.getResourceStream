InputStream#getResourceStream#(#File#file#,#String#resourceName#)#{#try#{#ZipFile#zipFile#=#(#ZipFile#)#zipFiles#.#get#(#file#)#;##if#(#zipFile#==#null#&&#file#.#isDirectory#(#)#)#{#File#resource#=#new#File#(#file#,#resourceName#)#;##if#(#resource#.#exists#(#)#)#{##return#new#FileInputStream#(#resource#)#;#}#}#else#{##if#(#zipFile#==#null#)#{##if#(#file#.#exists#(#)#)#{#zipFile#=#new#ZipFile#(#file#)#;#zipFiles#.#put#(#file#,#zipFile#)#;#}#else#{##return#null#;#}##//to eliminate a race condition, retrieve the entry##//that is in the hash table under that filename#zipFile#=#(#ZipFile#)#zipFiles#.#get#(#file#)#;#}##ZipEntry#entry#=#zipFile#.#getEntry#(#resourceName#)#;##if#(#entry#!=#null#)#{##return#zipFile#.#getInputStream#(#entry#)#;#}#}#}##catch#(#Exception#e#)#{#log#(#"Ignoring Exception "#+#e#.#getClass#(#)#.#getName#(#)#+#": "#+#e#.#getMessage#(#)#+#" reading resource "#+#resourceName#+#" from "#+#file#,#Project#.#MSG_VERBOSE#)#;#}##return#null#;#}