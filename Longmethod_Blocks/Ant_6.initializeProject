void#initializeProject#(#)#{#newProject#.#setInputHandler#(#getProject#(#)#.#getInputHandler#(#)#)#;#Iterator#iter#=#getBuildListeners#(#)#;##while#(#iter#.#hasNext#(#)#)#{#newProject#.#addBuildListener#(#(#BuildListener#)#iter#.#next#(#)#)#;#}##if#(#output#!=#null#)#{#File#outfile#=#null#;##if#(#dir#!=#null#)#{#outfile#=#FILE_UTILS#.#resolveFile#(#dir#,#output#)#;#}#else#{#outfile#=#getProject#(#)#.#resolveFile#(#output#)#;#}##try#{#out#=#new#PrintStream#(#new#FileOutputStream#(#outfile#)#)#;#DefaultLogger#logger#=#new#DefaultLogger#(#)#;#logger#.#setMessageOutputLevel#(#Project#.#MSG_INFO#)#;#logger#.#setOutputPrintStream#(#out#)#;#logger#.#setErrorPrintStream#(#out#)#;#newProject#.#addBuildListener#(#logger#)#;#}##catch#(#IOException#ex#)#{#log#(#"Ant: Can't set output to "#+#output#)#;#}#}##// set user-defined properties##if#(#useNativeBasedir#)#{#addAlmostAll#(#getProject#(#)#.#getUserProperties#(#)#,#PropertyType#.#USER#)#;#}#else#{#getProject#(#)#.#copyUserProperties#(#newProject#)#;#}##if#(#!#inheritAll#)#{##// set Ant's built-in properties separately,##// because they are not being inherited.#newProject#.#initProperties#(#)#;#}#else#{##// set all properties from calling project#addAlmostAll#(#getProject#(#)#.#getProperties#(#)#,#PropertyType#.#PLAIN#)#;#}##Enumeration#e#=#propertySets#.#elements#(#)#;##while#(#e#.#hasMoreElements#(#)#)#{#PropertySet#ps#=#(#PropertySet#)#e#.#nextElement#(#)#;#addAlmostAll#(#ps#.#getProperties#(#)#,#PropertyType#.#PLAIN#)#;#}#}