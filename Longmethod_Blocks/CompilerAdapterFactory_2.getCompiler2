CompilerAdapter#getCompiler#(#String#compilerType#,#Task#task#,#Path#classpath#)#throws#BuildException#{##if#(#compilerType#.#equalsIgnoreCase#(#"jikes"#)#)#{##return#new#Jikes#(#)#;#}##if#(#compilerType#.#equalsIgnoreCase#(#"extJavac"#)#)#{##return#new#JavacExternal#(#)#;#}##if#(#compilerType#.#equalsIgnoreCase#(#"classic"#)#||#compilerType#.#equalsIgnoreCase#(#"javac1.1"#)#||#compilerType#.#equalsIgnoreCase#(#"javac1.2"#)#)#{#task#.#log#(#"This version of java does "#+#"not support the classic "#+#"compiler; upgrading to modern"#,#Project#.#MSG_WARN#)#;#compilerType#=#"modern"#;#}##//on java<=1.3 the modern falls back to classic if it is not found##//but on java>=1.4 we just bail out early##if#(#compilerType#.#equalsIgnoreCase#(#"modern"#)#||#compilerType#.#equalsIgnoreCase#(#"javac1.3"#)#||#compilerType#.#equalsIgnoreCase#(#"javac1.4"#)#||#compilerType#.#equalsIgnoreCase#(#"javac1.5"#)#||#compilerType#.#equalsIgnoreCase#(#"javac1.6"#)#)#{##// does the modern compiler exist?##if#(#doesModernCompilerExist#(#)#)#{##return#new#Javac13#(#)#;#}#else#{#throw#new#BuildException#(#"Unable to find a javac "#+#"compiler;\n"#+#MODERN_COMPILER#+#" is not on the "#+#"classpath.\n"#+#"Perhaps JAVA_HOME does not"#+#" point to the JDK.\n"#+#"It is currently set to \""#+#JavaEnvUtils#.#getJavaHome#(#)#+#"\""#)#;#}#}##if#(#compilerType#.#equalsIgnoreCase#(#"jvc"#)#||#compilerType#.#equalsIgnoreCase#(#"microsoft"#)#)#{##return#new#Jvc#(#)#;#}##if#(#compilerType#.#equalsIgnoreCase#(#"kjc"#)#)#{##return#new#Kjc#(#)#;#}##if#(#compilerType#.#equalsIgnoreCase#(#"gcj"#)#)#{##return#new#Gcj#(#)#;#}##if#(#compilerType#.#equalsIgnoreCase#(#"sj"#)#||#compilerType#.#equalsIgnoreCase#(#"symantec"#)#)#{##return#new#Sj#(#)#;#}##return#resolveClassName#(#compilerType#,##// Memory-Leak in line below#task#.#getProject#(#)#.#createClassLoader#(#classpath#)#)#;#}