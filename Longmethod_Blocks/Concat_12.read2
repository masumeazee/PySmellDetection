int#read#(#char#[#]#cbuf#,#int#off#,#int#len#)#throws#IOException#{#int#amountRead#=#0#;##while#(#getReader#(#)#!=#null#||#needAddSeparator#)#{##if#(#needAddSeparator#)#{#cbuf#[#off#]#=#eolString#.#charAt#(#lastPos#++#)#;##if#(#lastPos#>=#eolString#.#length#(#)#)#{#lastPos#=#0#;#needAddSeparator#=#false#;#}##len#--#;#off#++#;#amountRead#++#;##if#(#len#==#0#)#{##return#amountRead#;#}##continue#;#}##int#nRead#=#getReader#(#)#.#read#(#cbuf#,#off#,#len#)#;##if#(#nRead#==#-#1#||#nRead#==#0#)#{#nextReader#(#)#;##if#(#isFixLastLine#(#)#&&#isMissingEndOfLine#(#)#)#{#needAddSeparator#=#true#;#lastPos#=#0#;#}#}#else#{##if#(#isFixLastLine#(#)#)#{#for#(#int#i#=#nRead#;##i#>#(#nRead#-#lastChars#.#length#)#;#--#i#)#{##if#(#i#<=#0#)#{#break#;#}##addLastChar#(#cbuf#[#off#+#i#-#1#]#)#;#}#}##len#-=#nRead#;#off#+=#nRead#;#amountRead#+=#nRead#;##if#(#len#==#0#)#{##return#amountRead#;#}#}#}##if#(#amountRead#==#0#)#{##return#-#1#;#}#else#{##return#amountRead#;#}#}