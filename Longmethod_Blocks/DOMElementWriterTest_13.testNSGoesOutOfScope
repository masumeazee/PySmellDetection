void#testNSGoesOutOfScope#(#)#throws#IOException#{#Document#d#=#DOMUtils#.#newDocument#(#)#;#Element#root#=#d#.#createElementNS#(#"urn:foo"#,#"root"#)#;#Element#child#=#d#.#createElementNS#(#"urn:foo2"#,#"child"#)#;#root#.#appendChild#(#child#)#;#Element#child2#=#d#.#createElementNS#(#"urn:foo2"#,#"child"#)#;#root#.#appendChild#(#child2#)#;#Element#grandChild#=#d#.#createElementNS#(#"urn:foo2"#,#"grandchild"#)#;#child2#.#appendChild#(#grandChild#)#;#Element#child3#=#d#.#createElementNS#(#"urn:foo2"#,#"child"#)#;#root#.#appendChild#(#child3#)#;#StringWriter#sw#=#new#StringWriter#(#)#;#DOMElementWriter#w#=#new#DOMElementWriter#(#false#,#DOMElementWriter#.#XmlNamespacePolicy#.#ONLY_QUALIFY_ELEMENTS#)#;#w#.#write#(#root#,#sw#,#0#,#"  "#)#;#assertEquals#(#"<root xmlns=\"urn:foo\">"#+#StringUtils#.#LINE_SEP#+#"  <ns0:child xmlns:ns0=\"urn:foo2\" />"#+#StringUtils#.#LINE_SEP#+#"  <ns1:child xmlns:ns1=\"urn:foo2\">"#+#StringUtils#.#LINE_SEP#+#"    <ns1:grandchild />"#+#StringUtils#.#LINE_SEP#+#"  </ns1:child>"#+#StringUtils#.#LINE_SEP#+#"  <ns2:child xmlns:ns2=\"urn:foo2\" />"#+#StringUtils#.#LINE_SEP#+#"</root>"#+#StringUtils#.#LINE_SEP#,#sw#.#toString#(#)#)#;#}