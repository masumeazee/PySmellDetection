void#handleInput#(#InputRequest#request#)#throws#BuildException#{#String#prompt#=#getPrompt#(#request#)#;#BufferedReader#r#=#null#;##try#{#r#=#new#BufferedReader#(#new#InputStreamReader#(#getInputStream#(#)#)#)#;##do#{#System#.#err#.#println#(#prompt#)#;#System#.#err#.#flush#(#)#;##try#{#String#input#=#r#.#readLine#(#)#;#request#.#setInput#(#input#)#;#}##catch#(#IOException#e#)#{#throw#new#BuildException#(#"Failed to read input from"#+#" Console."#,#e#)#;#}#}##while#(#!#request#.#isInputValid#(#)#)#;#}##finally#{##if#(#r#!=#null#)#{#try#{#r#.#close#(#)#;#}##catch#(#IOException#e#)#{#throw#new#BuildException#(#"Failed to close input."#,#e#)#;#}#}#}#}