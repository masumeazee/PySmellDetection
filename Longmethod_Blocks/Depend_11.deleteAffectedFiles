int#deleteAffectedFiles#(#String#className#)#{#int#count#=#0#;#Hashtable#affectedClasses#=#(#Hashtable#)#affectedClassMap#.#get#(#className#)#;##if#(#affectedClasses#==#null#)#{##return#count#;#}##for#(#Enumeration#e#=#affectedClasses#.#keys#(#)#;##e#.#hasMoreElements#(#)#;#)#{#String#affectedClass#=#(#String#)#e#.#nextElement#(#)#;#ClassFileInfo#affectedClassInfo#=#(#ClassFileInfo#)#affectedClasses#.#get#(#affectedClass#)#;##if#(#!#affectedClassInfo#.#absoluteFile#.#exists#(#)#)#{#continue#;#}##if#(#affectedClassInfo#.#sourceFile#==#null#)#{#warnOutOfDateButNotDeleted#(#affectedClassInfo#,#affectedClass#,#className#)#;#continue#;#}##log#(#"Deleting file "#+#affectedClassInfo#.#absoluteFile#.#getPath#(#)#+#" since "#+#className#+#" out of date"#,#Project#.#MSG_VERBOSE#)#;#affectedClassInfo#.#absoluteFile#.#delete#(#)#;#count#++#;##if#(#closure#)#{#count#+=#deleteAffectedFiles#(#affectedClass#)#;#}#else#{##// without closure we may delete an inner class but not the##// top level class which would not trigger a recompile.##if#(#affectedClass#.#indexOf#(#"$"#)#==#-#1#)#{#continue#;#}##// need to delete the main class#String#topLevelClassName#=#affectedClass#.#substring#(#0#,#affectedClass#.#indexOf#(#"$"#)#)#;#log#(#"Top level class = "#+#topLevelClassName#,#Project#.#MSG_VERBOSE#)#;#ClassFileInfo#topLevelClassInfo#=#(#ClassFileInfo#)#classFileInfoMap#.#get#(#topLevelClassName#)#;##if#(#topLevelClassInfo#!=#null#&&#topLevelClassInfo#.#absoluteFile#.#exists#(#)#)#{#log#(#"Deleting file "#+#topLevelClassInfo#.#absoluteFile#.#getPath#(#)#+#" since one of its inner classes was removed"#,#Project#.#MSG_VERBOSE#)#;#topLevelClassInfo#.#absoluteFile#.#delete#(#)#;#count#++#;##if#(#closure#)#{#count#+=#deleteAffectedFiles#(#topLevelClassName#)#;#}#}#}#}##return#count#;#}