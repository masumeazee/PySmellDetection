void#doReportTempDir#(#PrintStream#out#)#{#String#tempdir#=#System#.#getProperty#(#"java.io.tmpdir"#)#;##if#(#tempdir#==#null#)#{#out#.#println#(#"Warning: java.io.tmpdir is undefined"#)#;##return#;#}##out#.#println#(#"Temp dir is "#+#tempdir#)#;#File#tempDirectory#=#new#File#(#tempdir#)#;##if#(#!#tempDirectory#.#exists#(#)#)#{#out#.#println#(#"Warning, java.io.tmpdir directory does not exist: "#+#tempdir#)#;##return#;#}##//create the file#long#now#=#System#.#currentTimeMillis#(#)#;#File#tempFile#=#null#;#FileOutputStream#fileout#=#null#;#FileInputStream#filein#=#null#;##try#{#tempFile#=#File#.#createTempFile#(#"diag"#,#"txt"#,#tempDirectory#)#;##//do some writing to it#fileout#=#new#FileOutputStream#(#tempFile#)#;#byte#[#]#buffer#=#new#byte#[#KILOBYTE#]#;##for#(#int#i#=#0#;##i#<#TEST_FILE_SIZE#;#i#++#)#{#fileout#.#write#(#buffer#)#;#}##fileout#.#close#(#)#;#fileout#=#null#;##// read to make sure the file has been written completely#Thread#.#sleep#(#1000#)#;#filein#=#new#FileInputStream#(#tempFile#)#;#int#total#=#0#;#int#read#=#0#;##while#(#(#read#=#filein#.#read#(#buffer#,#0#,#KILOBYTE#)#)#>#0#)#{#total#+=#read#;#}##filein#.#close#(#)#;#filein#=#null#;#long#filetime#=#tempFile#.#lastModified#(#)#;#long#drift#=#filetime#-#now#;#tempFile#.#delete#(#)#;#out#.#print#(#"Temp dir is writeable"#)#;##if#(#total#!=#TEST_FILE_SIZE#*#KILOBYTE#)#{#out#.#println#(#", but seems to be full.  Wrote "#+#(#TEST_FILE_SIZE#*#KILOBYTE#)#+#"but could only read "#+#total#+#" bytes."#)#;#}#else#{#out#.#println#(#)#;#}##out#.#println#(#"Temp dir alignment with system clock is "#+#drift#+#" ms"#)#;##if#(#Math#.#abs#(#drift#)#>#BIG_DRIFT_LIMIT#)#{#out#.#println#(#"Warning: big clock drift -maybe a network filesystem"#)#;#}#}##catch#(#IOException#e#)#{#ignoreThrowable#(#e#)#;#out#.#println#(#"Failed to create a temporary file in the temp dir "#+#tempdir#)#;#out#.#println#(#"File  "#+#tempFile#+#" could not be created/written to"#)#;#}##catch#(#InterruptedException#e#)#{#ignoreThrowable#(#e#)#;#out#.#println#(#"Failed to check whether tempdir is writable"#)#;#}##finally#{#FileUtils#.#close#(#fileout#)#;#FileUtils#.#close#(#filein#)#;##if#(#tempFile#!=#null#&&#tempFile#.#exists#(#)#)#{#tempFile#.#delete#(#)#;#}#}#}