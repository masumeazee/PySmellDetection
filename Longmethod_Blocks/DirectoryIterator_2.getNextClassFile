ClassFile#getNextClassFile#(#)#{#ClassFile#nextElement#=#null#;##try#{#while#(#nextElement#==#null#)#{##if#(#currentEnum#.#hasMoreElements#(#)#)#{#File#element#=#(#File#)#currentEnum#.#nextElement#(#)#;##if#(#element#.#isDirectory#(#)#)#{##// push the current iterator onto the stack and then##// iterate through this directory.#enumStack#.#push#(#currentEnum#)#;#Vector#files#=#getDirectoryEntries#(#element#)#;#currentEnum#=#files#.#elements#(#)#;#}#else#{##// we have a file. create a stream for it#FileInputStream#inFileStream#=#new#FileInputStream#(#element#)#;##if#(#element#.#getName#(#)#.#endsWith#(#".class"#)#)#{##// create a data input stream from the jar##// input stream#ClassFile#javaClass#=#new#ClassFile#(#)#;#javaClass#.#read#(#inFileStream#)#;#nextElement#=#javaClass#;#}#}#}#else#{##// this iterator is exhausted. Can we pop one off the stack##if#(#enumStack#.#empty#(#)#)#{#break#;#}#else#{#currentEnum#=#(#Enumeration#)#enumStack#.#pop#(#)#;#}#}#}#}##catch#(#IOException#e#)#{#nextElement#=#null#;#}##return#nextElement#;#}