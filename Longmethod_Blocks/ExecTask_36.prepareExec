Execute#prepareExec#(#)#throws#BuildException#{##// default directory to the project's base directory##if#(#dir#==#null#)#{#dir#=#getProject#(#)#.#getBaseDir#(#)#;#}##if#(#redirectorElement#!=#null#)#{#redirectorElement#.#configure#(#redirector#)#;#}##Execute#exe#=#new#Execute#(#createHandler#(#)#,#createWatchdog#(#)#)#;#exe#.#setAntRun#(#getProject#(#)#)#;#exe#.#setWorkingDirectory#(#dir#)#;#exe#.#setVMLauncher#(#vmLauncher#)#;#String#[#]#environment#=#env#.#getVariables#(#)#;##if#(#environment#!=#null#)#{#for#(#int#i#=#0#;##i#<#environment#.#length#;#i#++#)#{#log#(#"Setting environment variable: "#+#environment#[#i#]#,#Project#.#MSG_VERBOSE#)#;#}#}##exe#.#setNewenvironment#(#newEnvironment#)#;#exe#.#setEnvironment#(#environment#)#;##return#exe#;#}