Process#exec#(#Project#project#,#String#[#]#cmd#,#String#[#]#env#,#File#workingDir#)#throws#IOException#{##if#(#project#==#null#)#{##if#(#workingDir#==#null#)#{##return#exec#(#project#,#cmd#,#env#)#;#}##throw#new#IOException#(#"Cannot locate antRun script: "#+#"No project provided"#)#;#}##// Locate the auxiliary script#String#antHome#=#project#.#getProperty#(#MagicNames#.#ANT_HOME#)#;##if#(#antHome#==#null#)#{#throw#new#IOException#(#"Cannot locate antRun script: "#+#"Property '"#+#MagicNames#.#ANT_HOME#+#"' not found"#)#;#}##String#antRun#=#FILE_UTILS#.#resolveFile#(#project#.#getBaseDir#(#)#,#antHome#+#File#.#separator#+#myScript#)#.#toString#(#)#;##// Build the command#File#commandDir#=#workingDir#;##if#(#workingDir#==#null#)#{#commandDir#=#project#.#getBaseDir#(#)#;#}##// CheckStyle:MagicNumber OFF#String#[#]#newcmd#=#new#String#[#cmd#.#length#+#3#]#;#newcmd#[#0#]#=#"perl"#;#newcmd#[#1#]#=#antRun#;#newcmd#[#2#]#=#commandDir#.#getAbsolutePath#(#)#;#System#.#arraycopy#(#cmd#,#0#,#newcmd#,#3#,#cmd#.#length#)#;##// CheckStyle:MagicNumber ON##return#exec#(#project#,#newcmd#,#env#)#;#}