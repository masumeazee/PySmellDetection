boolean#isFunctioningAsDirectory#(#FTPClient#ftp#,#String#dir#,#FTPFile#file#)#{#boolean#result#=#false#;#String#currentWorkingDir#=#null#;##if#(#file#.#isDirectory#(#)#)#{##return#true#;#}#else##if#(#file#.#isFile#(#)#)#{##return#false#;#}##try#{#currentWorkingDir#=#ftp#.#printWorkingDirectory#(#)#;#}##catch#(#IOException#ioe#)#{#task#.#log#(#"could not find current working directory "#+#dir#+#" while checking a symlink"#,#Project#.#MSG_DEBUG#)#;#}##if#(#currentWorkingDir#!=#null#)#{#try#{#result#=#ftp#.#changeWorkingDirectory#(#file#.#getLink#(#)#)#;#}##catch#(#IOException#ioe#)#{#task#.#log#(#"could not cd to "#+#file#.#getLink#(#)#+#" while checking a symlink"#,#Project#.#MSG_DEBUG#)#;#}##if#(#result#)#{#boolean#comeback#=#false#;##try#{#comeback#=#ftp#.#changeWorkingDirectory#(#currentWorkingDir#)#;#}##catch#(#IOException#ioe#)#{#task#.#log#(#"could not cd back to "#+#dir#+#" while checking a symlink"#,#Project#.#MSG_ERR#)#;#}##finally#{##if#(#!#comeback#)#{#throw#new#BuildException#(#"could not cd back to "#+#dir#+#" while checking a symlink"#)#;#}#}#}#}##return#result#;#}