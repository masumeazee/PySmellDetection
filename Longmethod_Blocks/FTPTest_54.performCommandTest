void#performCommandTest#(#String#target#,#int#[#]#expectedCounts#)#{#String#[#]#messages#=#new#String#[#]#{#"Doing Site Command: umask 222"#,#"Failed to issue Site Command: umask 222"#,#}#;#LogCounter#counter#=#new#LogCounter#(#)#;##for#(#int#i#=#0#;##i#<#messages#.#length#;#i#++#)#{#counter#.#addLogMessageToSearch#(#messages#[#i#]#)#;#}##getProject#(#)#.#addBuildListener#(#counter#)#;#getProject#(#)#.#executeTarget#(#target#)#;##for#(#int#i#=#0#;##i#<#messages#.#length#;#i#++#)#{#assertEquals#(#"target "#+#target#+#":message "#+#i#,#expectedCounts#[#i#]#,#counter#.#getMatchCount#(#messages#[#i#]#)#)#;#}#}