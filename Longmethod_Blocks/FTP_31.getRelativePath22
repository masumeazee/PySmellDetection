String#getRelativePath#(#String#currentPath#,#String#currentRelativePath#)#{#Vector#pathElements#=#SelectorUtils#.#tokenizePath#(#getAbsolutePath#(#)#,#remoteFileSep#)#;#Vector#pathElements2#=#SelectorUtils#.#tokenizePath#(#currentPath#,#remoteFileSep#)#;#String#relPath#=#currentRelativePath#;##for#(#int#pcount#=#pathElements2#.#size#(#)#;##pcount#<#pathElements#.#size#(#)#;#pcount#++#)#{#String#currentElement#=#(#String#)#pathElements#.#elementAt#(#pcount#)#;#FTPFile#[#]#theFiles#=#listFiles#(#currentPath#)#;#FTPFile#theFile#=#null#;##if#(#theFiles#!=#null#)#{#theFile#=#getFile#(#theFiles#,#currentElement#)#;#}##if#(#!#relPath#.#equals#(#""#)#)#{#relPath#=#relPath#+#remoteFileSep#;#}##if#(#theFile#==#null#)#{##// hit a hidden file assume not a symlink#relPath#=#relPath#+#currentElement#;#currentPath#=#currentPath#+#remoteFileSep#+#currentElement#;#log#(#"Hidden file "#+#relPath#+#" assumed to not be a symlink."#,#Project#.#MSG_VERBOSE#)#;#}#else#{#traversesSymlinks#=#traversesSymlinks#||#theFile#.#isSymbolicLink#(#)#;#relPath#=#relPath#+#theFile#.#getName#(#)#;#currentPath#=#currentPath#+#remoteFileSep#+#theFile#.#getName#(#)#;#}#}##return#relPath#;#}