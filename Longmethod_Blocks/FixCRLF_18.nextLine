void#nextLine#(#)#throws#BuildException#{#int#ch#=#-#1#;#int#eolcount#=#0#;#eolStr#=#new#StringBuffer#(#)#;#line#=#new#StringBuffer#(#)#;##try#{#ch#=#reader#.#read#(#)#;##while#(#ch#!=#-#1#&&#ch#!=#'\r'#&&#ch#!=#'\n'#)#{#line#.#append#(#(#char#)#ch#)#;#ch#=#reader#.#read#(#)#;#}##if#(#ch#==#-#1#&&#line#.#length#(#)#==#0#)#{##// Eof has been reached#reachedEof#=#true#;##return#;#}##switch#(#(#char#)#ch#)#{#case#'\r'#:##// Check for \r, \r\n and \r\r\n##// Regard \r\r not followed by \n as two lines#++#eolcount#;#eolStr#.#append#(#'\r'#)#;#reader#.#mark#(#2#)#;#ch#=#reader#.#read#(#)#;##switch#(#ch#)#{#case#'\r'#:#ch#=#reader#.#read#(#)#;##if#(#(#char#)#(#ch#)#==#'\n'#)#{#eolcount#+=#2#;#eolStr#.#append#(#"\r\n"#)#;#}#else#{#reader#.#reset#(#)#;#}##break#;#case#'\n'#:#++#eolcount#;#eolStr#.#append#(#'\n'#)#;#break#;#case#-#1#:##// don't reposition when we've reached the end##// of the stream#break#;#default#:#reader#.#reset#(#)#;##break#;#}##// end of switch ((char)(ch = reader.read()))#break#;#case#'\n'#:#++#eolcount#;#eolStr#.#append#(#'\n'#)#;#break#;#default#:##// Fall tru#}##// end of switch ((char) ch)##// if at eolcount == 0 and trailing characters of string##// are CTRL-Zs, set eofStr##if#(#eolcount#==#0#)#{#int#i#=#line#.#length#(#)#;##while#(#--#i#>=#0#&&#line#.#charAt#(#i#)#==#CTRLZ#)#{##// keep searching for the first ^Z#}##if#(#i#<#line#.#length#(#)#-#1#)#{##// Trailing characters are ^Zs##// Construct new line and eofStr#eofStr#.#append#(#line#.#toString#(#)#.#substring#(#i#+#1#)#)#;##if#(#i#<#0#)#{#line#.#setLength#(#0#)#;#reachedEof#=#true#;#}#else#{#line#.#setLength#(#i#+#1#)#;#}#}#}##// end of if (eolcount == 0)#}##catch#(#IOException#e#)#{#throw#new#BuildException#(#srcFile#+#": "#+#e#.#getMessage#(#)#,#e#,#getLocation#(#)#)#;#}#}