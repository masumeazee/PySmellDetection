String#getJarBaseName#(#String#descriptorFileName#)#{#String#baseName#=#""#;##// Work out what the base name is##if#(#config#.#namingScheme#.#getValue#(#)#.#equals#(#EjbJar#.#NamingScheme#.#BASEJARNAME#)#)#{#String#canonicalDescriptor#=#descriptorFileName#.#replace#(#'\\'#,#'/'#)#;#int#index#=#canonicalDescriptor#.#lastIndexOf#(#'/'#)#;##if#(#index#!=#-#1#)#{#baseName#=#descriptorFileName#.#substring#(#0#,#index#+#1#)#;#}##baseName#+=#config#.#baseJarName#;#}#else##if#(#config#.#namingScheme#.#getValue#(#)#.#equals#(#EjbJar#.#NamingScheme#.#DESCRIPTOR#)#)#{#int#lastSeparatorIndex#=#descriptorFileName#.#lastIndexOf#(#File#.#separator#)#;#int#endBaseName#=#-#1#;##if#(#lastSeparatorIndex#!=#-#1#)#{#endBaseName#=#descriptorFileName#.#indexOf#(#config#.#baseNameTerminator#,#lastSeparatorIndex#)#;#}#else#{#endBaseName#=#descriptorFileName#.#indexOf#(#config#.#baseNameTerminator#)#;#}##if#(#endBaseName#!=#-#1#)#{#baseName#=#descriptorFileName#.#substring#(#0#,#endBaseName#)#;#}#else#{#throw#new#BuildException#(#"Unable to determine jar name "#+#"from descriptor \""#+#descriptorFileName#+#"\""#)#;#}#}#else##if#(#config#.#namingScheme#.#getValue#(#)#.#equals#(#EjbJar#.#NamingScheme#.#DIRECTORY#)#)#{#File#descriptorFile#=#new#File#(#config#.#descriptorDir#,#descriptorFileName#)#;#String#path#=#descriptorFile#.#getAbsolutePath#(#)#;#int#lastSeparatorIndex#=#path#.#lastIndexOf#(#File#.#separator#)#;##if#(#lastSeparatorIndex#==#-#1#)#{#throw#new#BuildException#(#"Unable to determine directory name holding descriptor"#)#;#}##String#dirName#=#path#.#substring#(#0#,#lastSeparatorIndex#)#;#int#dirSeparatorIndex#=#dirName#.#lastIndexOf#(#File#.#separator#)#;##if#(#dirSeparatorIndex#!=#-#1#)#{#dirName#=#dirName#.#substring#(#dirSeparatorIndex#+#1#)#;#}##baseName#=#dirName#;#}#else##if#(#config#.#namingScheme#.#getValue#(#)#.#equals#(#EjbJar#.#NamingScheme#.#EJB_NAME#)#)#{#baseName#=#handler#.#getEjbName#(#)#;#}##return#baseName#;#}