void#execute#(#)#throws#BuildException#{#checkAttributes#(#)#;##for#(#Iterator#iter#=#sources#.#iterator#(#)#;##iter#.#hasNext#(#)#;#)#{#Resource#r#=#(#Resource#)#iter#.#next#(#)#;#URLProvider#up#=#(#URLProvider#)#r#.#as#(#URLProvider#.#class#)#;#URL#source#=#up#.#getURL#(#)#;#File#dest#=#destination#;##if#(#destination#.#isDirectory#(#)#)#{##if#(#mapperElement#==#null#)#{#String#path#=#source#.#getPath#(#)#;##if#(#path#.#endsWith#(#"/"#)#)#{#path#=#path#.#substring#(#0#,#path#.#length#(#)#-#1#)#;#}##int#slash#=#path#.#lastIndexOf#(#"/"#)#;##if#(#slash#>#-#1#)#{#path#=#path#.#substring#(#slash#+#1#)#;#}##dest#=#new#File#(#destination#,#path#)#;#}#else#{#FileNameMapper#mapper#=#mapperElement#.#getImplementation#(#)#;#String#[#]#d#=#mapper#.#mapFileName#(#source#.#toString#(#)#)#;##if#(#d#==#null#)#{#log#(#"skipping "#+#r#+#" - mapper can't handle it"#,#Project#.#MSG_WARN#)#;#continue#;#}#else##if#(#d#.#length#==#0#)#{#log#(#"skipping "#+#r#+#" - mapper returns no file name"#,#Project#.#MSG_WARN#)#;#continue#;#}#else##if#(#d#.#length#>#1#)#{#log#(#"skipping "#+#r#+#" - mapper returns multiple file"#+#" names"#,#Project#.#MSG_WARN#)#;#continue#;#}##dest#=#new#File#(#destination#,#d#[#0#]#)#;#}#}##//set up logging#int#logLevel#=#Project#.#MSG_INFO#;#DownloadProgress#progress#=#null#;##if#(#verbose#)#{#progress#=#new#VerboseProgress#(#System#.#out#)#;#}##//execute the get#try#{#doGet#(#source#,#dest#,#logLevel#,#progress#)#;#}##catch#(#IOException#ioe#)#{#log#(#"Error getting "#+#source#+#" to "#+#dest#)#;##if#(#!#ignoreErrors#)#{#throw#new#BuildException#(#ioe#,#getLocation#(#)#)#;#}#}#}#}