void#execute#(#List#testList#)#throws#BuildException#{#JUnitTest#test#=#null#;##// Create a temporary file to pass the test cases to run to##// the runner (one test case per line)#File#casesFile#=#createTempPropertiesFile#(#"junittestcases"#)#;#BufferedWriter#writer#=#null#;##try#{#writer#=#new#BufferedWriter#(#new#FileWriter#(#casesFile#)#)#;#log#(#"Creating casesfile '"#+#casesFile#.#getAbsolutePath#(#)#+#"' with content: "#,#Project#.#MSG_VERBOSE#)#;#PrintStream#logWriter#=#new#PrintStream#(#new#LogOutputStream#(#this#,#Project#.#MSG_VERBOSE#)#)#;#Iterator#iter#=#testList#.#iterator#(#)#;##while#(#iter#.#hasNext#(#)#)#{#test#=#(#JUnitTest#)#iter#.#next#(#)#;#printDual#(#writer#,#logWriter#,#test#.#getName#(#)#)#;##if#(#test#.#getTodir#(#)#==#null#)#{#printDual#(#writer#,#logWriter#,#","#+#getProject#(#)#.#resolveFile#(#"."#)#)#;#}#else#{#printDual#(#writer#,#logWriter#,#","#+#test#.#getTodir#(#)#)#;#}##if#(#test#.#getOutfile#(#)#==#null#)#{#printlnDual#(#writer#,#logWriter#,#","#+#"TEST-"#+#test#.#getName#(#)#)#;#}#else#{#printlnDual#(#writer#,#logWriter#,#","#+#test#.#getOutfile#(#)#)#;#}#}##writer#.#flush#(#)#;#writer#.#close#(#)#;#writer#=#null#;##// execute the test and get the return code#ExecuteWatchdog#watchdog#=#createWatchdog#(#)#;#TestResultHolder#result#=#executeAsForked#(#test#,#watchdog#,#casesFile#)#;#actOnTestResult#(#result#,#test#,#"Tests"#)#;#}##catch#(#IOException#e#)#{#log#(#e#.#toString#(#)#,#Project#.#MSG_ERR#)#;#throw#new#BuildException#(#e#)#;#}##finally#{#FILE_UTILS#.#close#(#writer#)#;##try#{#casesFile#.#delete#(#)#;#}##catch#(#Exception#e#)#{#log#(#e#.#toString#(#)#,#Project#.#MSG_ERR#)#;#}#}#}