void#filesetManifest#(#File#file#,#InputStream#is#)#throws#IOException#{##if#(#manifestFile#!=#null#&&#manifestFile#.#equals#(#file#)#)#{##// If this is the same name specified in 'manifest', this##// is the manifest to use#log#(#"Found manifest "#+#file#,#Project#.#MSG_VERBOSE#)#;##try#{##if#(#is#!=#null#)#{#InputStreamReader#isr#;##if#(#manifestEncoding#==#null#)#{#isr#=#new#InputStreamReader#(#is#)#;#}#else#{#isr#=#new#InputStreamReader#(#is#,#manifestEncoding#)#;#}##manifest#=#getManifest#(#isr#)#;#}#else#{#manifest#=#getManifest#(#file#)#;#}#}##catch#(#UnsupportedEncodingException#e#)#{#throw#new#BuildException#(#"Unsupported encoding while reading "#+#"manifest: "#+#e#.#getMessage#(#)#,#e#)#;#}#}#else##if#(#filesetManifestConfig#!=#null#&&#!#filesetManifestConfig#.#getValue#(#)#.#equals#(#"skip"#)#)#{##// we add this to our group of fileset manifests#logWhenWriting#(#"Found manifest to merge in file "#+#file#,#Project#.#MSG_VERBOSE#)#;##try#{#Manifest#newManifest#=#null#;##if#(#is#!=#null#)#{#InputStreamReader#isr#;##if#(#manifestEncoding#==#null#)#{#isr#=#new#InputStreamReader#(#is#)#;#}#else#{#isr#=#new#InputStreamReader#(#is#,#manifestEncoding#)#;#}##newManifest#=#getManifest#(#isr#)#;#}#else#{#newManifest#=#getManifest#(#file#)#;#}##if#(#filesetManifest#==#null#)#{#filesetManifest#=#newManifest#;#}#else#{#filesetManifest#.#merge#(#newManifest#,#false#,#mergeClassPaths#)#;#}#}##catch#(#UnsupportedEncodingException#e#)#{#throw#new#BuildException#(#"Unsupported encoding while reading "#+#"manifest: "#+#e#.#getMessage#(#)#,#e#)#;#}##catch#(#ManifestException#e#)#{#log#(#"Manifest in file "#+#file#+#" is invalid: "#+#e#.#getMessage#(#)#,#Project#.#MSG_ERR#)#;#throw#new#BuildException#(#"Invalid Manifest"#,#e#,#getLocation#(#)#)#;#}#}#else#{##// assuming 'skip' otherwise##// don't warn if skip has been requested explicitly, warn if user##// didn't set the attribute##// Hide warning also as it makes no sense since##// the filesetmanifest attribute itself has been##// hidden##//int logLevel = filesetManifestConfig == null ?##//    Project.MSG_WARN : Project.MSG_VERBOSE;##//log("File " + file##//    + " includes a META-INF/MANIFEST.MF which will be ignored. "##//    + "To include this file, set filesetManifest to a value other "##//    + "than 'skip'.", logLevel);#}#}