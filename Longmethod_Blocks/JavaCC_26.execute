void#execute#(#)#throws#BuildException#{##// load command line with optional attributes#Enumeration#iter#=#optionalAttrs#.#keys#(#)#;##while#(#iter#.#hasMoreElements#(#)#)#{#String#name#=#(#String#)#iter#.#nextElement#(#)#;#Object#value#=#optionalAttrs#.#get#(#name#)#;#cmdl#.#createArgument#(#)#.#setValue#(#"-"#+#name#+#":"#+#value#.#toString#(#)#)#;#}##// check the target is a file##if#(#targetFile#==#null#||#!#targetFile#.#isFile#(#)#)#{#throw#new#BuildException#(#"Invalid target: "#+#targetFile#)#;#}##// use the directory containing the target as the output directory##if#(#outputDirectory#==#null#)#{#outputDirectory#=#new#File#(#targetFile#.#getParent#(#)#)#;#}#else##if#(#!#outputDirectory#.#isDirectory#(#)#)#{#throw#new#BuildException#(#"Outputdir not a directory."#)#;#}##cmdl#.#createArgument#(#)#.#setValue#(#"-OUTPUT_DIRECTORY:"#+#outputDirectory#.#getAbsolutePath#(#)#)#;##// determine if the generated java file is up-to-date#final#File#javaFile#=#getOutputJavaFile#(#outputDirectory#,#targetFile#)#;##if#(#javaFile#.#exists#(#)#&&#targetFile#.#lastModified#(#)#<#javaFile#.#lastModified#(#)#)#{#log#(#"Target is already built - skipping ("#+#targetFile#+#")"#,#Project#.#MSG_VERBOSE#)#;##return#;#}##cmdl#.#createArgument#(#)#.#setValue#(#targetFile#.#getAbsolutePath#(#)#)#;#final#Path#classpath#=#cmdl#.#createClasspath#(#getProject#(#)#)#;#final#File#javaccJar#=#JavaCC#.#getArchiveFile#(#javaccHome#)#;#classpath#.#createPathElement#(#)#.#setPath#(#javaccJar#.#getAbsolutePath#(#)#)#;#classpath#.#addJavaRuntime#(#)#;#cmdl#.#setClassname#(#JavaCC#.#getMainClass#(#classpath#,#JavaCC#.#TASKDEF_TYPE_JAVACC#)#)#;#final#Commandline#.#Argument#arg#=#cmdl#.#createVmArgument#(#)#;#arg#.#setValue#(#"-mx140M"#)#;#arg#.#setValue#(#"-Dinstall.root="#+#javaccHome#.#getAbsolutePath#(#)#)#;#Execute#.#runCommand#(#this#,#cmdl#.#getCommandline#(#)#)#;#}