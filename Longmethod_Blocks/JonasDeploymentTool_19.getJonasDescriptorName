String#getJonasDescriptorName#(#)#{##// descriptorName = <path><basename><basenameterminator><remainder>##// examples = /org/objectweb/fooAppli/foo/Foo-ejb-jar.xml##// examples = /org/objectweb/fooAppli/foo/Foo.xml (JOnAS convention)#String#jonasDN#;##// JOnAS-specific DD#boolean#jonasConvention#=#false#;##// true if the JOnAS convention is used for the DD#String#path#;##// Directory path of the EJB descriptor#String#fileName#;##// EJB descriptor file name#String#baseName#;##// Filename appearing before name terminator#String#remainder#;##// Filename appearing after the name terminator#int#startOfFileName#=#descriptorName#.#lastIndexOf#(#File#.#separatorChar#)#;##if#(#startOfFileName#!=#-#1#)#{##// extract path info#path#=#descriptorName#.#substring#(#0#,#startOfFileName#+#1#)#;#fileName#=#descriptorName#.#substring#(#startOfFileName#+#1#)#;#}#else#{##// descriptorName is just a file without path#path#=#""#;#fileName#=#descriptorName#;#}##if#(#fileName#.#startsWith#(#EJB_DD#)#)#{##return#path#+#JONAS_DD#;#}##int#endOfBaseName#=#descriptorName#.#indexOf#(#getConfig#(#)#.#baseNameTerminator#,#startOfFileName#)#;##/*
         * Check for the odd case where the terminator and/or filename
         * extension aren't found.  These will ensure "jonas-" appears at the
         * end of the name and before the '.' (if present).
         */##if#(#endOfBaseName#<#0#)#{##// baseNameTerminator not found: the descriptor use the##// JOnAS naming convention, ie [Foo.xml,jonas-Foo.xml] and##// not [Foo<baseNameTerminator>-ejb-jar.xml,##// Foo<baseNameTerminator>-jonas-ejb-jar.xml].#endOfBaseName#=#descriptorName#.#lastIndexOf#(#'.'#)#-#1#;##if#(#endOfBaseName#<#0#)#{##// no . found#endOfBaseName#=#descriptorName#.#length#(#)#-#1#;#}##jonasConvention#=#true#;#}##baseName#=#descriptorName#.#substring#(#startOfFileName#+#1#,#endOfBaseName#+#1#)#;#remainder#=#descriptorName#.#substring#(#endOfBaseName#+#1#)#;##if#(#jonasConvention#)#{#jonasDN#=#path#+#"jonas-"#+#baseName#+#".xml"#;#}#else#{#jonasDN#=#path#+#baseName#+#"jonas-"#+#remainder#;#}##log#(#"Standard EJB descriptor name: "#+#descriptorName#,#Project#.#MSG_VERBOSE#)#;#log#(#"JOnAS-specific descriptor name: "#+#jonasDN#,#Project#.#MSG_VERBOSE#)#;##return#jonasDN#;#}