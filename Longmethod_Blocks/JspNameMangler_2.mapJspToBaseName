String#mapJspToBaseName#(#File#jspFile#)#{#String#className#;#className#=#stripExtension#(#jspFile#)#;##// since we don't mangle extensions like the servlet does,##// we need to check for keywords as class names#for#(#int#i#=#0#;##i#<#keywords#.#length#;#++#i#)#{##if#(#className#.#equals#(#keywords#[#i#]#)#)#{#className#+=#"%"#;#break#;#}#}##// Fix for invalid characters. If you think of more add to the list.#StringBuffer#modifiedClassName#=#new#StringBuffer#(#className#.#length#(#)#)#;##// first char is more restrictive than the rest#char#firstChar#=#className#.#charAt#(#0#)#;##if#(#Character#.#isJavaIdentifierStart#(#firstChar#)#)#{#modifiedClassName#.#append#(#firstChar#)#;#}#else#{#modifiedClassName#.#append#(#mangleChar#(#firstChar#)#)#;#}##// this is the rest#for#(#int#i#=#1#;##i#<#className#.#length#(#)#;#i#++#)#{#char#subChar#=#className#.#charAt#(#i#)#;##if#(#Character#.#isJavaIdentifierPart#(#subChar#)#)#{#modifiedClassName#.#append#(#subChar#)#;#}#else#{#modifiedClassName#.#append#(#mangleChar#(#subChar#)#)#;#}#}##return#modifiedClassName#.#toString#(#)#;#}