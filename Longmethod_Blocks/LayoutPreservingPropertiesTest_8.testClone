void#testClone#(#)#throws#Exception#{#File#simple#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/util/simple.properties"#)#;#FileInputStream#fis#=#new#FileInputStream#(#simple#)#;#LayoutPreservingProperties#lpf1#=#new#LayoutPreservingProperties#(#)#;#lpf1#.#load#(#fis#)#;#LayoutPreservingProperties#lpf2#=#(#LayoutPreservingProperties#)#lpf1#.#clone#(#)#;#lpf2#.#setProperty#(#"prop.new"#,#"a new property"#)#;#lpf2#.#setProperty#(#"prop.beta"#,#"a new value for beta"#)#;#assertEquals#(#"size of original is wrong"#,#3#,#lpf1#.#size#(#)#)#;#assertEquals#(#"size of clone is wrong"#,#4#,#lpf2#.#size#(#)#)#;#File#tmp1#=#File#.#createTempFile#(#"tmp"#,#"props"#)#;#tmp1#.#deleteOnExit#(#)#;#lpf1#.#saveAs#(#tmp1#)#;#String#s1#=#readFile#(#tmp1#)#;#File#tmp2#=#File#.#createTempFile#(#"tmp"#,#"props"#)#;#tmp2#.#deleteOnExit#(#)#;#lpf2#.#saveAs#(#tmp2#)#;#String#s2#=#readFile#(#tmp2#)#;##// check original is untouched#assertTrue#(#"should have had 'simple'"#,#s1#.#indexOf#(#"simple"#)#>#-#1#)#;#assertTrue#(#"should not have had prop.new"#,#s1#.#indexOf#(#"prop.new"#)#==#-#1#)#;##// check clone has the changes#assertTrue#(#"should have had 'a new value for beta'"#,#s2#.#indexOf#(#"a new value for beta"#)#>#-#1#)#;#assertTrue#(#"should have had prop.new"#,#s2#.#indexOf#(#"prop.new"#)#>#-#1#)#;#}