String#read#(#BufferedReader#reader#)#throws#ManifestException#,#IOException#{#Attribute#attribute#=#null#;##while#(#true#)#{#String#line#=#reader#.#readLine#(#)#;##if#(#line#==#null#||#line#.#length#(#)#==#0#)#{##return#null#;#}##if#(#line#.#charAt#(#0#)#==#' '#)#{##// continuation line##if#(#attribute#==#null#)#{##if#(#name#!=#null#)#{##// a continuation on the first line is a##// continuation of the name - concatenate this##// line and the name#name#+=#line#.#substring#(#1#)#;#}#else#{#throw#new#ManifestException#(#"Can't start an "#+#"attribute with a continuation line "#+#line#)#;#}#}#else#{#attribute#.#addContinuation#(#line#)#;#}#}#else#{#attribute#=#new#Attribute#(#line#)#;#String#nameReadAhead#=#addAttributeAndCheck#(#attribute#)#;##// refresh attribute in case of multivalued attributes.#attribute#=#getAttribute#(#attribute#.#getKey#(#)#)#;##if#(#nameReadAhead#!=#null#)#{##return#nameReadAhead#;#}#}#}#}