void#write#(#PrintWriter#writer#,#boolean#flatten#)#throws#IOException#{#writer#.#print#(#ATTRIBUTE_MANIFEST_VERSION#+#": "#+#manifestVersion#+#EOL#)#;#String#signatureVersion#=#mainSection#.#getAttributeValue#(#ATTRIBUTE_SIGNATURE_VERSION#)#;##if#(#signatureVersion#!=#null#)#{#writer#.#print#(#ATTRIBUTE_SIGNATURE_VERSION#+#": "#+#signatureVersion#+#EOL#)#;#mainSection#.#removeAttribute#(#ATTRIBUTE_SIGNATURE_VERSION#)#;#}##mainSection#.#write#(#writer#,#flatten#)#;##// add it back##if#(#signatureVersion#!=#null#)#{#try#{#Attribute#svAttr#=#new#Attribute#(#ATTRIBUTE_SIGNATURE_VERSION#,#signatureVersion#)#;#mainSection#.#addConfiguredAttribute#(#svAttr#)#;#}##catch#(#ManifestException#e#)#{##// shouldn't happen - ignore#}#}##Enumeration#e#=#sectionIndex#.#elements#(#)#;##while#(#e#.#hasMoreElements#(#)#)#{#String#sectionName#=#(#String#)#e#.#nextElement#(#)#;#Section#section#=#getSection#(#sectionName#)#;#section#.#write#(#writer#,#flatten#)#;#}#}