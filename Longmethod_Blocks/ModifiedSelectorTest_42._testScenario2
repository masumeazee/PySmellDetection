void#_testScenario2#(#)#{##// RuleBasedCollator not yet supported - see Selector:375 note#ExtendSelector#s#=#new#ExtendSelector#(#)#;#BFT#bft#=#new#BFT#(#)#;#String#cachefile#=#System#.#getProperty#(#"java.io.tmpdir"#)#+#"/mycache.txt"#;##try#{#makeBed#(#)#;#s#.#setClassname#(#"org.apache.tools.ant.types.selectors.modifiedselector.ModifiedSelector"#)#;#s#.#addParam#(#createParam#(#"cache.cachefile"#,#cachefile#)#)#;##//s.addParam(createParam("algorithm.provider","---")); // i don't know any valid#s#.#addParam#(#createParam#(#"cache"#,#"propertyfile"#)#)#;#s#.#addParam#(#createParam#(#"update"#,#"true"#)#)#;#s#.#addParam#(#createParam#(#"comparator"#,#"rule"#)#)#;#s#.#addParam#(#createParam#(#"algorithm.name"#,#"sha"#)#)#;#s#.#addParam#(#createParam#(#"algorithm"#,#"digest"#)#)#;##// first and second run#performTests#(#s#,#"TTTTTTTTTTTT"#)#;#performTests#(#s#,#"TFFFFFFFFFFT"#)#;##// make dirty#String#f2name#=#"tar/bz2/asf-logo-huge.tar.bz2"#;#String#f3name#=#"asf-logo.gif.md5"#;#String#f4name#=#"copy.filterset.filtered"#;#bft#.#writeProperties#(#"f2name="#+#f2name#)#;#bft#.#writeProperties#(#"f3name="#+#f3name#)#;#bft#.#writeProperties#(#"f4name="#+#f4name#)#;#bft#.#doTarget#(#"modifiedselectortest-makeDirty"#)#;##// third run#String#results#=#selectionString#(#s#)#;#StringBuffer#expected#=#new#StringBuffer#(#)#;##for#(#int#i#=#0#;##i#<#filenames#.#length#;#i#++#)#{#String#ch#=#"F"#;##if#(#files#[#i#]#.#isDirectory#(#)#)#ch#=#"T"#;##if#(#filenames#[#i#]#.#equalsIgnoreCase#(#f3name#)#)#ch#=#"T"#;##if#(#filenames#[#i#]#.#equalsIgnoreCase#(#f4name#)#)#ch#=#"T"#;##expected#.#append#(#ch#)#;#}##assertEquals#(#"Wrong files selected. Differing files: "##// info text#+#resolve#(#diff#(#expected#.#toString#(#)#,#results#)#)#,##// list of files#expected#.#toString#(#)#,##// expected result#results##// result#)#;#}##finally#{##// cleanup the environment#cleanupBed#(#)#;#(#new#java#.#io#.#File#(#cachefile#)#)#.#delete#(#)#;##if#(#bft#!=#null#)#bft#.#deletePropertiesfile#(#)#;#}#}