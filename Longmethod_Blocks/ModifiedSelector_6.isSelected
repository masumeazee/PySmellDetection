boolean#isSelected#(#File#basedir#,#String#filename#,#String#cacheKey#)#{#validate#(#)#;#File#f#=#new#File#(#basedir#,#filename#)#;##// You can not compute a value for a directory##if#(#f#.#isDirectory#(#)#)#{##return#selectDirectories#;#}##// Get the values and do the comparison#String#cachedValue#=#String#.#valueOf#(#cache#.#get#(#f#.#getAbsolutePath#(#)#)#)#;#String#newValue#=#algorithm#.#getValue#(#f#)#;#boolean#rv#=#(#comparator#.#compare#(#cachedValue#,#newValue#)#!=#0#)#;##// Maybe update the cache##if#(#update#&&#rv#)#{#cache#.#put#(#f#.#getAbsolutePath#(#)#,#newValue#)#;#setModified#(#getModified#(#)#+#1#)#;##if#(#!#getDelayUpdate#(#)#)#{#saveCache#(#)#;#}#}##return#rv#;#}