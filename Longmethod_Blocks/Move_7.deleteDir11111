void#deleteDir#(#File#d#,#boolean#deleteFiles#)#{#String#[#]#list#=#d#.#list#(#)#;##if#(#list#==#null#)#{##return#;#}##// on an io error list() can return null#for#(#int#i#=#0#;##i#<#list#.#length#;#i#++#)#{#String#s#=#list#[#i#]#;#File#f#=#new#File#(#d#,#s#)#;##if#(#f#.#isDirectory#(#)#)#{#deleteDir#(#f#)#;#}#else##if#(#deleteFiles#&&#!#(#f#.#delete#(#)#)#)#{#throw#new#BuildException#(#"Unable to delete file "#+#f#.#getAbsolutePath#(#)#)#;#}#else#{#throw#new#BuildException#(#"UNEXPECTED ERROR - The file "#+#f#.#getAbsolutePath#(#)#+#" should not exist!"#)#;#}#}##log#(#"Deleting directory "#+#d#.#getAbsolutePath#(#)#,#verbosity#)#;##if#(#!#d#.#delete#(#)#)#{#throw#new#BuildException#(#"Unable to delete directory "#+#d#.#getAbsolutePath#(#)#)#;#}#}