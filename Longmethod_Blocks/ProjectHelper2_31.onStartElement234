void#onStartElement#(#String#uri#,#String#tag#,#String#qname#,#Attributes#attrs#,#AntXMLContext#context#)#throws#SAXParseException#{#String#name#=#null#;#String#depends#=#""#;#String#extensionPoint#=#null#;#Project#project#=#context#.#getProject#(#)#;#Target#target#=#"target"#.#equals#(#tag#)#?#new#Target#(#)#:#new#ExtensionPoint#(#)#;#target#.#setProject#(#project#)#;#target#.#setLocation#(#new#Location#(#context#.#getLocator#(#)#)#)#;#context#.#addTarget#(#target#)#;##for#(#int#i#=#0#;##i#<#attrs#.#getLength#(#)#;#i#++#)#{#String#attrUri#=#attrs#.#getURI#(#i#)#;##if#(#attrUri#!=#null#&&#!#attrUri#.#equals#(#""#)#&&#!#attrUri#.#equals#(#uri#)#)#{#continue#;##// Ignore attributes from unknown uris#}##String#key#=#attrs#.#getLocalName#(#i#)#;#String#value#=#attrs#.#getValue#(#i#)#;##if#(#key#.#equals#(#"name"#)#)#{#name#=#value#;##if#(#""#.#equals#(#name#)#)#{#throw#new#BuildException#(#"name attribute must "#+#"not be empty"#)#;#}#}#else##if#(#key#.#equals#(#"depends"#)#)#{#depends#=#value#;#}#else##if#(#key#.#equals#(#"if"#)#)#{#target#.#setIf#(#value#)#;#}#else##if#(#key#.#equals#(#"unless"#)#)#{#target#.#setUnless#(#value#)#;#}#else##if#(#key#.#equals#(#"id"#)#)#{##if#(#value#!=#null#&&#!#value#.#equals#(#""#)#)#{#context#.#getProject#(#)#.#addReference#(#value#,#target#)#;#}#}#else##if#(#key#.#equals#(#"description"#)#)#{#target#.#setDescription#(#value#)#;#}#else##if#(#key#.#equals#(#"extensionOf"#)#)#{#extensionPoint#=#value#;#}#else#{#throw#new#SAXParseException#(#"Unexpected attribute \""#+#key#+#"\""#,#context#.#getLocator#(#)#)#;#}#}##if#(#name#==#null#)#{#throw#new#SAXParseException#(#"target element appears without a name attribute"#,#context#.#getLocator#(#)#)#;#}##String#prefix#=#null#;#boolean#isInIncludeMode#=#context#.#isIgnoringProjectTag#(#)#&&#isInIncludeMode#(#)#;#String#sep#=#getCurrentPrefixSeparator#(#)#;##if#(#isInIncludeMode#)#{#prefix#=#getTargetPrefix#(#context#)#;##if#(#prefix#==#null#)#{#throw#new#BuildException#(#"can't include build file "#+#context#.#getBuildFile#(#)#+#", no as attribute has been given"#+#" and the project tag doesn't"#+#" specify a name attribute"#)#;#}##name#=#prefix#+#sep#+#name#;#}##// Check if this target is in the current build file##if#(#context#.#getCurrentTargets#(#)#.#get#(#name#)#!=#null#)#{#throw#new#BuildException#(#"Duplicate target '"#+#name#+#"'"#,#target#.#getLocation#(#)#)#;#}##Hashtable#projectTargets#=#project#.#getTargets#(#)#;#boolean#usedTarget#=#false#;##// If the name has not already been defined define it##if#(#projectTargets#.#containsKey#(#name#)#)#{#project#.#log#(#"Already defined in main or a previous import, ignore "#+#name#,#Project#.#MSG_VERBOSE#)#;#}#else#{#target#.#setName#(#name#)#;#context#.#getCurrentTargets#(#)#.#put#(#name#,#target#)#;#project#.#addOrReplaceTarget#(#name#,#target#)#;#usedTarget#=#true#;#}##if#(#depends#.#length#(#)#>#0#)#{##if#(#!#isInIncludeMode#)#{#target#.#setDepends#(#depends#)#;#}#else#{#for#(#Iterator#iter#=#Target#.#parseDepends#(#depends#,#name#,#"depends"#)#.#iterator#(#)#;##iter#.#hasNext#(#)#;#)#{#target#.#addDependency#(#prefix#+#sep#+#iter#.#next#(#)#)#;#}#}#}##if#(#!#isInIncludeMode#&&#context#.#isIgnoringProjectTag#(#)#&&#(#prefix#=#getTargetPrefix#(#context#)#)#!=#null#)#{##// In an imported file (and not completely##// ignoring the project tag or having a preconfigured prefix)#String#newName#=#prefix#+#sep#+#name#;#Target#newTarget#=#usedTarget#?#new#Target#(#target#)#:#target#;#newTarget#.#setName#(#newName#)#;#context#.#getCurrentTargets#(#)#.#put#(#newName#,#newTarget#)#;#project#.#addOrReplaceTarget#(#newName#,#newTarget#)#;#}##if#(#extensionPoint#!=#null#)#{#for#(#Iterator#iter#=#Target#.#parseDepends#(#extensionPoint#,#name#,#"extensionOf"#)#.#iterator#(#)#;##iter#.#hasNext#(#)#;#)#{#String#tgName#=#(#String#)#iter#.#next#(#)#;##if#(#isInIncludeMode#(#)#)#{#tgName#=#prefix#+#sep#+#tgName#;#}##if#(#!#projectTargets#.#containsKey#(#tgName#)#)#{#throw#new#BuildException#(#"can't add target "#+#name#+#" to extension-point "#+#tgName#+#" because the extension-point"#+#" is unknown."#)#;#}##Target#t#=#(#Target#)#projectTargets#.#get#(#tgName#)#;##if#(#!#(#t#instanceof#ExtensionPoint#)#)#{#throw#new#BuildException#(#"referenced target "#+#tgName#+#" is not an extension-point"#)#;#}##t#.#addDependency#(#name#)#;#}#}#}