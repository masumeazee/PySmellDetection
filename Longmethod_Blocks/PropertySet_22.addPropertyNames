void#addPropertyNames#(#Set#names#,#Hashtable#properties#)#{##if#(#isReference#(#)#)#{#getRef#(#)#.#addPropertyNames#(#names#,#properties#)#;#}##dieOnCircularReference#(#)#;##// Add this PropertySet's property names.#for#(#Enumeration#e#=#ptyRefs#.#elements#(#)#;##e#.#hasMoreElements#(#)#;#)#{#PropertyRef#r#=#(#PropertyRef#)#e#.#nextElement#(#)#;##if#(#r#.#name#!=#null#)#{##if#(#properties#.#get#(#r#.#name#)#!=#null#)#{#names#.#add#(#r#.#name#)#;#}#}#else##if#(#r#.#prefix#!=#null#)#{#for#(#Enumeration#p#=#properties#.#keys#(#)#;##p#.#hasMoreElements#(#)#;#)#{#String#name#=#(#String#)#p#.#nextElement#(#)#;##if#(#name#.#startsWith#(#r#.#prefix#)#)#{#names#.#add#(#name#)#;#}#}#}#else##if#(#r#.#regex#!=#null#)#{#RegexpMatcherFactory#matchMaker#=#new#RegexpMatcherFactory#(#)#;#RegexpMatcher#matcher#=#matchMaker#.#newRegexpMatcher#(#)#;#matcher#.#setPattern#(#r#.#regex#)#;##for#(#Enumeration#p#=#properties#.#keys#(#)#;##p#.#hasMoreElements#(#)#;#)#{#String#name#=#(#String#)#p#.#nextElement#(#)#;##if#(#matcher#.#matches#(#name#)#)#{#names#.#add#(#name#)#;#}#}#}#else##if#(#r#.#builtin#!=#null#)#{##if#(#r#.#builtin#.#equals#(#BuiltinPropertySetName#.#ALL#)#)#{#names#.#addAll#(#properties#.#keySet#(#)#)#;#}#else##if#(#r#.#builtin#.#equals#(#BuiltinPropertySetName#.#SYSTEM#)#)#{#names#.#addAll#(#System#.#getProperties#(#)#.#keySet#(#)#)#;#}#else##if#(#r#.#builtin#.#equals#(#BuiltinPropertySetName#.#COMMANDLINE#)#)#{#names#.#addAll#(#getProject#(#)#.#getUserProperties#(#)#.#keySet#(#)#)#;#}#else#{#throw#new#BuildException#(#"Impossible: Invalid builtin "#+#"attribute!"#)#;#}#}#else#{#throw#new#BuildException#(#"Impossible: Invalid PropertyRef!"#)#;#}#}#}