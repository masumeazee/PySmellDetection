void#execute#(#)#throws#BuildException#{##if#(#getHost#(#)#==#null#)#{#throw#new#BuildException#(#"Host is required."#)#;#}##if#(#getUserInfo#(#)#.#getName#(#)#==#null#)#{#throw#new#BuildException#(#"Username is required."#)#;#}##if#(#getUserInfo#(#)#.#getKeyfile#(#)#==#null#&&#getUserInfo#(#)#.#getPassword#(#)#==#null#)#{#throw#new#BuildException#(#"Password or Keyfile is required."#)#;#}##if#(#nestedSequential#==#null#)#{#throw#new#BuildException#(#"Missing sequential element."#)#;#}##Session#session#=#null#;##try#{##// establish the session#session#=#openSession#(#)#;#session#.#setTimeout#(#(#int#)#maxwait#)#;##for#(#Iterator#i#=#localTunnels#.#iterator#(#)#;##i#.#hasNext#(#)#;#)#{#LocalTunnel#tunnel#=#(#LocalTunnel#)#i#.#next#(#)#;#session#.#setPortForwardingL#(#tunnel#.#getLPort#(#)#,#tunnel#.#getRHost#(#)#,#tunnel#.#getRPort#(#)#)#;#}##for#(#Iterator#i#=#remoteTunnels#.#iterator#(#)#;##i#.#hasNext#(#)#;#)#{#RemoteTunnel#tunnel#=#(#RemoteTunnel#)#i#.#next#(#)#;#session#.#setPortForwardingR#(#tunnel#.#getRPort#(#)#,#tunnel#.#getLHost#(#)#,#tunnel#.#getLPort#(#)#)#;#}##for#(#Iterator#i#=#nestedSequential#.#getNested#(#)#.#iterator#(#)#;##i#.#hasNext#(#)#;#)#{#Task#nestedTask#=#(#Task#)#i#.#next#(#)#;#nestedTask#.#perform#(#)#;#}##// completed successfully#}##catch#(#JSchException#e#)#{##if#(#e#.#getMessage#(#)#.#indexOf#(#"session is down"#)#>=#0#)#{##if#(#getFailonerror#(#)#)#{#throw#new#BuildException#(#TIMEOUT_MESSAGE#,#e#)#;#}#else#{#log#(#TIMEOUT_MESSAGE#,#Project#.#MSG_ERR#)#;#}#}#else#{##if#(#getFailonerror#(#)#)#{#throw#new#BuildException#(#e#)#;#}#else#{#log#(#"Caught exception: "#+#e#.#getMessage#(#)#,#Project#.#MSG_ERR#)#;#}#}#}##catch#(#BuildException#e#)#{##// avoid wrapping it into yet another BuildException further down#throw#e#;#}##catch#(#Exception#e#)#{##if#(#getFailonerror#(#)#)#{#throw#new#BuildException#(#e#)#;#}#else#{#log#(#"Caught exception: "#+#e#.#getMessage#(#)#,#Project#.#MSG_ERR#)#;#}#}##finally#{##if#(#session#!=#null#&&#session#.#isConnected#(#)#)#{#session#.#disconnect#(#)#;#}#}#}