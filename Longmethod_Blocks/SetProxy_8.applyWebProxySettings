void#applyWebProxySettings#(#)#{#boolean#settingsChanged#=#false#;#boolean#enablingProxy#=#false#;#Properties#sysprops#=#System#.#getProperties#(#)#;##if#(#proxyHost#!=#null#)#{#settingsChanged#=#true#;##if#(#proxyHost#.#length#(#)#!=#0#)#{#traceSettingInfo#(#)#;#enablingProxy#=#true#;#sysprops#.#put#(#ProxySetup#.#HTTP_PROXY_HOST#,#proxyHost#)#;#String#portString#=#Integer#.#toString#(#proxyPort#)#;#sysprops#.#put#(#ProxySetup#.#HTTP_PROXY_PORT#,#portString#)#;#sysprops#.#put#(#ProxySetup#.#HTTPS_PROXY_HOST#,#proxyHost#)#;#sysprops#.#put#(#ProxySetup#.#HTTPS_PROXY_PORT#,#portString#)#;#sysprops#.#put#(#ProxySetup#.#FTP_PROXY_HOST#,#proxyHost#)#;#sysprops#.#put#(#ProxySetup#.#FTP_PROXY_PORT#,#portString#)#;##if#(#nonProxyHosts#!=#null#)#{#sysprops#.#put#(#ProxySetup#.#HTTP_NON_PROXY_HOSTS#,#nonProxyHosts#)#;#sysprops#.#put#(#ProxySetup#.#HTTPS_NON_PROXY_HOSTS#,#nonProxyHosts#)#;#sysprops#.#put#(#ProxySetup#.#FTP_NON_PROXY_HOSTS#,#nonProxyHosts#)#;#}##if#(#proxyUser#!=#null#)#{#sysprops#.#put#(#ProxySetup#.#HTTP_PROXY_USERNAME#,#proxyUser#)#;#sysprops#.#put#(#ProxySetup#.#HTTP_PROXY_PASSWORD#,#proxyPassword#)#;#}#}#else#{#log#(#"resetting http proxy"#,#Project#.#MSG_VERBOSE#)#;#sysprops#.#remove#(#ProxySetup#.#HTTP_PROXY_HOST#)#;#sysprops#.#remove#(#ProxySetup#.#HTTP_PROXY_PORT#)#;#sysprops#.#remove#(#ProxySetup#.#HTTP_PROXY_USERNAME#)#;#sysprops#.#remove#(#ProxySetup#.#HTTP_PROXY_PASSWORD#)#;#sysprops#.#remove#(#ProxySetup#.#HTTPS_PROXY_HOST#)#;#sysprops#.#remove#(#ProxySetup#.#HTTPS_PROXY_PORT#)#;#sysprops#.#remove#(#ProxySetup#.#FTP_PROXY_HOST#)#;#sysprops#.#remove#(#ProxySetup#.#FTP_PROXY_PORT#)#;#}#}##//socks##if#(#socksProxyHost#!=#null#)#{#settingsChanged#=#true#;##if#(#socksProxyHost#.#length#(#)#!=#0#)#{#enablingProxy#=#true#;#sysprops#.#put#(#ProxySetup#.#SOCKS_PROXY_HOST#,#socksProxyHost#)#;#sysprops#.#put#(#ProxySetup#.#SOCKS_PROXY_PORT#,#Integer#.#toString#(#socksProxyPort#)#)#;##if#(#proxyUser#!=#null#)#{##//this may be a java1.4 thingy only#sysprops#.#put#(#ProxySetup#.#SOCKS_PROXY_USERNAME#,#proxyUser#)#;#sysprops#.#put#(#ProxySetup#.#SOCKS_PROXY_PASSWORD#,#proxyPassword#)#;#}#}#else#{#log#(#"resetting socks proxy"#,#Project#.#MSG_VERBOSE#)#;#sysprops#.#remove#(#ProxySetup#.#SOCKS_PROXY_HOST#)#;#sysprops#.#remove#(#ProxySetup#.#SOCKS_PROXY_PORT#)#;#sysprops#.#remove#(#ProxySetup#.#SOCKS_PROXY_USERNAME#)#;#sysprops#.#remove#(#ProxySetup#.#SOCKS_PROXY_PASSWORD#)#;#}#}##if#(#proxyUser#!=#null#)#{##if#(#enablingProxy#)#{#Authenticator#.#setDefault#(#new#ProxyAuth#(#proxyUser#,#proxyPassword#)#)#;#}#else##if#(#settingsChanged#)#{#Authenticator#.#setDefault#(#new#ProxyAuth#(#""#,#""#)#)#;#}#}#}