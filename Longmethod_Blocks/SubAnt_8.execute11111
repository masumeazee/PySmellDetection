void#execute#(#File#file#,#File#directory#)#throws#BuildException#{##if#(#!#file#.#exists#(#)#||#file#.#isDirectory#(#)#||#!#file#.#canRead#(#)#)#{#String#msg#=#"Invalid file: "#+#file#;##if#(#failOnError#)#{#throw#new#BuildException#(#msg#)#;#}##log#(#msg#,#Project#.#MSG_WARN#)#;##return#;#}##ant#=#createAntTask#(#directory#)#;#String#antfilename#=#file#.#getAbsolutePath#(#)#;#ant#.#setAntfile#(#antfilename#)#;##for#(#int#i#=#0#;##i#<#targets#.#size#(#)#;#i#++#)#{#TargetElement#targetElement#=#(#TargetElement#)#targets#.#get#(#i#)#;#ant#.#addConfiguredTarget#(#targetElement#)#;#}##try#{#ant#.#execute#(#)#;#}##catch#(#BuildException#e#)#{##if#(#failOnError#||#isHardError#(#e#)#)#{#throw#e#;#}##log#(#"Failure for target '"#+#subTarget#+#"' of: "#+#antfilename#+#"\n"#+#e#.#getMessage#(#)#,#Project#.#MSG_WARN#)#;#}##catch#(#Throwable#e#)#{##if#(#failOnError#||#isHardError#(#e#)#)#{#throw#new#BuildException#(#e#)#;#}##log#(#"Failure for target '"#+#subTarget#+#"' of: "#+#antfilename#+#"\n"#+#e#.#toString#(#)#,#Project#.#MSG_WARN#)#;#}##finally#{#ant#=#null#;#}#}