void#recreate#(#)#throws#BuildException#{#try#{##if#(#fileSets#.#isEmpty#(#)#)#{#handleError#(#"File set identifying link file(s) "#+#"required for action recreate"#)#;##return#;#}##Properties#links#=#loadLinks#(#fileSets#)#;##for#(#Iterator#kitr#=#links#.#keySet#(#)#.#iterator#(#)#;##kitr#.#hasNext#(#)#;#)#{#String#lnk#=#(#String#)#kitr#.#next#(#)#;#String#res#=#links#.#getProperty#(#lnk#)#;##// handle the case where lnk points to a directory (bug 25181)#try#{#File#test#=#new#File#(#lnk#)#;##if#(#!#SYMLINK_UTILS#.#isSymbolicLink#(#lnk#)#)#{#doLink#(#res#,#lnk#)#;#}#else##if#(#!#test#.#getCanonicalPath#(#)#.#equals#(#new#File#(#res#)#.#getCanonicalPath#(#)#)#)#{#SYMLINK_UTILS#.#deleteSymbolicLink#(#test#,#this#)#;#doLink#(#res#,#lnk#)#;#}##// else lnk exists, do nothing#}##catch#(#IOException#ioe#)#{#handleError#(#"IO exception while creating link"#)#;#}#}#}##finally#{#setDefaults#(#)#;#}#}