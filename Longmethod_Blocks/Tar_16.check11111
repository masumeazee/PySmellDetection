boolean#check#(#ResourceCollection#rc#)#{#boolean#upToDate#=#true#;##if#(#isFileFileSet#(#rc#)#)#{#FileSet#fs#=#(#FileSet#)#rc#;#upToDate#=#check#(#fs#.#getDir#(#getProject#(#)#)#,#getFileNames#(#fs#)#)#;#}#else##if#(#!#rc#.#isFilesystemOnly#(#)#&&#!#supportsNonFileResources#(#)#)#{#throw#new#BuildException#(#"only filesystem resources are supported"#)#;#}#else##if#(#rc#.#isFilesystemOnly#(#)#)#{#HashSet#basedirs#=#new#HashSet#(#)#;#HashMap#basedirToFilesMap#=#new#HashMap#(#)#;#Iterator#iter#=#rc#.#iterator#(#)#;##while#(#iter#.#hasNext#(#)#)#{#Resource#res#=#(#Resource#)#iter#.#next#(#)#;#FileResource#r#=#ResourceUtils#.#asFileResource#(#(#FileProvider#)#res#.#as#(#FileProvider#.#class#)#)#;#File#base#=#r#.#getBaseDir#(#)#;##if#(#base#==#null#)#{#base#=#Copy#.#NULL_FILE_PLACEHOLDER#;#}##basedirs#.#add#(#base#)#;#Vector#files#=#(#Vector#)#basedirToFilesMap#.#get#(#base#)#;##if#(#files#==#null#)#{#files#=#new#Vector#(#)#;#basedirToFilesMap#.#put#(#base#,#files#)#;#}##if#(#base#==#Copy#.#NULL_FILE_PLACEHOLDER#)#{#files#.#add#(#r#.#getFile#(#)#.#getAbsolutePath#(#)#)#;#}#else#{#files#.#add#(#r#.#getName#(#)#)#;#}#}##iter#=#basedirs#.#iterator#(#)#;##while#(#iter#.#hasNext#(#)#)#{#File#base#=#(#File#)#iter#.#next#(#)#;#Vector#f#=#(#Vector#)#basedirToFilesMap#.#get#(#base#)#;#String#[#]#files#=#(#String#[#]#)#f#.#toArray#(#new#String#[#f#.#size#(#)#]#)#;#upToDate#&=#check#(#base#==#Copy#.#NULL_FILE_PLACEHOLDER#?#null#:#base#,#files#)#;#}#}#else#{##// non-file resources#Iterator#iter#=#rc#.#iterator#(#)#;##while#(#upToDate#&&#iter#.#hasNext#(#)#)#{#Resource#r#=#(#Resource#)#iter#.#next#(#)#;#upToDate#=#archiveIsUpToDate#(#r#)#;#}#}##return#upToDate#;#}