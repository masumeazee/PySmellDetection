String#filter#(#String#line#)#{##if#(#from#==#null#)#{#throw#new#BuildException#(#"Missing from in stringreplace"#)#;#}##StringBuffer#ret#=#new#StringBuffer#(#)#;#int#start#=#0#;#int#found#=#line#.#indexOf#(#from#)#;##while#(#found#>=#0#)#{##// write everything up to the from##if#(#found#>#start#)#{#ret#.#append#(#line#.#substring#(#start#,#found#)#)#;#}##// write the replacement to##if#(#to#!=#null#)#{#ret#.#append#(#to#)#;#}##// search again#start#=#found#+#from#.#length#(#)#;#found#=#line#.#indexOf#(#from#,#start#)#;#}##// write the remaining characters##if#(#line#.#length#(#)#>#start#)#{#ret#.#append#(#line#.#substring#(#start#,#line#.#length#(#)#)#)#;#}##return#ret#.#toString#(#)#;#}