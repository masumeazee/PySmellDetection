void#translate#(#)#throws#BuildException#{#int#filesProcessed#=#0#;##for#(#int#i#=#0#;##i#<#filesets#.#size#(#)#;#i#++#)#{#FileSet#fs#=#(#FileSet#)#filesets#.#elementAt#(#i#)#;#DirectoryScanner#ds#=#fs#.#getDirectoryScanner#(#getProject#(#)#)#;#String#[#]#srcFiles#=#ds#.#getIncludedFiles#(#)#;##for#(#int#j#=#0#;##j#<#srcFiles#.#length#;#j#++#)#{#try#{#File#dest#=#FILE_UTILS#.#resolveFile#(#toDir#,#srcFiles#[#j#]#)#;##//Make sure parent dirs exist, else, create them.#try#{#File#destDir#=#new#File#(#dest#.#getParent#(#)#)#;##if#(#!#destDir#.#exists#(#)#)#{#destDir#.#mkdirs#(#)#;#}#}##catch#(#Exception#e#)#{#log#(#"Exception occurred while trying to check/create "#+#" parent directory.  "#+#e#.#getMessage#(#)#,#Project#.#MSG_DEBUG#)#;#}##destLastModified#=#dest#.#lastModified#(#)#;#File#src#=#FILE_UTILS#.#resolveFile#(#ds#.#getBasedir#(#)#,#srcFiles#[#j#]#)#;#srcLastModified#=#src#.#lastModified#(#)#;##//Check to see if dest file has to be recreated#boolean#needsWork#=#forceOverwrite#||#destLastModified#<#srcLastModified#;##if#(#!#needsWork#)#{#for#(#int#icounter#=#0#;##icounter#<#BUNDLE_MAX_ALTERNATIVES#;#icounter#++#)#{#needsWork#=#(#destLastModified#<#bundleLastModified#[#icounter#]#)#;##if#(#needsWork#)#{#break#;#}#}#}##if#(#needsWork#)#{#log#(#"Processing "#+#srcFiles#[#j#]#,#Project#.#MSG_DEBUG#)#;#translateOneFile#(#src#,#dest#)#;#++#filesProcessed#;#}#else#{#log#(#"Skipping "#+#srcFiles#[#j#]#+#" as destination file is up to date"#,#Project#.#MSG_VERBOSE#)#;#}#}##catch#(#IOException#ioe#)#{#throw#new#BuildException#(#ioe#.#getMessage#(#)#,#getLocation#(#)#)#;#}#}#}##log#(#"Translation performed on "#+#filesProcessed#+#" file(s)."#,#Project#.#MSG_DEBUG#)#;#}