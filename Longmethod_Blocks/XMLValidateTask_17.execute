void#execute#(#)#throws#BuildException#{#try#{#int#fileProcessed#=#0#;##if#(#file#==#null#&&#(#filesets#.#size#(#)#==#0#)#)#{#throw#new#BuildException#(#"Specify at least one source - "#+#"a file or a fileset."#)#;#}##if#(#file#!=#null#)#{##if#(#file#.#exists#(#)#&&#file#.#canRead#(#)#&&#file#.#isFile#(#)#)#{#doValidate#(#file#)#;#fileProcessed#++#;#}#else#{#String#errorMsg#=#"File "#+#file#+#" cannot be read"#;##if#(#failOnError#)#{#throw#new#BuildException#(#errorMsg#)#;#}#else#{#log#(#errorMsg#,#Project#.#MSG_ERR#)#;#}#}#}##for#(#int#i#=#0#;##i#<#filesets#.#size#(#)#;#i#++#)#{#FileSet#fs#=#(#FileSet#)#filesets#.#elementAt#(#i#)#;#DirectoryScanner#ds#=#fs#.#getDirectoryScanner#(#getProject#(#)#)#;#String#[#]#files#=#ds#.#getIncludedFiles#(#)#;##for#(#int#j#=#0#;##j#<#files#.#length#;#j#++#)#{#File#srcFile#=#new#File#(#fs#.#getDir#(#getProject#(#)#)#,#files#[#j#]#)#;#doValidate#(#srcFile#)#;#fileProcessed#++#;#}#}##onSuccessfulValidation#(#fileProcessed#)#;#}##finally#{#cleanup#(#)#;#}#}