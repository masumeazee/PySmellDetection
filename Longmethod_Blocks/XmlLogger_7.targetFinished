void#targetFinished#(#BuildEvent#event#)#{#Target#target#=#event#.#getTarget#(#)#;#TimedElement#targetElement#=#(#TimedElement#)#targets#.#get#(#target#)#;##if#(#targetElement#!=#null#)#{#long#totalTime#=#System#.#currentTimeMillis#(#)#-#targetElement#.#startTime#;#targetElement#.#element#.#setAttribute#(#TIME_ATTR#,#DefaultLogger#.#formatTime#(#totalTime#)#)#;#TimedElement#parentElement#=#null#;#Stack#threadStack#=#getStack#(#)#;##if#(#!#threadStack#.#empty#(#)#)#{#TimedElement#poppedStack#=#(#TimedElement#)#threadStack#.#pop#(#)#;##if#(#poppedStack#!=#targetElement#)#{#throw#new#RuntimeException#(#"Mismatch - popped element = "#+#poppedStack#+#" finished target element = "#+#targetElement#)#;#}##if#(#!#threadStack#.#empty#(#)#)#{#parentElement#=#(#TimedElement#)#threadStack#.#peek#(#)#;#}#}##if#(#parentElement#==#null#)#{#synchronizedAppend#(#buildElement#.#element#,#targetElement#.#element#)#;#}#else#{#synchronizedAppend#(#parentElement#.#element#,#targetElement#.#element#)#;#}#}##targets#.#remove#(#target#)#;#}