void#execute#(#)#throws#BuildException#{#Resource#r#=#getResource#(#)#;##if#(#r#==#null#)#{#throw#new#BuildException#(#"XmlProperty task requires a source resource"#)#;#}##try#{#log#(#"Loading "#+#src#,#Project#.#MSG_VERBOSE#)#;##if#(#r#.#isExists#(#)#)#{#DocumentBuilderFactory#factory#=#DocumentBuilderFactory#.#newInstance#(#)#;#factory#.#setValidating#(#validate#)#;#factory#.#setNamespaceAware#(#false#)#;#DocumentBuilder#builder#=#factory#.#newDocumentBuilder#(#)#;#builder#.#setEntityResolver#(#getEntityResolver#(#)#)#;#Document#document#=#null#;#FileProvider#fp#=#(#FileProvider#)#src#.#as#(#FileProvider#.#class#)#;##if#(#fp#!=#null#)#{#document#=#builder#.#parse#(#fp#.#getFile#(#)#)#;#}#else#{#document#=#builder#.#parse#(#src#.#getInputStream#(#)#)#;#}##Element#topElement#=#document#.#getDocumentElement#(#)#;##// Keep a hashtable of attributes added by this task.##// This task is allow to override its own properties##// but not other properties.  So we need to keep track##// of which properties we've added.#addedAttributes#=#new#Hashtable#(#)#;##if#(#keepRoot#)#{#addNodeRecursively#(#topElement#,#prefix#,#null#)#;#}#else#{#NodeList#topChildren#=#topElement#.#getChildNodes#(#)#;#int#numChildren#=#topChildren#.#getLength#(#)#;##for#(#int#i#=#0#;##i#<#numChildren#;#i#++#)#{#addNodeRecursively#(#topChildren#.#item#(#i#)#,#prefix#,#null#)#;#}#}#}#else#{#log#(#"Unable to find property resource: "#+#r#,#Project#.#MSG_VERBOSE#)#;#}#}##catch#(#SAXException#sxe#)#{##// Error generated during parsing#Exception#x#=#sxe#;##if#(#sxe#.#getException#(#)#!=#null#)#{#x#=#sxe#.#getException#(#)#;#}##throw#new#BuildException#(#"Failed to load "#+#src#,#x#)#;#}##catch#(#ParserConfigurationException#pce#)#{##// Parser with specified options can't be built#throw#new#BuildException#(#pce#)#;#}##catch#(#IOException#ioe#)#{##// I/O error#throw#new#BuildException#(#"Failed to load "#+#src#,#ioe#)#;#}#}