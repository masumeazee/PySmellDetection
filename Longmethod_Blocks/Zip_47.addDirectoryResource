void#addDirectoryResource#(#Resource#r#,#String#name#,#String#prefix#,#File#base#,#ZipOutputStream#zOut#,#int#defaultDirMode#,#int#thisDirMode#)#throws#IOException#{##if#(#!#name#.#endsWith#(#"/"#)#)#{#name#=#name#+#"/"#;#}##int#nextToLastSlash#=#name#.#lastIndexOf#(#"/"#,#name#.#length#(#)#-#2#)#;##if#(#nextToLastSlash#!=#-#1#)#{#addParentDirs#(#base#,#name#.#substring#(#0#,#nextToLastSlash#+#1#)#,#zOut#,#prefix#,#defaultDirMode#)#;#}##zipDir#(#r#,#zOut#,#prefix#+#name#,#thisDirMode#,#r#instanceof#ZipResource#?#(#(#ZipResource#)#r#)#.#getExtraFields#(#)#:#null#)#;#}