void#zipFile#(#File#file#,#ZipOutputStream#zOut#,#String#vPath#,#int#mode#)#throws#IOException#{##if#(#file#.#equals#(#zipFile#)#)#{#throw#new#BuildException#(#"A zip file cannot include itself"#,#getLocation#(#)#)#;#}##FileInputStream#fIn#=#new#FileInputStream#(#file#)#;##try#{##// ZIPs store time with a granularity of 2 seconds, round up#zipFile#(#fIn#,#zOut#,#vPath#,#file#.#lastModified#(#)#+#(#roundUp#?#ROUNDUP_MILLIS#:#0#)#,#null#,#mode#)#;#}##finally#{#fIn#.#close#(#)#;#}#}