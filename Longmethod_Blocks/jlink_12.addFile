void#addFile#(#ZipOutputStream#output#,#File#file#,#String#prefix#,#boolean#compress#)#throws#IOException#{##//Make sure file exists##if#(#!#file#.#exists#(#)#)#{##return#;#}##ZipEntry#entry#=#new#ZipEntry#(#getEntryName#(#file#,#prefix#)#)#;#entry#.#setTime#(#file#.#lastModified#(#)#)#;#entry#.#setSize#(#file#.#length#(#)#)#;##if#(#!#compress#)#{#entry#.#setCrc#(#calcChecksum#(#file#)#)#;#}##FileInputStream#input#=#new#FileInputStream#(#file#)#;#addToOutputStream#(#output#,#input#,#entry#)#;#}