void#configureProject#(#Project#project#,#File#buildFile#)#throws#BuildException#{#FileResource#resource#=#new#FileResource#(#buildFile#)#;#ProjectHelper#helper#=#ProjectHelperRepository#.#getInstance#(#)#.#getProjectHelperForBuildFile#(#resource#)#;#project#.#addReference#(#PROJECTHELPER_REFERENCE#,#helper#)#;#helper#.#parse#(#project#,#buildFile#)#;#}##Vector#getImportStack#(#)#{#return#importStack#;#}##Object#initialValue#(#)#{#return#(#String#)#null#;#}##String#getCurrentTargetPrefix#(#)#{#return#(#String#)#targetPrefix#.#get#(#)#;#}##void#setCurrentTargetPrefix#(#String#prefix#)#{#targetPrefix#.#set#(#prefix#)#;#}##Object#initialValue#(#)#{#return#"."#;#}##String#getCurrentPrefixSeparator#(#)#{#return#(#String#)#prefixSeparator#.#get#(#)#;#}##void#setCurrentPrefixSeparator#(#String#sep#)#{#prefixSeparator#.#set#(#sep#)#;#}##Object#initialValue#(#)#{#return#Boolean#.#FALSE#;#}##boolean#isInIncludeMode#(#)#{#return#inIncludeMode#.#get#(#)#==#Boolean#.#TRUE#;#}##void#setInIncludeMode#(#boolean#includeMode#)#{#inIncludeMode#.#set#(#includeMode#?#Boolean#.#TRUE#:#Boolean#.#FALSE#)#;#}##void#parse#(#Project#project#,#Object#source#)#throws#BuildException#{#throw#new#BuildException#(#"ProjectHelper.parse() must be implemented "#+#"in a helper plugin "#+#this#.#getClass#(#)#.#getName#(#)#)#;#}##ProjectHelper#getProjectHelper#(#)#{#return#(#ProjectHelper#)#ProjectHelperRepository#.#getInstance#(#)#.#getHelpers#(#)#.#next#(#)#;#}##ClassLoader#getContextClassLoader#(#)#{#return#LoaderUtils#.#isContextLoaderAvailable#(#)#?#LoaderUtils#.#getContextClassLoader#(#)#:#null#;#}##void#configure#(#Object#target#,#AttributeList#attrs#,#Project#project#)#throws#BuildException#{#if#(#target#instanceof#TypeAdapter#)#{#target#=#(#(#TypeAdapter#)#target#)#.#getProxy#(#)#;#}#IntrospectionHelper#ih#=#IntrospectionHelper#.#getHelper#(#project#,#target#.#getClass#(#)#)#;#for#(#int#i#=#0#,#length#=#attrs#.#getLength#(#)#;#i#<#length#;#i#++#)#{#// reflect these into the target#String#value#=#replaceProperties#(#project#,#attrs#.#getValue#(#i#)#,#project#.#getProperties#(#)#)#;#try#{#ih#.#setAttribute#(#project#,#target#,#attrs#.#getName#(#i#)#.#toLowerCase#(#Locale#.#US#)#,#value#)#;#}#catch#(#BuildException#be#)#{#// id attribute must be set externally#if#(#!#attrs#.#getName#(#i#)#.#equals#(#"id"#)#)#{#throw#be#;#}#}#}#}##void#addText#(#Project#project#,#Object#target#,#char#[#]#buf#,#int#start#,#int#count#)#throws#BuildException#{#addText#(#project#,#target#,#new#String#(#buf#,#start#,#count#)#)#;#}##void#addText#(#Project#project#,#Object#target#,#String#text#)#throws#BuildException#{#if#(#text#==#null#)#{#return#;#}#if#(#target#instanceof#TypeAdapter#)#{#target#=#(#(#TypeAdapter#)#target#)#.#getProxy#(#)#;#}#IntrospectionHelper#.#getHelper#(#project#,#target#.#getClass#(#)#)#.#addText#(#project#,#target#,#text#)#;#}##void#storeChild#(#Project#project#,#Object#parent#,#Object#child#,#String#tag#)#{#IntrospectionHelper#ih#=#IntrospectionHelper#.#getHelper#(#project#,#parent#.#getClass#(#)#)#;#ih#.#storeElement#(#project#,#parent#,#child#,#tag#)#;#}##String#replaceProperties#(#Project#project#,#String#value#)#throws#BuildException#{#// needed since project properties are not accessible#return#project#.#replaceProperties#(#value#)#;#}##String#replaceProperties#(#Project#project#,#String#value#,#Hashtable#keys#)#throws#BuildException#{#PropertyHelper#ph#=#PropertyHelper#.#getPropertyHelper#(#project#)#;#return#ph#.#replaceProperties#(#null#,#value#,#keys#)#;#}##void#parsePropertyString#(#String#value#,#Vector#fragments#,#Vector#propertyRefs#)#throws#BuildException#{#PropertyHelper#.#parsePropertyStringDefault#(#value#,#fragments#,#propertyRefs#)#;#}##String#genComponentName#(#String#uri#,#String#name#)#{#if#(#uri#==#null#||#uri#.#equals#(#""#)#||#uri#.#equals#(#ANT_CORE_URI#)#)#{#return#name#;#}#return#uri#+#":"#+#name#;#}##String#extractUriFromComponentName#(#String#componentName#)#{#if#(#componentName#==#null#)#{#return#""#;#}#int#index#=#componentName#.#lastIndexOf#(#':'#)#;#if#(#index#==#-#1#)#{#return#""#;#}#return#componentName#.#substring#(#0#,#index#)#;#}##String#extractNameFromComponentName#(#String#componentName#)#{#int#index#=#componentName#.#lastIndexOf#(#':'#)#;#if#(#index#==#-#1#)#{#return#componentName#;#}#return#componentName#.#substring#(#index#+#1#)#;#}##BuildException#addLocationToBuildException#(#BuildException#ex#,#Location#newLocation#)#{#if#(#ex#.#getLocation#(#)#==#null#||#ex#.#getMessage#(#)#==#null#)#{#return#ex#;#}#String#errorMessage#=#"The following error occurred while executing this line:"#+#System#.#getProperty#(#"line.separator"#)#+#ex#.#getLocation#(#)#.#toString#(#)#+#ex#.#getMessage#(#)#;#if#(#newLocation#==#null#)#{#return#new#BuildException#(#errorMessage#,#ex#)#;#}#return#new#BuildException#(#errorMessage#,#ex#,#newLocation#)#;#}##boolean#canParseAntlibDescriptor#(#Resource#r#)#{#return#false#;#}##UnknownElement#parseAntlibDescriptor#(#Project#containingProject#,#Resource#source#)#{#throw#new#BuildException#(#"can't parse antlib descriptors"#)#;#}##boolean#canParseBuildFile#(#Resource#buildFile#)#{#return#true#;#}##String#getDefaultBuildFile#(#)#{#return#Main#.#DEFAULT_BUILD_FILENAME#;#}##