void#setFile#(#File#f#)#{#file#=#f#;#}##void#setNamespacePolicy#(#NamespacePolicy#n#)#{#namespacePolicy#=#n#;#}##void#setAppend#(#boolean#b#)#{#append#=#b#;#}##void#execute#(#)#{#DOMElementWriter#writer#=#new#DOMElementWriter#(#!#append#,#namespacePolicy#.#getPolicy#(#)#)#;#OutputStream#os#=#null#;#try#{#if#(#file#!=#null#)#{#os#=#new#FileOutputStream#(#file#.#getAbsolutePath#(#)#,#append#)#;#}#else#{#os#=#new#LogOutputStream#(#this#,#Project#.#MSG_INFO#)#;#}#Node#n#=#getFragment#(#)#.#getFirstChild#(#)#;#if#(#n#==#null#)#{#throw#new#BuildException#(#ERROR_NO_XML#)#;#}#writer#.#write#(#(#Element#)#n#,#os#)#;#}#catch#(#BuildException#e#)#{#throw#e#;#}#catch#(#Exception#e#)#{#throw#new#BuildException#(#e#)#;#}#finally#{#FileUtils#.#close#(#os#)#;#}#}##String#[#]#getValues#(#)#{#return#new#String#[#]#{#IGNORE#,#ELEMENTS#,#ALL#}#;#}##DOMElementWriter#.#XmlNamespacePolicy#getPolicy#(#)#{#String#s#=#getValue#(#)#;#if#(#IGNORE#.#equalsIgnoreCase#(#s#)#)#{#return#DOMElementWriter#.#XmlNamespacePolicy#.#IGNORE#;#}#else#if#(#ELEMENTS#.#equalsIgnoreCase#(#s#)#)#{#return#DOMElementWriter#.#XmlNamespacePolicy#.#ONLY_QUALIFY_ELEMENTS#;#}#else#if#(#ALL#.#equalsIgnoreCase#(#s#)#)#{#return#DOMElementWriter#.#XmlNamespacePolicy#.#QUALIFY_ALL#;#}#else#{#throw#new#BuildException#(#"Invalid namespace policy: "#+#s#)#;#}#}##