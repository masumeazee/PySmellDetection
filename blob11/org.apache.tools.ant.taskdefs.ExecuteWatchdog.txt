void#start#(#Process#process#)#{#if#(#process#==#null#)#{#throw#new#NullPointerException#(#"process is null."#)#;#}#if#(#this#.#process#!=#null#)#{#throw#new#IllegalStateException#(#"Already running."#)#;#}#this#.#caught#=#null#;#this#.#killedProcess#=#false#;#this#.#watch#=#true#;#this#.#process#=#process#;#watchdog#.#start#(#)#;#}##void#stop#(#)#{#watchdog#.#stop#(#)#;#cleanUp#(#)#;#}##void#timeoutOccured#(#Watchdog#w#)#{#try#{#try#{#// We must check if the process was not stopped#// before being here#process#.#exitValue#(#)#;#}#catch#(#IllegalThreadStateException#itse#)#{#// the process is not terminated, if this is really#// a timeout and not a manual stop then kill it.#if#(#watch#)#{#killedProcess#=#true#;#process#.#destroy#(#)#;#}#}#}#catch#(#Exception#e#)#{#caught#=#e#;#}#finally#{#cleanUp#(#)#;#}#}##void#cleanUp#(#)#{#watch#=#false#;#process#=#null#;#}##void#checkException#(#)#throws#BuildException#{#if#(#caught#!=#null#)#{#throw#new#BuildException#(#"Exception in ExecuteWatchdog.run: "#+#caught#.#getMessage#(#)#,#caught#)#;#}#}##boolean#isWatching#(#)#{#return#watch#;#}##boolean#killedProcess#(#)#{#return#killedProcess#;#}##