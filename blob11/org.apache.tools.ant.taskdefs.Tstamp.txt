void#setPrefix#(#String#prefix#)#{#this#.#prefix#=#prefix#;#if#(#!#this#.#prefix#.#endsWith#(#"."#)#)#{#this#.#prefix#+=#"."#;#}#}##void#execute#(#)#throws#BuildException#{#try#{#Date#d#=#new#Date#(#)#;#Enumeration#i#=#customFormats#.#elements#(#)#;#while#(#i#.#hasMoreElements#(#)#)#{#CustomFormat#cts#=#(#CustomFormat#)#i#.#nextElement#(#)#;#cts#.#execute#(#getProject#(#)#,#d#,#getLocation#(#)#)#;#}#SimpleDateFormat#dstamp#=#new#SimpleDateFormat#(#"yyyyMMdd"#)#;#setProperty#(#"DSTAMP"#,#dstamp#.#format#(#d#)#)#;#SimpleDateFormat#tstamp#=#new#SimpleDateFormat#(#"HHmm"#)#;#setProperty#(#"TSTAMP"#,#tstamp#.#format#(#d#)#)#;#SimpleDateFormat#today#=#new#SimpleDateFormat#(#"MMMM d yyyy"#,#Locale#.#US#)#;#setProperty#(#"TODAY"#,#today#.#format#(#d#)#)#;#}#catch#(#Exception#e#)#{#throw#new#BuildException#(#e#)#;#}#}##CustomFormat#createFormat#(#)#{#CustomFormat#cts#=#new#CustomFormat#(#)#;#customFormats#.#addElement#(#cts#)#;#return#cts#;#}##void#setProperty#(#String#name#,#String#value#)#{#getProject#(#)#.#setNewProperty#(#prefix#+#name#,#value#)#;#}##void#setProperty#(#String#propertyName#)#{#this#.#propertyName#=#propertyName#;#}##void#setPattern#(#String#pattern#)#{#this#.#pattern#=#pattern#;#}##void#setLocale#(#String#locale#)#{#StringTokenizer#st#=#new#StringTokenizer#(#locale#,#" \t\n\r\f,"#)#;#try#{#language#=#st#.#nextToken#(#)#;#if#(#st#.#hasMoreElements#(#)#)#{#country#=#st#.#nextToken#(#)#;#if#(#st#.#hasMoreElements#(#)#)#{#variant#=#st#.#nextToken#(#)#;#if#(#st#.#hasMoreElements#(#)#)#{#throw#new#BuildException#(#"bad locale format"#,#getLocation#(#)#)#;#}#}#}#else#{#country#=#""#;#}#}#catch#(#NoSuchElementException#e#)#{#throw#new#BuildException#(#"bad locale format"#,#e#,#getLocation#(#)#)#;#}#}##void#setTimezone#(#String#id#)#{#timeZone#=#TimeZone#.#getTimeZone#(#id#)#;#}##void#setOffset#(#int#offset#)#{#this#.#offset#=#offset#;#}##void#setUnit#(#String#unit#)#{#log#(#"DEPRECATED - The setUnit(String) method has been deprecated."#+#" Use setUnit(Tstamp.Unit) instead."#)#;#Unit#u#=#new#Unit#(#)#;#u#.#setValue#(#unit#)#;#field#=#u#.#getCalendarField#(#)#;#}##void#setUnit#(#Unit#unit#)#{#field#=#unit#.#getCalendarField#(#)#;#}##void#execute#(#Project#project#,#Date#date#,#Location#location#)#{#if#(#propertyName#==#null#)#{#throw#new#BuildException#(#"property attribute must be provided"#,#location#)#;#}#if#(#pattern#==#null#)#{#throw#new#BuildException#(#"pattern attribute must be provided"#,#location#)#;#}#SimpleDateFormat#sdf#;#if#(#language#==#null#)#{#sdf#=#new#SimpleDateFormat#(#pattern#)#;#}#else#if#(#variant#==#null#)#{#sdf#=#new#SimpleDateFormat#(#pattern#,#new#Locale#(#language#,#country#)#)#;#}#else#{#sdf#=#new#SimpleDateFormat#(#pattern#,#new#Locale#(#language#,#country#,#variant#)#)#;#}#if#(#offset#!=#0#)#{#Calendar#calendar#=#Calendar#.#getInstance#(#)#;#calendar#.#setTime#(#date#)#;#calendar#.#add#(#field#,#offset#)#;#date#=#calendar#.#getTime#(#)#;#}#if#(#timeZone#!=#null#)#{#sdf#.#setTimeZone#(#timeZone#)#;#}#Tstamp#.#this#.#setProperty#(#propertyName#,#sdf#.#format#(#date#)#)#;#}##int#getCalendarField#(#)#{#String#key#=#getValue#(#)#.#toLowerCase#(#)#;#Integer#i#=#(#Integer#)#calendarFields#.#get#(#key#)#;#return#i#.#intValue#(#)#;#}##String#[#]#getValues#(#)#{#return#UNITS#;#}##