void#setProject#(#Project#project#)#{#this#.#project#=#project#;#}##Project#getProject#(#)#{#return#project#;#}##void#setResource#(#String#r#)#{#this#.#resource#=#new#FileResource#(#new#File#(#r#)#)#;#}##void#setRefid#(#String#refid#)#{#this#.#refid#=#refid#;#}##void#resolveRefid#(#)#{#try#{#if#(#getProject#(#)#==#null#)#{#throw#new#BuildException#(#"Cannot retrieve refid; project unset"#)#;#}#Object#o#=#getProject#(#)#.#getReference#(#refid#)#;#if#(#!#(#o#instanceof#Resource#)#)#{#if#(#o#instanceof#ResourceCollection#)#{#ResourceCollection#rc#=#(#ResourceCollection#)#o#;#if#(#rc#.#size#(#)#==#1#)#{#o#=#rc#.#iterator#(#)#.#next#(#)#;#}#}#else#{#throw#new#BuildException#(#"Illegal value at '"#+#refid#+#"': "#+#String#.#valueOf#(#o#)#)#;#}#}#this#.#resource#=#(#Resource#)#o#;#}#finally#{#refid#=#null#;#}#}##void#setSubstring#(#String#substring#)#{#this#.#substring#=#substring#;#}##void#setCasesensitive#(#boolean#casesensitive#)#{#this#.#casesensitive#=#casesensitive#;#}##void#validate#(#)#{#if#(#resource#!=#null#&&#refid#!=#null#)#{#throw#new#BuildException#(#"Cannot set both resource and refid"#)#;#}#if#(#resource#==#null#&&#refid#!=#null#)#{#resolveRefid#(#)#;#}#if#(#resource#==#null#||#substring#==#null#)#{#throw#new#BuildException#(#"both resource and substring are required "#+#"in <resourcecontains>"#)#;#}#}##boolean#eval#(#)#throws#BuildException#{#validate#(#)#;#if#(#substring#.#length#(#)#==#0#)#{#if#(#getProject#(#)#!=#null#)#{#getProject#(#)#.#log#(#"Substring is empty; returning true"#,#Project#.#MSG_VERBOSE#)#;#}#return#true#;#}#if#(#resource#.#getSize#(#)#==#0#)#{#return#false#;#}#BufferedReader#reader#=#null#;#try#{#reader#=#new#BufferedReader#(#new#InputStreamReader#(#resource#.#getInputStream#(#)#)#)#;#String#contents#=#FileUtils#.#safeReadFully#(#reader#)#;#String#sub#=#substring#;#if#(#!#casesensitive#)#{#contents#=#contents#.#toLowerCase#(#)#;#sub#=#sub#.#toLowerCase#(#)#;#}#return#contents#.#indexOf#(#sub#)#>=#0#;#}#catch#(#IOException#e#)#{#throw#new#BuildException#(#"There was a problem accessing resource : "#+#resource#)#;#}#finally#{#FileUtils#.#close#(#reader#)#;#}#}##