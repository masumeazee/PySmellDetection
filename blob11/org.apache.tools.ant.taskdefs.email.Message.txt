void#addText#(#String#text#)#{#buffer#.#append#(#text#)#;#}##void#setSrc#(#File#src#)#{#this#.#messageSource#=#src#;#}##void#setMimeType#(#String#mimeType#)#{#this#.#mimeType#=#mimeType#;#specified#=#true#;#}##String#getMimeType#(#)#{#return#mimeType#;#}##void#print#(#PrintStream#ps#)#throws#IOException#{#// We need character encoding aware printing here.#// So, using BufferedWriter over OutputStreamWriter instead of PrintStream#BufferedWriter#out#=#null#;#try#{#out#=#charset#!=#null#?#new#BufferedWriter#(#new#OutputStreamWriter#(#ps#,#charset#)#)#:#new#BufferedWriter#(#new#OutputStreamWriter#(#ps#)#)#;#if#(#messageSource#!=#null#)#{#// Read message from a file#FileReader#freader#=#new#FileReader#(#messageSource#)#;#try#{#BufferedReader#in#=#new#BufferedReader#(#freader#)#;#String#line#=#null#;#while#(#(#line#=#in#.#readLine#(#)#)#!=#null#)#{#out#.#write#(#getProject#(#)#.#replaceProperties#(#line#)#)#;#out#.#newLine#(#)#;#}#}#finally#{#freader#.#close#(#)#;#}#}#else#{#out#.#write#(#getProject#(#)#.#replaceProperties#(#buffer#.#substring#(#0#)#)#)#;#out#.#newLine#(#)#;#}#out#.#flush#(#)#;#}#finally#{#FileUtils#.#close#(#out#)#;#}#}##boolean#isMimeTypeSpecified#(#)#{#return#specified#;#}##void#setCharset#(#String#charset#)#{#this#.#charset#=#charset#;#}##String#getCharset#(#)#{#return#charset#;#}##