void#setUp#(#)#throws#Exception#{#liaison#=#createLiaison#(#)#;#}##XSLTLiaison#createLiaison#(#)#throws#Exception#;##File#getFile#(#String#name#)#throws#FileNotFoundException#{#URL#url#=#getClass#(#)#.#getResource#(#name#)#;#if#(#url#==#null#)#{#throw#new#FileNotFoundException#(#"Unable to load '"#+#name#+#"' from classpath"#)#;#}#return#new#File#(#FILE_UTILS#.#fromURI#(#url#.#toExternalForm#(#)#)#)#;#}##void#testTransform#(#)#throws#Exception#{#File#xsl#=#getFile#(#"/taskdefs/optional/xsltliaison-in.xsl"#)#;#liaison#.#setStylesheet#(#xsl#)#;#liaison#.#addParam#(#"param"#,#"value"#)#;#File#in#=#getFile#(#"/taskdefs/optional/xsltliaison-in.xml"#)#;#File#out#=#new#File#(#"xsltliaison.tmp"#)#;#out#.#deleteOnExit#(#)#;#// just to be sure#try#{#liaison#.#transform#(#in#,#out#)#;#}#finally#{#out#.#delete#(#)#;#}#}##void#testEncoding#(#)#throws#Exception#{#File#xsl#=#getFile#(#"/taskdefs/optional/xsltliaison-encoding-in.xsl"#)#;#liaison#.#setStylesheet#(#xsl#)#;#File#in#=#getFile#(#"/taskdefs/optional/xsltliaison-encoding-in.xml"#)#;#File#out#=#new#File#(#"xsltliaison-encoding.tmp"#)#;#out#.#deleteOnExit#(#)#;#// just to be sure#try#{#liaison#.#transform#(#in#,#out#)#;#Document#doc#=#parseXML#(#out#)#;#assertEquals#(#"root"#,#doc#.#getDocumentElement#(#)#.#getNodeName#(#)#)#;#assertEquals#(#"message"#,#doc#.#getDocumentElement#(#)#.#getFirstChild#(#)#.#getNodeName#(#)#)#;#assertEquals#(#"\u00E9\u00E0\u00E8\u00EF\u00F9"#,#doc#.#getDocumentElement#(#)#.#getFirstChild#(#)#.#getFirstChild#(#)#.#getNodeValue#(#)#)#;#}#finally#{#out#.#delete#(#)#;#}#}##Document#parseXML#(#File#file#)#throws#Exception#{#DocumentBuilderFactory#dbfactory#=#DocumentBuilderFactory#.#newInstance#(#)#;#DocumentBuilder#dbuilder#=#dbfactory#.#newDocumentBuilder#(#)#;#return#dbuilder#.#parse#(#file#)#;#}##