JspCompilerAdapter#getCompiler#(#String#compilerType#,#Task#task#)#throws#BuildException#{#return#getCompiler#(#compilerType#,#task#,#// Memory-Leak in line below#task#.#getProject#(#)#.#createClassLoader#(#null#)#)#;#}##JspCompilerAdapter#getCompiler#(#String#compilerType#,#Task#task#,#AntClassLoader#loader#)#throws#BuildException#{#if#(#compilerType#.#equalsIgnoreCase#(#"jasper"#)#)#{#//tomcat4.0 gets the old mangler#return#new#JasperC#(#new#JspNameMangler#(#)#)#;#}#if#(#compilerType#.#equalsIgnoreCase#(#"jasper41"#)#)#{#//tomcat4.1 gets the new one#return#new#JasperC#(#new#Jasper41Mangler#(#)#)#;#}#return#resolveClassName#(#compilerType#,#loader#)#;#}##JspCompilerAdapter#resolveClassName#(#String#className#,#AntClassLoader#classloader#)#throws#BuildException#{#try#{#Class#c#=#classloader#.#findClass#(#className#)#;#Object#o#=#c#.#newInstance#(#)#;#return#(#JspCompilerAdapter#)#o#;#}#catch#(#ClassNotFoundException#cnfe#)#{#throw#new#BuildException#(#className#+#" can\'t be found."#,#cnfe#)#;#}#catch#(#ClassCastException#cce#)#{#throw#new#BuildException#(#className#+#" isn\'t the classname of "#+#"a compiler adapter."#,#cce#)#;#}#catch#(#Throwable#t#)#{#// for all other possibilities#throw#new#BuildException#(#className#+#" caused an interesting "#+#"exception."#,#t#)#;#}#}##