void#setUp#(#)#{#configureProject#(#"src/etc/testcases/taskdefs/optional/script/scriptdef.xml"#)#;#}##void#testSimple#(#)#{#executeTarget#(#"simple"#)#;#// get the fileset and its basedir#Project#p#=#getProject#(#)#;#FileSet#fileset#=#(#FileSet#)#p#.#getReference#(#"testfileset"#)#;#File#baseDir#=#fileset#.#getDir#(#p#)#;#String#log#=#getLog#(#)#;#assertTrue#(#"Expecting attribute value printed"#,#log#.#indexOf#(#"Attribute attr1 = test"#)#!=#-#1#)#;#assertTrue#(#"Expecting nested element value printed"#,#log#.#indexOf#(#"Fileset basedir = "#+#baseDir#.#getAbsolutePath#(#)#)#!=#-#1#)#;#}##void#testNoLang#(#)#{#expectBuildExceptionContaining#(#"nolang"#,#"Absence of language attribute not detected"#,#"requires a language attribute"#)#;#}##void#testNoName#(#)#{#expectBuildExceptionContaining#(#"noname"#,#"Absence of name attribute not detected"#,#"scriptdef requires a name attribute"#)#;#}##void#testNestedByClassName#(#)#{#executeTarget#(#"nestedbyclassname"#)#;#// get the fileset and its basedir#Project#p#=#getProject#(#)#;#FileSet#fileset#=#(#FileSet#)#p#.#getReference#(#"testfileset"#)#;#File#baseDir#=#fileset#.#getDir#(#p#)#;#String#log#=#getLog#(#)#;#assertTrue#(#"Expecting attribute value to be printed"#,#log#.#indexOf#(#"Attribute attr1 = test"#)#!=#-#1#)#;#assertTrue#(#"Expecting nested element value to be printed"#,#log#.#indexOf#(#"Fileset basedir = "#+#baseDir#.#getAbsolutePath#(#)#)#!=#-#1#)#;#}##void#testNoElement#(#)#{#expectOutput#(#"noelement"#,#"Attribute attr1 = test"#)#;#}##void#testException#(#)#{#expectBuildExceptionContaining#(#"exception"#,#"Should have thrown an exception in the script"#,#"TypeError"#)#;#}##void#testDoubleDef#(#)#{#executeTarget#(#"doubledef"#)#;#String#log#=#getLog#(#)#;#assertTrue#(#"Task1 did not execute"#,#log#.#indexOf#(#"Task1"#)#!=#-#1#)#;#assertTrue#(#"Task2 did not execute"#,#log#.#indexOf#(#"Task2"#)#!=#-#1#)#;#}##void#testDoubleAttribute#(#)#{#expectBuildExceptionContaining#(#"doubleAttributeDef"#,#"Should have detected duplicate attribute definition"#,#"attr1 attribute more than once"#)#;#}##void#testProperty#(#)#{#executeTarget#(#"property"#)#;#// get the fileset and its basedir#String#log#=#getLog#(#)#;#assertTrue#(#"Expecting property in attribute value replaced"#,#log#.#indexOf#(#"Attribute value = test"#)#!=#-#1#)#;#}##