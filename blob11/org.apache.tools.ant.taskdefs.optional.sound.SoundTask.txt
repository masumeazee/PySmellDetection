BuildAlert#createSuccess#(#)#{#success#=#new#BuildAlert#(#)#;#return#success#;#}##BuildAlert#createFail#(#)#{#fail#=#new#BuildAlert#(#)#;#return#fail#;#}##void#init#(#)#{#}##void#execute#(#)#{#AntSoundPlayer#soundPlayer#=#new#AntSoundPlayer#(#)#;#if#(#success#==#null#)#{#log#(#"No nested success element found."#,#Project#.#MSG_WARN#)#;#}#else#{#soundPlayer#.#addBuildSuccessfulSound#(#success#.#getSource#(#)#,#success#.#getLoops#(#)#,#success#.#getDuration#(#)#)#;#}#if#(#fail#==#null#)#{#log#(#"No nested failure element found."#,#Project#.#MSG_WARN#)#;#}#else#{#soundPlayer#.#addBuildFailedSound#(#fail#.#getSource#(#)#,#fail#.#getLoops#(#)#,#fail#.#getDuration#(#)#)#;#}#getProject#(#)#.#addBuildListener#(#soundPlayer#)#;#}##void#setDuration#(#Long#duration#)#{#this#.#duration#=#duration#;#}##void#setSource#(#File#source#)#{#this#.#source#=#source#;#}##void#setLoops#(#int#loops#)#{#this#.#loops#=#loops#;#}##File#getSource#(#)#{#File#nofile#=#null#;#// Check if source is a directory#if#(#source#.#exists#(#)#)#{#if#(#source#.#isDirectory#(#)#)#{#// get the list of files in the dir#String#[#]#entries#=#source#.#list#(#)#;#Vector#files#=#new#Vector#(#)#;#for#(#int#i#=#0#;#i#<#entries#.#length#;#i#++#)#{#File#f#=#new#File#(#source#,#entries#[#i#]#)#;#if#(#f#.#isFile#(#)#)#{#files#.#addElement#(#f#)#;#}#}#if#(#files#.#size#(#)#<#1#)#{#throw#new#BuildException#(#"No files found in directory "#+#source#)#;#}#int#numfiles#=#files#.#size#(#)#;#// get a random number between 0 and the number of files#Random#rn#=#new#Random#(#)#;#int#x#=#rn#.#nextInt#(#numfiles#)#;#// set the source to the file at that location#this#.#source#=#(#File#)#files#.#elementAt#(#x#)#;#}#}#else#{#log#(#source#+#": invalid path."#,#Project#.#MSG_WARN#)#;#this#.#source#=#nofile#;#}#return#this#.#source#;#}##int#getLoops#(#)#{#return#this#.#loops#;#}##Long#getDuration#(#)#{#return#this#.#duration#;#}##