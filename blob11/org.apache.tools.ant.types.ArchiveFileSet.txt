void#setDir#(#File#dir#)#throws#BuildException#{#checkAttributesAllowed#(#)#;#if#(#src#!=#null#)#{#throw#new#BuildException#(#ERROR_DIR_AND_SRC_ATTRIBUTES#)#;#}#super#.#setDir#(#dir#)#;#hasDir#=#true#;#}##void#addConfigured#(#ResourceCollection#a#)#{#checkChildrenAllowed#(#)#;#if#(#a#.#size#(#)#!=#1#)#{#throw#new#BuildException#(#"only single argument resource collections"#+#" are supported as archives"#)#;#}#setSrcResource#(#(#Resource#)#a#.#iterator#(#)#.#next#(#)#)#;#}##void#setSrc#(#File#srcFile#)#{#setSrcResource#(#new#FileResource#(#srcFile#)#)#;#}##void#setSrcResource#(#Resource#src#)#{#checkArchiveAttributesAllowed#(#)#;#if#(#hasDir#)#{#throw#new#BuildException#(#ERROR_DIR_AND_SRC_ATTRIBUTES#)#;#}#this#.#src#=#src#;#setChecked#(#false#)#;#}##File#getSrc#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#p#)#)#.#getSrc#(#p#)#;#}#return#getSrc#(#)#;#}##void#setErrorOnMissingArchive#(#boolean#errorOnMissingArchive#)#{#checkAttributesAllowed#(#)#;#this#.#errorOnMissingArchive#=#errorOnMissingArchive#;#}##File#getSrc#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getCheckedRef#(#)#)#.#getSrc#(#)#;#}#dieOnCircularReference#(#)#;#if#(#src#!=#null#)#{#FileProvider#fp#=#(#FileProvider#)#src#.#as#(#FileProvider#.#class#)#;#if#(#fp#!=#null#)#{#return#fp#.#getFile#(#)#;#}#}#return#null#;#}##Object#getCheckedRef#(#Project#p#)#{#return#getRef#(#p#)#;#}##void#setPrefix#(#String#prefix#)#{#checkArchiveAttributesAllowed#(#)#;#if#(#!#""#.#equals#(#prefix#)#&&#!#""#.#equals#(#fullpath#)#)#{#throw#new#BuildException#(#ERROR_PATH_AND_PREFIX#)#;#}#this#.#prefix#=#prefix#;#}##String#getPrefix#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#p#)#)#.#getPrefix#(#p#)#;#}#dieOnCircularReference#(#p#)#;#return#prefix#;#}##void#setFullpath#(#String#fullpath#)#{#checkArchiveAttributesAllowed#(#)#;#if#(#!#""#.#equals#(#prefix#)#&&#!#""#.#equals#(#fullpath#)#)#{#throw#new#BuildException#(#ERROR_PATH_AND_PREFIX#)#;#}#this#.#fullpath#=#fullpath#;#}##String#getFullpath#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#p#)#)#.#getFullpath#(#p#)#;#}#dieOnCircularReference#(#p#)#;#return#fullpath#;#}##ArchiveScanner#newArchiveScanner#(#)#;##DirectoryScanner#getDirectoryScanner#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#getRef#(#p#)#.#getDirectoryScanner#(#p#)#;#}#dieOnCircularReference#(#)#;#if#(#src#==#null#)#{#return#super#.#getDirectoryScanner#(#p#)#;#}#if#(#!#src#.#isExists#(#)#&&#errorOnMissingArchive#)#{#throw#new#BuildException#(#"The archive "#+#src#.#getName#(#)#+#" doesn't exist"#)#;#}#if#(#src#.#isDirectory#(#)#)#{#throw#new#BuildException#(#"The archive "#+#src#.#getName#(#)#+#" can't be a directory"#)#;#}#ArchiveScanner#as#=#newArchiveScanner#(#)#;#as#.#setErrorOnMissingArchive#(#errorOnMissingArchive#)#;#as#.#setSrc#(#src#)#;#super#.#setDir#(#p#.#getBaseDir#(#)#)#;#setupDirectoryScanner#(#as#,#p#)#;#as#.#init#(#)#;#return#as#;#}##Iterator#iterator#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ResourceCollection#)#(#getRef#(#getProject#(#)#)#)#)#.#iterator#(#)#;#}#if#(#src#==#null#)#{#return#super#.#iterator#(#)#;#}#ArchiveScanner#as#=#(#ArchiveScanner#)#getDirectoryScanner#(#getProject#(#)#)#;#return#as#.#getResourceFiles#(#getProject#(#)#)#;#}##int#size#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ResourceCollection#)#(#getRef#(#getProject#(#)#)#)#)#.#size#(#)#;#}#if#(#src#==#null#)#{#return#super#.#size#(#)#;#}#ArchiveScanner#as#=#(#ArchiveScanner#)#getDirectoryScanner#(#getProject#(#)#)#;#return#as#.#getIncludedFilesCount#(#)#;#}##boolean#isFilesystemOnly#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getCheckedRef#(#)#)#.#isFilesystemOnly#(#)#;#}#dieOnCircularReference#(#)#;#return#src#==#null#;#}##void#setFileMode#(#String#octalString#)#{#checkArchiveAttributesAllowed#(#)#;#integerSetFileMode#(#Integer#.#parseInt#(#octalString#,#BASE_OCTAL#)#)#;#}##void#integerSetFileMode#(#int#mode#)#{#fileModeHasBeenSet#=#true#;#this#.#fileMode#=#UnixStat#.#FILE_FLAG#|#mode#;#}##int#getFileMode#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#p#)#)#.#getFileMode#(#p#)#;#}#dieOnCircularReference#(#)#;#return#fileMode#;#}##boolean#hasFileModeBeenSet#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#getProject#(#)#)#)#.#hasFileModeBeenSet#(#)#;#}#dieOnCircularReference#(#)#;#return#fileModeHasBeenSet#;#}##void#setDirMode#(#String#octalString#)#{#checkArchiveAttributesAllowed#(#)#;#integerSetDirMode#(#Integer#.#parseInt#(#octalString#,#BASE_OCTAL#)#)#;#}##void#integerSetDirMode#(#int#mode#)#{#dirModeHasBeenSet#=#true#;#this#.#dirMode#=#UnixStat#.#DIR_FLAG#|#mode#;#}##int#getDirMode#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#p#)#)#.#getDirMode#(#p#)#;#}#dieOnCircularReference#(#)#;#return#dirMode#;#}##boolean#hasDirModeBeenSet#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#getProject#(#)#)#)#.#hasDirModeBeenSet#(#)#;#}#dieOnCircularReference#(#)#;#return#dirModeHasBeenSet#;#}##void#configureFileSet#(#ArchiveFileSet#zfs#)#{#zfs#.#setPrefix#(#prefix#)#;#zfs#.#setFullpath#(#fullpath#)#;#zfs#.#fileModeHasBeenSet#=#fileModeHasBeenSet#;#zfs#.#fileMode#=#fileMode#;#zfs#.#dirModeHasBeenSet#=#dirModeHasBeenSet#;#zfs#.#dirMode#=#dirMode#;#}##Object#clone#(#)#{#if#(#isReference#(#)#)#{#return#(#(#ArchiveFileSet#)#getRef#(#getProject#(#)#)#)#.#clone#(#)#;#}#return#super#.#clone#(#)#;#}##String#toString#(#)#{#if#(#hasDir#&&#getProject#(#)#!=#null#)#{#return#super#.#toString#(#)#;#}#return#src#==#null#?#null#:#src#.#getName#(#)#;#}##String#getPrefix#(#)#{#return#prefix#;#}##String#getFullpath#(#)#{#return#fullpath#;#}##int#getFileMode#(#)#{#return#fileMode#;#}##int#getDirMode#(#)#{#return#dirMode#;#}##void#checkArchiveAttributesAllowed#(#)#{#if#(#getProject#(#)#==#null#||#(#isReference#(#)#&&#(#getRefid#(#)#.#getReferencedObject#(#getProject#(#)#)#instanceof#ArchiveFileSet#)#)#)#{#checkAttributesAllowed#(#)#;#}#}##void#dieOnCircularReference#(#Stack#stk#,#Project#p#)#throws#BuildException#{#if#(#isChecked#(#)#)#{#return#;#}#// takes care of nested selectors#super#.#dieOnCircularReference#(#stk#,#p#)#;#if#(#!#isReference#(#)#)#{#if#(#src#!=#null#)#{#pushAndInvokeCircularReferenceCheck#(#src#,#stk#,#p#)#;#}#setChecked#(#true#)#;#}#}##