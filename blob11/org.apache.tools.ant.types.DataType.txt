boolean#isReference#(#)#{#return#ref#!=#null#;#}##void#setRefid#(#final#Reference#ref#)#{#this#.#ref#=#ref#;#checked#=#false#;#}##String#getDataTypeName#(#)#{#return#ComponentHelper#.#getElementName#(#getProject#(#)#,#this#,#true#)#;#}##void#dieOnCircularReference#(#)#{#dieOnCircularReference#(#getProject#(#)#)#;#}##void#dieOnCircularReference#(#Project#p#)#{#if#(#checked#||#!#isReference#(#)#)#{#return#;#}#dieOnCircularReference#(#new#IdentityStack#(#this#)#,#p#)#;#}##void#dieOnCircularReference#(#final#Stack#stack#,#final#Project#project#)#throws#BuildException#{#if#(#checked#||#!#isReference#(#)#)#{#return#;#}#Object#o#=#ref#.#getReferencedObject#(#project#)#;#if#(#o#instanceof#DataType#)#{#IdentityStack#id#=#IdentityStack#.#getInstance#(#stack#)#;#if#(#id#.#contains#(#o#)#)#{#throw#circularReference#(#)#;#}#else#{#id#.#push#(#o#)#;#(#(#DataType#)#o#)#.#dieOnCircularReference#(#id#,#project#)#;#id#.#pop#(#)#;#}#}#checked#=#true#;#}##void#invokeCircularReferenceCheck#(#DataType#dt#,#Stack#stk#,#Project#p#)#{#dt#.#dieOnCircularReference#(#stk#,#p#)#;#}##void#pushAndInvokeCircularReferenceCheck#(#DataType#dt#,#Stack#stk#,#Project#p#)#{#stk#.#push#(#dt#)#;#dt#.#dieOnCircularReference#(#stk#,#p#)#;#stk#.#pop#(#)#;#}##Object#getCheckedRef#(#)#{#return#getCheckedRef#(#getProject#(#)#)#;#}##Object#getCheckedRef#(#Project#p#)#{#return#getCheckedRef#(#getClass#(#)#,#getDataTypeName#(#)#,#p#)#;#}##Object#getCheckedRef#(#final#Class#requiredClass#,#final#String#dataTypeName#)#{#return#getCheckedRef#(#requiredClass#,#dataTypeName#,#getProject#(#)#)#;#}##Object#getCheckedRef#(#final#Class#requiredClass#,#final#String#dataTypeName#,#final#Project#project#)#{#if#(#project#==#null#)#{#throw#new#BuildException#(#"No Project specified"#)#;#}#dieOnCircularReference#(#project#)#;#Object#o#=#ref#.#getReferencedObject#(#project#)#;#if#(#!#(#requiredClass#.#isAssignableFrom#(#o#.#getClass#(#)#)#)#)#{#log#(#"Class "#+#o#.#getClass#(#)#+#" is not a subclass of "#+#requiredClass#,#Project#.#MSG_VERBOSE#)#;#String#msg#=#ref#.#getRefId#(#)#+#" doesn\'t denote a "#+#dataTypeName#;#throw#new#BuildException#(#msg#)#;#}#return#o#;#}##BuildException#tooManyAttributes#(#)#{#return#new#BuildException#(#"You must not specify more than one "#+#"attribute when using refid"#)#;#}##BuildException#noChildrenAllowed#(#)#{#return#new#BuildException#(#"You must not specify nested elements "#+#"when using refid"#)#;#}##BuildException#circularReference#(#)#{#return#new#BuildException#(#"This data type contains a circular "#+#"reference."#)#;#}##boolean#isChecked#(#)#{#return#checked#;#}##void#setChecked#(#final#boolean#checked#)#{#this#.#checked#=#checked#;#}##Reference#getRefid#(#)#{#return#ref#;#}##void#checkAttributesAllowed#(#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#}##void#checkChildrenAllowed#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#}##String#toString#(#)#{#String#d#=#getDescription#(#)#;#return#d#==#null#?#getDataTypeName#(#)#:#getDataTypeName#(#)#+#" "#+#d#;#}##Object#clone#(#)#throws#CloneNotSupportedException#{#DataType#dt#=#(#DataType#)#super#.#clone#(#)#;#dt#.#setDescription#(#getDescription#(#)#)#;#if#(#getRefid#(#)#!=#null#)#{#dt#.#setRefid#(#getRefid#(#)#)#;#}#dt#.#setChecked#(#isChecked#(#)#)#;#return#dt#;#}##