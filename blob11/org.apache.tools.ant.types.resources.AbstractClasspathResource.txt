void#setClasspath#(#Path#classpath#)#{#checkAttributesAllowed#(#)#;#if#(#this#.#classpath#==#null#)#{#this#.#classpath#=#classpath#;#}#else#{#this#.#classpath#.#append#(#classpath#)#;#}#setChecked#(#false#)#;#}##Path#createClasspath#(#)#{#checkChildrenAllowed#(#)#;#if#(#classpath#==#null#)#{#classpath#=#new#Path#(#getProject#(#)#)#;#}#setChecked#(#false#)#;#return#classpath#.#createPath#(#)#;#}##void#setClasspathRef#(#Reference#r#)#{#checkAttributesAllowed#(#)#;#createClasspath#(#)#.#setRefid#(#r#)#;#}##Path#getClasspath#(#)#{#if#(#isReference#(#)#)#{#return#(#(#AbstractClasspathResource#)#getCheckedRef#(#)#)#.#getClasspath#(#)#;#}#dieOnCircularReference#(#)#;#return#classpath#;#}##Reference#getLoader#(#)#{#if#(#isReference#(#)#)#{#return#(#(#AbstractClasspathResource#)#getCheckedRef#(#)#)#.#getLoader#(#)#;#}#dieOnCircularReference#(#)#;#return#loader#;#}##void#setLoaderRef#(#Reference#r#)#{#checkAttributesAllowed#(#)#;#loader#=#r#;#}##void#setParentFirst#(#boolean#b#)#{#parentFirst#=#b#;#}##void#setRefid#(#Reference#r#)#{#if#(#loader#!=#null#||#classpath#!=#null#)#{#throw#tooManyAttributes#(#)#;#}#super#.#setRefid#(#r#)#;#}##boolean#isExists#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#isExists#(#)#;#}#dieOnCircularReference#(#)#;#InputStream#is#=#null#;#try#{#is#=#getInputStream#(#)#;#return#is#!=#null#;#}#catch#(#IOException#ex#)#{#return#false#;#}#finally#{#FileUtils#.#close#(#is#)#;#}#}##InputStream#getInputStream#(#)#throws#IOException#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#getInputStream#(#)#;#}#dieOnCircularReference#(#)#;#final#ClassLoaderWithFlag#classLoader#=#getClassLoader#(#)#;#return#!#classLoader#.#needsCleanup#(#)#?#openInputStream#(#classLoader#.#getLoader#(#)#)#:#new#FilterInputStream#(#openInputStream#(#classLoader#.#getLoader#(#)#)#)#{#public#void#close#(#)#throws#IOException#{#FileUtils#.#close#(#in#)#;#classLoader#.#cleanup#(#)#;#}#protected#void#finalize#(#)#throws#Throwable#{#try#{#close#(#)#;#}#finally#{#super#.#finalize#(#)#;#}#}#}#;#}##void#close#(#)#throws#IOException#{#FileUtils#.#close#(#in#)#;#classLoader#.#cleanup#(#)#;#}##void#finalize#(#)#throws#Throwable#{#try#{#close#(#)#;#}#finally#{#super#.#finalize#(#)#;#}#}##ClassLoaderWithFlag#getClassLoader#(#)#{#ClassLoader#cl#=#null#;#boolean#clNeedsCleanup#=#false#;#if#(#loader#!=#null#)#{#cl#=#(#ClassLoader#)#loader#.#getReferencedObject#(#)#;#}#if#(#cl#==#null#)#{#if#(#getClasspath#(#)#!=#null#)#{#Path#p#=#getClasspath#(#)#.#concatSystemClasspath#(#"ignore"#)#;#if#(#parentFirst#)#{#cl#=#getProject#(#)#.#createClassLoader#(#p#)#;#}#else#{#cl#=#AntClassLoader#.#newAntClassLoader#(#getProject#(#)#.#getCoreLoader#(#)#,#getProject#(#)#,#p#,#false#)#;#}#clNeedsCleanup#=#loader#==#null#;#}#else#{#cl#=#JavaResource#.#class#.#getClassLoader#(#)#;#}#if#(#loader#!=#null#&&#cl#!=#null#)#{#getProject#(#)#.#addReference#(#loader#.#getRefId#(#)#,#cl#)#;#}#}#return#new#ClassLoaderWithFlag#(#cl#,#clNeedsCleanup#)#;#}##InputStream#openInputStream#(#ClassLoader#cl#)#throws#IOException#;##void#dieOnCircularReference#(#Stack#stk#,#Project#p#)#{#if#(#isChecked#(#)#)#{#return#;#}#if#(#isReference#(#)#)#{#super#.#dieOnCircularReference#(#stk#,#p#)#;#}#else#{#if#(#classpath#!=#null#)#{#pushAndInvokeCircularReferenceCheck#(#classpath#,#stk#,#p#)#;#}#setChecked#(#true#)#;#}#}##ClassLoader#getLoader#(#)#{#return#loader#;#}##boolean#needsCleanup#(#)#{#return#cleanup#;#}##void#cleanup#(#)#{#if#(#cleanup#)#{#(#(#AntClassLoader#)#loader#)#.#cleanup#(#)#;#}#}##