Collection#getCollection#(#)#{#List#rcs#=#getResourceCollections#(#)#;#int#size#=#rcs#.#size#(#)#;#if#(#size#<#2#)#{#throw#new#BuildException#(#"The intersection of "#+#size#+#" resource collection"#+#(#(#size#==#1#)#?#""#:#"s"#)#+#" is undefined."#)#;#}#ArrayList#al#=#new#ArrayList#(#)#;#Iterator#rc#=#rcs#.#iterator#(#)#;#al#.#addAll#(#collect#(#rc#.#next#(#)#)#)#;#while#(#rc#.#hasNext#(#)#)#{#al#.#retainAll#(#collect#(#rc#.#next#(#)#)#)#;#}#return#al#;#}##ArrayList#collect#(#Object#o#)#{#ArrayList#result#=#new#ArrayList#(#)#;#for#(#Iterator#i#=#(#(#ResourceCollection#)#o#)#.#iterator#(#)#;#i#.#hasNext#(#)#;#)#{#result#.#add#(#i#.#next#(#)#)#;#}#return#result#;#}##