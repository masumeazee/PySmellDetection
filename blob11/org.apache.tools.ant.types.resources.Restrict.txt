Collection#getCollection#(#)#{#ArrayList#result#=#new#ArrayList#(#)#;#outer#:#for#(#Iterator#ri#=#w#.#getResourceCollection#(#)#.#iterator#(#)#;#ri#.#hasNext#(#)#;#)#{#Resource#r#=#(#Resource#)#ri#.#next#(#)#;#for#(#Iterator#i#=#getSelectors#(#)#;#i#.#hasNext#(#)#;#)#{#if#(#!#(#(#ResourceSelector#)#(#i#.#next#(#)#)#)#.#isSelected#(#r#)#)#{#continue#outer#;#}#}#result#.#add#(#r#)#;#}#return#result#;#}##void#add#(#ResourceCollection#c#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#if#(#c#==#null#)#{#return#;#}#w#.#add#(#c#)#;#setChecked#(#false#)#;#}##void#setCache#(#boolean#b#)#{#w#.#setCache#(#b#)#;#}##boolean#isCache#(#)#{#return#w#.#isCache#(#)#;#}##void#add#(#ResourceSelector#s#)#{#if#(#s#==#null#)#{#return#;#}#super#.#add#(#s#)#;#FailFast#.#invalidate#(#this#)#;#}##Iterator#iterator#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Restrict#)#getCheckedRef#(#)#)#.#iterator#(#)#;#}#dieOnCircularReference#(#)#;#return#w#.#iterator#(#)#;#}##int#size#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Restrict#)#getCheckedRef#(#)#)#.#size#(#)#;#}#dieOnCircularReference#(#)#;#return#w#.#size#(#)#;#}##boolean#isFilesystemOnly#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Restrict#)#getCheckedRef#(#)#)#.#isFilesystemOnly#(#)#;#}#dieOnCircularReference#(#)#;#return#w#.#isFilesystemOnly#(#)#;#}##String#toString#(#)#{#if#(#isReference#(#)#)#{#return#getCheckedRef#(#)#.#toString#(#)#;#}#dieOnCircularReference#(#)#;#return#w#.#toString#(#)#;#}##void#dieOnCircularReference#(#Stack#stk#,#Project#p#)#{#if#(#isChecked#(#)#)#{#return#;#}#// takes care of Selectors#super#.#dieOnCircularReference#(#stk#,#p#)#;#if#(#!#isReference#(#)#)#{#pushAndInvokeCircularReferenceCheck#(#w#,#stk#,#p#)#;#setChecked#(#true#)#;#}#}##