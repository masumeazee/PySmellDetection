Collection#getCollection#(#)#{#ResourceCollection#rc#=#getResourceCollection#(#)#;#Iterator#iter#=#rc#.#iterator#(#)#;#if#(#!#(#iter#.#hasNext#(#)#)#)#{#return#Collections#.#EMPTY_SET#;#}#List#result#=#(#List#)#CollectionUtils#.#asCollection#(#iter#)#;#Collections#.#sort#(#result#,#comp#)#;#return#result#;#}##void#add#(#ResourceComparator#c#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#comp#.#add#(#c#)#;#FailFast#.#invalidate#(#this#)#;#setChecked#(#false#)#;#}##void#dieOnCircularReference#(#Stack#stk#,#Project#p#)#throws#BuildException#{#if#(#isChecked#(#)#)#{#return#;#}#// check nested collection#super#.#dieOnCircularReference#(#stk#,#p#)#;#if#(#!#isReference#(#)#)#{#DataType#.#pushAndInvokeCircularReferenceCheck#(#comp#,#stk#,#p#)#;#setChecked#(#true#)#;#}#}##