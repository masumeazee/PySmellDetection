void#setURL#(#URL#u#)#{#checkAttributesAllowed#(#)#;#url#=#u#;#}##void#setFile#(#File#f#)#{#try#{#setURL#(#FILE_UTILS#.#getFileURL#(#f#)#)#;#}#catch#(#MalformedURLException#e#)#{#throw#new#BuildException#(#e#)#;#}#}##void#setBaseURL#(#URL#base#)#{#checkAttributesAllowed#(#)#;#if#(#url#!=#null#)#{#throw#new#BuildException#(#"can't define URL and baseURL attribute"#)#;#}#baseURL#=#base#;#}##void#setRelativePath#(#String#r#)#{#checkAttributesAllowed#(#)#;#if#(#url#!=#null#)#{#throw#new#BuildException#(#"can't define URL and relativePath"#+#" attribute"#)#;#}#relPath#=#r#;#}##URL#getURL#(#)#{#if#(#isReference#(#)#)#{#return#(#(#URLResource#)#getCheckedRef#(#)#)#.#getURL#(#)#;#}#if#(#url#==#null#)#{#if#(#baseURL#!=#null#)#{#if#(#relPath#==#null#)#{#throw#new#BuildException#(#"must provide relativePath"#+#" attribute when using baseURL."#)#;#}#try#{#url#=#new#URL#(#baseURL#,#relPath#)#;#}#catch#(#MalformedURLException#e#)#{#throw#new#BuildException#(#e#)#;#}#}#}#return#url#;#}##void#setRefid#(#Reference#r#)#{#//not using the accessor in this case to avoid side effects#if#(#url#!=#null#||#baseURL#!=#null#||#relPath#!=#null#)#{#throw#tooManyAttributes#(#)#;#}#super#.#setRefid#(#r#)#;#}##String#getName#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#getName#(#)#;#}#String#name#=#getURL#(#)#.#getFile#(#)#;#return#""#.#equals#(#name#)#?#name#:#name#.#substring#(#1#)#;#}##String#toString#(#)#{#return#isReference#(#)#?#getCheckedRef#(#)#.#toString#(#)#:#String#.#valueOf#(#getURL#(#)#)#;#}##boolean#isExists#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#isExists#(#)#;#}#return#isExists#(#false#)#;#}##boolean#isExists#(#boolean#closeConnection#)#{#if#(#getURL#(#)#==#null#)#{#return#false#;#}#try#{#connect#(#)#;#return#true#;#}#catch#(#IOException#e#)#{#return#false#;#}#finally#{#if#(#closeConnection#)#{#close#(#)#;#}#}#}##long#getLastModified#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#getLastModified#(#)#;#}#if#(#!#isExists#(#false#)#)#{#return#0L#;#}#return#conn#.#getLastModified#(#)#;#}##boolean#isDirectory#(#)#{#return#isReference#(#)#?#(#(#Resource#)#getCheckedRef#(#)#)#.#isDirectory#(#)#:#getName#(#)#.#endsWith#(#"/"#)#;#}##long#getSize#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#getSize#(#)#;#}#if#(#!#isExists#(#false#)#)#{#return#0L#;#}#try#{#connect#(#)#;#long#contentlength#=#conn#.#getContentLength#(#)#;#close#(#)#;#return#contentlength#;#}#catch#(#IOException#e#)#{#return#UNKNOWN_SIZE#;#}#}##boolean#equals#(#Object#another#)#{#if#(#this#==#another#)#{#return#true#;#}#if#(#isReference#(#)#)#{#return#getCheckedRef#(#)#.#equals#(#another#)#;#}#if#(#!#(#another#.#getClass#(#)#.#equals#(#getClass#(#)#)#)#)#{#return#false#;#}#URLResource#otheru#=#(#URLResource#)#another#;#return#getURL#(#)#==#null#?#otheru#.#getURL#(#)#==#null#:#getURL#(#)#.#equals#(#otheru#.#getURL#(#)#)#;#}##int#hashCode#(#)#{#if#(#isReference#(#)#)#{#return#getCheckedRef#(#)#.#hashCode#(#)#;#}#return#MAGIC#*#(#(#getURL#(#)#==#null#)#?#NULL_URL#:#getURL#(#)#.#hashCode#(#)#)#;#}##InputStream#getInputStream#(#)#throws#IOException#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#getInputStream#(#)#;#}#connect#(#)#;#try#{#return#conn#.#getInputStream#(#)#;#}#finally#{#conn#=#null#;#}#}##OutputStream#getOutputStream#(#)#throws#IOException#{#if#(#isReference#(#)#)#{#return#(#(#Resource#)#getCheckedRef#(#)#)#.#getOutputStream#(#)#;#}#connect#(#)#;#try#{#return#conn#.#getOutputStream#(#)#;#}#finally#{#conn#=#null#;#}#}##void#connect#(#)#throws#IOException#{#URL#u#=#getURL#(#)#;#if#(#u#==#null#)#{#throw#new#BuildException#(#"URL not set"#)#;#}#if#(#conn#==#null#)#{#try#{#conn#=#u#.#openConnection#(#)#;#conn#.#connect#(#)#;#}#catch#(#IOException#e#)#{#log#(#e#.#toString#(#)#,#Project#.#MSG_ERR#)#;#conn#=#null#;#throw#e#;#}#}#}##void#close#(#)#{#try#{#FileUtils#.#close#(#conn#)#;#}#finally#{#conn#=#null#;#}#}##URL#newURL#(#String#u#)#{#try#{#return#new#URL#(#u#)#;#}#catch#(#MalformedURLException#e#)#{#throw#new#BuildException#(#e#)#;#}#}##