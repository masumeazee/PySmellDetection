Union#getInstance#(#ResourceCollection#rc#)#{#return#rc#instanceof#Union#?#(#Union#)#rc#:#new#Union#(#rc#)#;#}##String#[#]#list#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Union#)#getCheckedRef#(#)#)#.#list#(#)#;#}#Collection#result#=#getCollection#(#true#)#;#return#(#String#[#]#)#(#result#.#toArray#(#new#String#[#result#.#size#(#)#]#)#)#;#}##Resource#[#]#listResources#(#)#{#if#(#isReference#(#)#)#{#return#(#(#Union#)#getCheckedRef#(#)#)#.#listResources#(#)#;#}#Collection#result#=#getCollection#(#)#;#return#(#Resource#[#]#)#(#result#.#toArray#(#new#Resource#[#result#.#size#(#)#]#)#)#;#}##Collection#getCollection#(#)#{#return#getCollection#(#false#)#;#}##Collection#getCollection#(#boolean#asString#)#{#List#rc#=#getResourceCollections#(#)#;#if#(#rc#.#isEmpty#(#)#)#{#return#Collections#.#EMPTY_LIST#;#}#LinkedHashSet#set#=#new#LinkedHashSet#(#rc#.#size#(#)#*#2#)#;#for#(#Iterator#rcIter#=#rc#.#iterator#(#)#;#rcIter#.#hasNext#(#)#;#)#{#for#(#Iterator#r#=#nextRC#(#rcIter#)#.#iterator#(#)#;#r#.#hasNext#(#)#;#)#{#Object#o#=#r#.#next#(#)#;#if#(#asString#)#{#o#=#o#.#toString#(#)#;#}#set#.#add#(#o#)#;#}#}#return#set#;#}##ResourceCollection#nextRC#(#Iterator#i#)#{#return#(#ResourceCollection#)#i#.#next#(#)#;#}##