String#toString#(#)#{#StringBuffer#buf#=#new#StringBuffer#(#"{containsselector text: "#)#;#buf#.#append#(#'"'#)#.#append#(#contains#)#.#append#(#'"'#)#;#buf#.#append#(#" casesensitive: "#)#;#buf#.#append#(#casesensitive#?#"true"#:#"false"#)#;#buf#.#append#(#" ignorewhitespace: "#)#;#buf#.#append#(#ignorewhitespace#?#"true"#:#"false"#)#;#buf#.#append#(#"}"#)#;#return#buf#.#toString#(#)#;#}##void#setText#(#String#contains#)#{#this#.#contains#=#contains#;#}##void#setCasesensitive#(#boolean#casesensitive#)#{#this#.#casesensitive#=#casesensitive#;#}##void#setIgnorewhitespace#(#boolean#ignorewhitespace#)#{#this#.#ignorewhitespace#=#ignorewhitespace#;#}##void#setParameters#(#Parameter#[#]#parameters#)#{#super#.#setParameters#(#parameters#)#;#if#(#parameters#!=#null#)#{#for#(#int#i#=#0#;#i#<#parameters#.#length#;#i#++#)#{#String#paramname#=#parameters#[#i#]#.#getName#(#)#;#if#(#CONTAINS_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setText#(#parameters#[#i#]#.#getValue#(#)#)#;#}#else#if#(#CASE_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setCasesensitive#(#Project#.#toBoolean#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#else#if#(#WHITESPACE_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setIgnorewhitespace#(#Project#.#toBoolean#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#else#{#setError#(#"Invalid parameter "#+#paramname#)#;#}#}#}#}##void#verifySettings#(#)#{#if#(#contains#==#null#)#{#setError#(#"The text attribute is required"#)#;#}#}##boolean#isSelected#(#File#basedir#,#String#filename#,#File#file#)#{#return#isSelected#(#new#FileResource#(#file#)#)#;#}##boolean#isSelected#(#Resource#r#)#{#// throw BuildException on error#validate#(#)#;#if#(#r#.#isDirectory#(#)#||#contains#.#length#(#)#==#0#)#{#return#true#;#}#String#userstr#=#contains#;#if#(#!#casesensitive#)#{#userstr#=#contains#.#toLowerCase#(#)#;#}#if#(#ignorewhitespace#)#{#userstr#=#SelectorUtils#.#removeWhitespace#(#userstr#)#;#}#BufferedReader#in#=#null#;#try#{#in#=#new#BufferedReader#(#new#InputStreamReader#(#r#.#getInputStream#(#)#)#)#;#}#catch#(#Exception#e#)#{#throw#new#BuildException#(#"Could not get InputStream from "#+#r#.#toLongString#(#)#,#e#)#;#}#try#{#String#teststr#=#in#.#readLine#(#)#;#while#(#teststr#!=#null#)#{#if#(#!#casesensitive#)#{#teststr#=#teststr#.#toLowerCase#(#)#;#}#if#(#ignorewhitespace#)#{#teststr#=#SelectorUtils#.#removeWhitespace#(#teststr#)#;#}#if#(#teststr#.#indexOf#(#userstr#)#>#-#1#)#{#return#true#;#}#teststr#=#in#.#readLine#(#)#;#}#return#false#;#}#catch#(#IOException#ioe#)#{#throw#new#BuildException#(#"Could not read "#+#r#.#toLongString#(#)#)#;#}#finally#{#FileUtils#.#close#(#in#)#;#}#}##