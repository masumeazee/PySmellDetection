String#toString#(#)#{#StringBuffer#buf#=#new#StringBuffer#(#"{dateselector date: "#)#;#buf#.#append#(#dateTime#)#;#buf#.#append#(#" compare: "#)#.#append#(#when#.#getValue#(#)#)#;#buf#.#append#(#" granularity: "#)#;#buf#.#append#(#granularity#)#;#if#(#pattern#!=#null#)#{#buf#.#append#(#" pattern: "#)#.#append#(#pattern#)#;#}#buf#.#append#(#"}"#)#;#return#buf#.#toString#(#)#;#}##void#setMillis#(#long#millis#)#{#this#.#millis#=#millis#;#}##long#getMillis#(#)#{#if#(#dateTime#!=#null#)#{#validate#(#)#;#}#return#millis#;#}##void#setDatetime#(#String#dateTime#)#{#this#.#dateTime#=#dateTime#;#millis#=#-#1#;#}##void#setCheckdirs#(#boolean#includeDirs#)#{#this#.#includeDirs#=#includeDirs#;#}##void#setGranularity#(#int#granularity#)#{#this#.#granularity#=#granularity#;#}##void#setWhen#(#TimeComparisons#tcmp#)#{#setWhen#(#(#TimeComparison#)#tcmp#)#;#}##void#setWhen#(#TimeComparison#t#)#{#when#=#t#;#}##void#setPattern#(#String#pattern#)#{#this#.#pattern#=#pattern#;#}##void#setParameters#(#Parameter#[#]#parameters#)#{#super#.#setParameters#(#parameters#)#;#if#(#parameters#!=#null#)#{#for#(#int#i#=#0#;#i#<#parameters#.#length#;#i#++#)#{#String#paramname#=#parameters#[#i#]#.#getName#(#)#;#if#(#MILLIS_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#try#{#setMillis#(#Long#.#parseLong#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#catch#(#NumberFormatException#nfe#)#{#setError#(#"Invalid millisecond setting "#+#parameters#[#i#]#.#getValue#(#)#)#;#}#}#else#if#(#DATETIME_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setDatetime#(#parameters#[#i#]#.#getValue#(#)#)#;#}#else#if#(#CHECKDIRS_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setCheckdirs#(#Project#.#toBoolean#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#else#if#(#GRANULARITY_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#try#{#setGranularity#(#Integer#.#parseInt#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#catch#(#NumberFormatException#nfe#)#{#setError#(#"Invalid granularity setting "#+#parameters#[#i#]#.#getValue#(#)#)#;#}#}#else#if#(#WHEN_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setWhen#(#new#TimeComparison#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#else#if#(#PATTERN_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setPattern#(#parameters#[#i#]#.#getValue#(#)#)#;#}#else#{#setError#(#"Invalid parameter "#+#paramname#)#;#}#}#}#}##void#verifySettings#(#)#{#if#(#dateTime#==#null#&&#millis#<#0#)#{#setError#(#"You must provide a datetime or the number of "#+#"milliseconds."#)#;#}#else#if#(#millis#<#0#&&#dateTime#!=#null#)#{#// check millis and only set it once.#DateFormat#df#=#(#(#pattern#==#null#)#?#DateFormat#.#getDateTimeInstance#(#DateFormat#.#SHORT#,#DateFormat#.#SHORT#,#Locale#.#US#)#:#new#SimpleDateFormat#(#pattern#)#)#;#try#{#setMillis#(#df#.#parse#(#dateTime#)#.#getTime#(#)#)#;#if#(#millis#<#0#)#{#setError#(#"Date of "#+#dateTime#+#" results in negative milliseconds value"#+#" relative to epoch (January 1, 1970, 00:00:00 GMT)."#)#;#}#}#catch#(#ParseException#pe#)#{#setError#(#"Date of "#+#dateTime#+#" Cannot be parsed correctly. It should be in"#+#(#(#pattern#==#null#)#?#" MM/DD/YYYY HH:MM AM_PM"#:#pattern#)#+#" format."#)#;#}#}#}##boolean#isSelected#(#File#basedir#,#String#filename#,#File#file#)#{#validate#(#)#;#return#(#file#.#isDirectory#(#)#&&#!#includeDirs#)#||#when#.#evaluate#(#file#.#lastModified#(#)#,#millis#,#granularity#)#;#}##