String#toString#(#)#{#StringBuffer#buf#=#new#StringBuffer#(#"{filenameselector name: "#)#;#if#(#pattern#!=#null#)#{#buf#.#append#(#pattern#)#;#}#if#(#regex#!=#null#)#{#buf#.#append#(#regex#)#.#append#(#" [as regular expression]"#)#;#}#buf#.#append#(#" negate: "#)#.#append#(#negated#)#;#buf#.#append#(#" casesensitive: "#)#.#append#(#casesensitive#)#;#buf#.#append#(#"}"#)#;#return#buf#.#toString#(#)#;#}##void#setName#(#String#pattern#)#{#pattern#=#pattern#.#replace#(#'/'#,#File#.#separatorChar#)#.#replace#(#'\\'#,#File#.#separatorChar#)#;#if#(#pattern#.#endsWith#(#File#.#separator#)#)#{#pattern#+=#"**"#;#}#this#.#pattern#=#pattern#;#}##void#setRegex#(#String#pattern#)#{#this#.#regex#=#pattern#;#this#.#reg#=#null#;#}##void#setCasesensitive#(#boolean#casesensitive#)#{#this#.#casesensitive#=#casesensitive#;#}##void#setNegate#(#boolean#negated#)#{#this#.#negated#=#negated#;#}##void#setParameters#(#Parameter#[#]#parameters#)#{#super#.#setParameters#(#parameters#)#;#if#(#parameters#!=#null#)#{#for#(#int#i#=#0#;#i#<#parameters#.#length#;#i#++#)#{#String#paramname#=#parameters#[#i#]#.#getName#(#)#;#if#(#NAME_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setName#(#parameters#[#i#]#.#getValue#(#)#)#;#}#else#if#(#CASE_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setCasesensitive#(#Project#.#toBoolean#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#else#if#(#NEGATE_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setNegate#(#Project#.#toBoolean#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#else#if#(#REGEX_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#setRegex#(#parameters#[#i#]#.#getValue#(#)#)#;#}#else#{#setError#(#"Invalid parameter "#+#paramname#)#;#}#}#}#}##void#verifySettings#(#)#{#if#(#pattern#==#null#&&#regex#==#null#)#{#setError#(#"The name or regex attribute is required"#)#;#}#else#if#(#pattern#!=#null#&&#regex#!=#null#)#{#setError#(#"Only one of name and regex attribute is allowed"#)#;#}#}##boolean#isSelected#(#File#basedir#,#String#filename#,#File#file#)#{#validate#(#)#;#if#(#pattern#!=#null#)#{#return#(#SelectorUtils#.#matchPath#(#pattern#,#filename#,#casesensitive#)#==#!#(#negated#)#)#;#}#else#{#if#(#reg#==#null#)#{#reg#=#new#RegularExpression#(#)#;#reg#.#setPattern#(#regex#)#;#expression#=#reg#.#getRegexp#(#getProject#(#)#)#;#}#int#options#=#Regexp#.#MATCH_DEFAULT#;#if#(#!#casesensitive#)#{#options#|=#Regexp#.#MATCH_CASE_INSENSITIVE#;#}#return#expression#.#matches#(#filename#,#options#)#==#!#negated#;#}#}##