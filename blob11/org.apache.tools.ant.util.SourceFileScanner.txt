String#[#]#restrict#(#String#[#]#files#,#File#srcDir#,#File#destDir#,#FileNameMapper#mapper#)#{#return#restrict#(#files#,#srcDir#,#destDir#,#mapper#,#FILE_UTILS#.#getFileTimestampGranularity#(#)#)#;#}##String#[#]#restrict#(#String#[#]#files#,#File#srcDir#,#File#destDir#,#FileNameMapper#mapper#,#long#granularity#)#{#// record destdir for later use in getResource#this#.#destDir#=#destDir#;#Vector#v#=#new#Vector#(#)#;#for#(#int#i#=#0#;#i#<#files#.#length#;#i#++#)#{#final#String#name#=#files#[#i#]#;#v#.#addElement#(#new#FileResource#(#srcDir#,#name#)#{#public#String#getName#(#)#{#return#name#;#}#}#)#;#}#Resource#[#]#sourceresources#=#new#Resource#[#v#.#size#(#)#]#;#v#.#copyInto#(#sourceresources#)#;#// build the list of sources which are out of date with#// respect to the target#Resource#[#]#outofdate#=#ResourceUtils#.#selectOutOfDateSources#(#task#,#sourceresources#,#mapper#,#this#,#granularity#)#;#String#[#]#result#=#new#String#[#outofdate#.#length#]#;#for#(#int#counter#=#0#;#counter#<#outofdate#.#length#;#counter#++#)#{#result#[#counter#]#=#outofdate#[#counter#]#.#getName#(#)#;#}#return#result#;#}##String#getName#(#)#{#return#name#;#}##File#[#]#restrictAsFiles#(#String#[#]#files#,#File#srcDir#,#File#destDir#,#FileNameMapper#mapper#)#{#return#restrictAsFiles#(#files#,#srcDir#,#destDir#,#mapper#,#FILE_UTILS#.#getFileTimestampGranularity#(#)#)#;#}##File#[#]#restrictAsFiles#(#String#[#]#files#,#File#srcDir#,#File#destDir#,#FileNameMapper#mapper#,#long#granularity#)#{#String#[#]#res#=#restrict#(#files#,#srcDir#,#destDir#,#mapper#,#granularity#)#;#File#[#]#result#=#new#File#[#res#.#length#]#;#for#(#int#i#=#0#;#i#<#res#.#length#;#i#++#)#{#result#[#i#]#=#new#File#(#srcDir#,#res#[#i#]#)#;#}#return#result#;#}##Resource#getResource#(#String#name#)#{#return#new#FileResource#(#destDir#,#name#)#;#}##