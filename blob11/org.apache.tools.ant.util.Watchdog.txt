void#addTimeoutObserver#(#TimeoutObserver#to#)#{#//no need to synchronize, as Vector is always synchronized#observers#.#addElement#(#to#)#;#}##void#removeTimeoutObserver#(#TimeoutObserver#to#)#{#//no need to synchronize, as Vector is always synchronized#observers#.#removeElement#(#to#)#;#}##void#fireTimeoutOccured#(#)#{#Enumeration#e#=#observers#.#elements#(#)#;#while#(#e#.#hasMoreElements#(#)#)#{#(#(#TimeoutObserver#)#e#.#nextElement#(#)#)#.#timeoutOccured#(#this#)#;#}#}##void#start#(#)#{#stopped#=#false#;#Thread#t#=#new#Thread#(#this#,#"WATCHDOG"#)#;#t#.#setDaemon#(#true#)#;#t#.#start#(#)#;#}##void#stop#(#)#{#stopped#=#true#;#notifyAll#(#)#;#}##void#run#(#)#{#long#now#=#System#.#currentTimeMillis#(#)#;#final#long#until#=#now#+#timeout#;#try#{#while#(#!#stopped#&&#until#>#now#)#{#wait#(#until#-#now#)#;#now#=#System#.#currentTimeMillis#(#)#;#}#}#catch#(#InterruptedException#e#)#{#// Ignore exception#}#if#(#!#stopped#)#{#fireTimeoutOccured#(#)#;#}#}##