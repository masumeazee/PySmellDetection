void#register#(#Task#task#,#final#Ivy#ivy#)#{#AntMessageLogger#logger#=#new#AntMessageLogger#(#task#)#;#ivy#.#getLoggerEngine#(#)#.#pushLogger#(#logger#)#;#task#.#getProject#(#)#.#addBuildListener#(#new#BuildListener#(#)#{#private#int#stackDepth#=#0#;#public#void#buildFinished#(#BuildEvent#event#)#{#}#public#void#buildStarted#(#BuildEvent#event#)#{#}#public#void#targetStarted#(#BuildEvent#event#)#{#}#public#void#targetFinished#(#BuildEvent#event#)#{#}#public#void#taskStarted#(#BuildEvent#event#)#{#stackDepth#++#;#}#public#void#taskFinished#(#BuildEvent#event#)#{#// NB: There is somtimes task created by an other task#// in that case, we should not uninit Message. The log should stay associated#// with the initial task, except if it was an antcall, ant or subant target#// NB2 : Testing the identity of the task is not enought, event.getTask() return#// an instance of UnknownElement is wrapping the concrete instance#stackDepth#--#;#if#(#stackDepth#==#0#)#{#ivy#.#getLoggerEngine#(#)#.#popLogger#(#)#;#event#.#getProject#(#)#.#removeBuildListener#(#this#)#;#}#}#public#void#messageLogged#(#BuildEvent#event#)#{#}#}#)#;#}##void#buildFinished#(#BuildEvent#event#)#{#}##void#buildStarted#(#BuildEvent#event#)#{#}##void#targetStarted#(#BuildEvent#event#)#{#}##void#targetFinished#(#BuildEvent#event#)#{#}##void#taskStarted#(#BuildEvent#event#)#{#stackDepth#++#;#}##void#taskFinished#(#BuildEvent#event#)#{#// NB: There is somtimes task created by an other task#// in that case, we should not uninit Message. The log should stay associated#// with the initial task, except if it was an antcall, ant or subant target#// NB2 : Testing the identity of the task is not enought, event.getTask() return#// an instance of UnknownElement is wrapping the concrete instance#stackDepth#--#;#if#(#stackDepth#==#0#)#{#ivy#.#getLoggerEngine#(#)#.#popLogger#(#)#;#event#.#getProject#(#)#.#removeBuildListener#(#this#)#;#}#}##void#messageLogged#(#BuildEvent#event#)#{#}##void#log#(#String#msg#,#int#level#)#{#projectComponent#.#log#(#msg#,#level#)#;#}##void#rawlog#(#String#msg#,#int#level#)#{#projectComponent#.#getProject#(#)#.#log#(#msg#,#level#)#;#}##void#doProgress#(#)#{#buf#.#append#(#"."#)#;#if#(#lastProgressFlush#==#0#)#{#lastProgressFlush#=#System#.#currentTimeMillis#(#)#;#}#// log with ant causes a new line -> we do it only once in a while#if#(#System#.#currentTimeMillis#(#)#-#lastProgressFlush#>#PROGRESS_LOG_PERIOD#)#{#projectComponent#.#log#(#buf#.#toString#(#)#)#;#buf#.#setLength#(#0#)#;#lastProgressFlush#=#System#.#currentTimeMillis#(#)#;#}#}##void#doEndProgress#(#String#msg#)#{#projectComponent#.#log#(#buf#+#msg#)#;#buf#.#setLength#(#0#)#;#lastProgressFlush#=#0#;#}##String#toString#(#)#{#return#"AntMessageLogger:"#+#projectComponent#;#}##