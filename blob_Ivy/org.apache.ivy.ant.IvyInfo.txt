File#getFile#(#)#{#return#file#;#}##void#setFile#(#File#file#)#{#this#.#file#=#file#;#}##String#getModule#(#)#{#return#module#;#}##void#setModule#(#String#module#)#{#this#.#module#=#module#;#}##String#getOrganisation#(#)#{#return#organisation#;#}##void#setOrganisation#(#String#organisation#)#{#this#.#organisation#=#organisation#;#}##String#getRevision#(#)#{#return#revision#;#}##void#setRevision#(#String#revision#)#{#this#.#revision#=#revision#;#}##String#getBranch#(#)#{#return#branch#;#}##void#setBranch#(#String#branch#)#{#this#.#branch#=#branch#;#}##String#getProperty#(#)#{#return#property#;#}##void#setProperty#(#String#prefix#)#{#this#.#property#=#prefix#;#}##void#doExecute#(#)#throws#BuildException#{#Ivy#ivy#=#getIvyInstance#(#)#;#IvySettings#settings#=#ivy#.#getSettings#(#)#;#try#{#if#(#organisation#!=#null#||#module#!=#null#||#revision#!=#null#||#branch#!=#null#)#{#if#(#organisation#==#null#)#{#throw#new#BuildException#(#"no organisation provided for ivy info task"#)#;#}#if#(#module#==#null#)#{#throw#new#BuildException#(#"no module name provided for ivy info task"#)#;#}#if#(#revision#==#null#)#{#throw#new#BuildException#(#"no revision provided for ivy info task"#)#;#}#if#(#branch#==#null#)#{#settings#.#getDefaultBranch#(#new#ModuleId#(#organisation#,#module#)#)#;#}#ResolvedModuleRevision#rmr#=#ivy#.#findModule#(#ModuleRevisionId#.#newInstance#(#organisation#,#module#,#branch#,#revision#)#)#;#if#(#rmr#!=#null#)#{#ModuleDescriptor#md#=#rmr#.#getDescriptor#(#)#;#ModuleRevisionId#mrid#=#rmr#.#getId#(#)#;#setProperties#(#md#,#mrid#)#;#}#}#else#{#if#(#file#==#null#)#{#file#=#getProject#(#)#.#resolveFile#(#getProperty#(#settings#,#"ivy.dep.file"#)#)#;#}#ModuleDescriptor#md#=#ModuleDescriptorParserRegistry#.#getInstance#(#)#.#parseDescriptor#(#settings#,#file#.#toURI#(#)#.#toURL#(#)#,#doValidate#(#settings#)#)#;#ModuleRevisionId#mrid#=#md#.#getModuleRevisionId#(#)#;#setProperties#(#md#,#mrid#)#;#}#}#catch#(#MalformedURLException#e#)#{#throw#new#BuildException#(#"unable to convert given ivy file to url: "#+#file#+#": "#+#e#,#e#)#;#}#catch#(#ParseException#e#)#{#log#(#e#.#getMessage#(#)#,#Project#.#MSG_ERR#)#;#throw#new#BuildException#(#"syntax errors in ivy file: "#+#e#,#e#)#;#}#catch#(#Exception#e#)#{#throw#new#BuildException#(#"impossible to resolve dependencies: "#+#e#,#e#)#;#}#}##void#setProperties#(#ModuleDescriptor#md#,#ModuleRevisionId#mrid#)#{#getProject#(#)#.#setProperty#(#property#+#".organisation"#,#mrid#.#getOrganisation#(#)#)#;#getProject#(#)#.#setProperty#(#property#+#".module"#,#mrid#.#getName#(#)#)#;#if#(#mrid#.#getBranch#(#)#!=#null#)#{#getProject#(#)#.#setProperty#(#property#+#".branch"#,#mrid#.#getBranch#(#)#)#;#}#getProject#(#)#.#setProperty#(#property#+#".revision"#,#mrid#.#getRevision#(#)#)#;#getProject#(#)#.#setProperty#(#property#+#".status"#,#md#.#getStatus#(#)#)#;#Map#extra#=#mrid#.#getExtraAttributes#(#)#;#for#(#Iterator#iter#=#extra#.#entrySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#Entry#entry#=#(#Entry#)#iter#.#next#(#)#;#getProject#(#)#.#setProperty#(#property#+#".extra."#+#entry#.#getKey#(#)#,#(#String#)#entry#.#getValue#(#)#)#;#}#getProject#(#)#.#setProperty#(#property#+#".configurations"#,#mergeConfs#(#md#.#getConfigurationsNames#(#)#)#)#;#// store the public configurations in a separate property#Configuration#[#]#configs#=#md#.#getConfigurations#(#)#;#List#publicConfigsList#=#new#ArrayList#(#)#;#for#(#int#i#=#0#;#i#<#configs#.#length#;#i#++#)#{#if#(#Visibility#.#PUBLIC#.#equals#(#configs#[#i#]#.#getVisibility#(#)#)#)#{#publicConfigsList#.#add#(#configs#[#i#]#.#getName#(#)#)#;#}#}#String#[#]#publicConfigs#=#(#String#[#]#)#publicConfigsList#.#toArray#(#new#String#[#publicConfigsList#.#size#(#)#]#)#;#getProject#(#)#.#setProperty#(#property#+#".public.configurations"#,#mergeConfs#(#publicConfigs#)#)#;#}##