File#getFile#(#)#{#return#file#;#}##void#setFile#(#File#aFile#)#{#file#=#aFile#;#}##String#getName#(#)#{#return#name#;#}##void#setName#(#String#aName#)#{#name#=#aName#;#}##String#getPrefix#(#)#{#return#prefix#;#}##void#setPrefix#(#String#aPrefix#)#{#prefix#=#aPrefix#;#}##String#getUrl#(#)#{#return#url#;#}##void#setUrl#(#String#aUrl#)#{#url#=#aUrl#;#}##String#getValue#(#)#{#return#value#;#}##void#setValue#(#String#aValue#)#{#value#=#aValue#;#}##void#doExecute#(#)#throws#BuildException#{#Ivy#ivy#=#getIvyInstance#(#)#;#IvySettings#settings#=#ivy#.#getSettings#(#)#;#if#(#getName#(#)#!=#null#)#{#settings#.#setVariable#(#getVarName#(#getName#(#)#)#,#getValue#(#)#)#;#}#else#{#Properties#props#=#new#Properties#(#)#;#InputStream#is#=#null#;#try#{#if#(#getFile#(#)#!=#null#)#{#is#=#new#FileInputStream#(#getFile#(#)#)#;#}#else#if#(#getUrl#(#)#!=#null#)#{#is#=#new#URL#(#getUrl#(#)#)#.#openStream#(#)#;#}#else#{#throw#new#BuildException#(#"specify either name or file or url to ivy var task"#)#;#}#props#.#load#(#is#)#;#}#catch#(#Exception#ex#)#{#throw#new#BuildException#(#"impossible to load variables from file: "#+#ex#,#ex#)#;#}#finally#{#if#(#is#!=#null#)#{#try#{#is#.#close#(#)#;#}#catch#(#Exception#e#)#{#//ignore#}#}#}#for#(#Iterator#iter#=#props#.#keySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#String#name#=#(#String#)#iter#.#next#(#)#;#String#value#=#(#String#)#props#.#get#(#name#)#;#settings#.#setVariable#(#getVarName#(#name#)#,#value#)#;#}#}#}##String#getVarName#(#String#name#)#{#String#prefix#=#getPrefix#(#)#;#if#(#prefix#!=#null#)#{#if#(#prefix#.#endsWith#(#"."#)#)#{#return#prefix#+#name#;#}#else#{#return#prefix#+#"."#+#name#;#}#}#return#name#;#}##