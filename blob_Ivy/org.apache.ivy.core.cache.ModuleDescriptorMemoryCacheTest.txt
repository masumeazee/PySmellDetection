void#testUseModuleDescriptorProviderWhenModuleNotCached#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#)#;#providerMock#.#assertCalled#(#)#;#}##void#testCacheResultOfModuleDescriptorProvider#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#null#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock2#)#)#;#}##void#testValidationClearInvalidatedCache#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#new#ModuleDescriptorProviderMock#(#md1#)#;#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#true#,#providerMock2#)#)#;#providerMock2#.#assertCalled#(#)#;#}##void#testValidationDontClearvalidatedCache#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#null#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#true#,#providerMock#)#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock2#)#)#;#}##void#testSizeIsLimitied#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock1b#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#new#ModuleDescriptorProviderMock#(#md2#)#;#ModuleDescriptorProviderMock#providerMock3#=#new#ModuleDescriptorProviderMock#(#md3#)#;#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#;#cache#.#get#(#url2#,#ivySettings#,#false#,#providerMock2#)#;#cache#.#get#(#url3#,#ivySettings#,#false#,#providerMock3#)#;#//adding 1#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock1b#)#;#//and one has been removed#providerMock1b#.#assertCalled#(#)#;#}##void#testLastRecentlyUsedIsFlushedWhenSizeExceed#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#new#ModuleDescriptorProviderMock#(#md2#)#;#ModuleDescriptorProviderMock#providerMock2b#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock3#=#new#ModuleDescriptorProviderMock#(#md3#)#;#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#;#cache#.#get#(#url2#,#ivySettings#,#false#,#providerMock2#)#;#cache#.#get#(#url1#,#ivySettings#,#false#,#null#)#;#cache#.#get#(#url3#,#ivySettings#,#false#,#providerMock3#)#;#cache#.#get#(#url1#,#ivySettings#,#false#,#null#)#;#//and one has been removed#cache#.#get#(#url2#,#ivySettings#,#false#,#providerMock2b#)#;#providerMock2b#.#assertCalled#(#)#;#}##void#testVariableChangeInvalidateEntry#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#new#ModuleDescriptorProviderMock#(#md1#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings2#,#false#,#providerMock#)#)#;#ivySettings2#.#getVariables#(#)#.#setVariable#(#"val"#,#"changedVal"#,#true#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings2#,#false#,#providerMock2#)#)#;#providerMock2#.#assertCalled#(#)#;#}##void#testGetStaleDontReadFromCache#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#new#ModuleDescriptorProviderMock#(#md2#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#)#;#assertEquals#(#md2#,#cache#.#getStale#(#url1#,#ivySettings#,#false#,#providerMock2#)#)#;#providerMock2#.#assertCalled#(#)#;#}##void#testGetStaleStoreResultInCache#(#)#throws#ParseException#,#IOException#{#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#null#;#assertEquals#(#md1#,#cache#.#getStale#(#url1#,#ivySettings#,#false#,#providerMock#)#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock2#)#)#;#}##void#testASizeOf0MeansNoCache#(#)#throws#ParseException#,#IOException#{#cache#=#new#ModuleDescriptorMemoryCache#(#0#)#;#ModuleDescriptorProviderMock#providerMock#=#new#ModuleDescriptorProviderMock#(#md1#)#;#ModuleDescriptorProviderMock#providerMock2#=#new#ModuleDescriptorProviderMock#(#md1#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock#)#)#;#assertEquals#(#md1#,#cache#.#get#(#url1#,#ivySettings#,#false#,#providerMock2#)#)#;#providerMock2#.#assertCalled#(#)#;#}##ModuleDescriptor#provideModule#(#ParserSettings#ivySettings#,#File#descriptorFile#,#boolean#validate#)#{#if#(#ivySettings#!=#null#)#ivySettings#.#substitute#(#"${val}"#)#;#called#=#true#;#return#result#;#}##void#assertCalled#(#)#{#Assert#.#assertTrue#(#called#)#;#}##