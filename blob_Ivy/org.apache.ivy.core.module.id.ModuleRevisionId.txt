ModuleRevisionId#parse#(#String#mrid#)#{#Matcher#m#=#MRID_PATTERN#.#matcher#(#mrid#.#trim#(#)#)#;#if#(#!#m#.#matches#(#)#)#{#throw#new#IllegalArgumentException#(#"module revision text representation do not match expected pattern."#+#" given mrid='"#+#mrid#+#"' expected form="#+#MRID_PATTERN#.#pattern#(#)#)#;#}#//CheckStyle:MagicNumber| OFF#return#newInstance#(#m#.#group#(#1#)#,#m#.#group#(#2#)#,#m#.#group#(#3#)#,#m#.#group#(#4#)#)#;#//CheckStyle:MagicNumber| ON#}##ModuleRevisionId#newInstance#(#String#organisation#,#String#name#,#String#revision#)#{#return#intern#(#new#ModuleRevisionId#(#ModuleId#.#newInstance#(#organisation#,#name#)#,#revision#)#)#;#}##ModuleRevisionId#newInstance#(#String#organisation#,#String#name#,#String#revision#,#Map#extraAttributes#)#{#return#intern#(#new#ModuleRevisionId#(#ModuleId#.#newInstance#(#organisation#,#name#)#,#revision#,#extraAttributes#)#)#;#}##ModuleRevisionId#newInstance#(#String#organisation#,#String#name#,#String#branch#,#String#revision#)#{#return#intern#(#new#ModuleRevisionId#(#ModuleId#.#newInstance#(#organisation#,#name#)#,#branch#,#revision#)#)#;#}##ModuleRevisionId#newInstance#(#String#organisation#,#String#name#,#String#branch#,#String#revision#,#Map#extraAttributes#)#{#return#intern#(#new#ModuleRevisionId#(#ModuleId#.#newInstance#(#organisation#,#name#)#,#branch#,#revision#,#extraAttributes#)#)#;#}##ModuleRevisionId#newInstance#(#String#organisation#,#String#name#,#String#branch#,#String#revision#,#Map#extraAttributes#,#boolean#replaceNullBranchWithDefault#)#{#return#intern#(#new#ModuleRevisionId#(#ModuleId#.#newInstance#(#organisation#,#name#)#,#branch#,#revision#,#extraAttributes#,#replaceNullBranchWithDefault#)#)#;#}##ModuleRevisionId#newInstance#(#ModuleRevisionId#mrid#,#String#rev#)#{#return#intern#(#new#ModuleRevisionId#(#mrid#.#getModuleId#(#)#,#mrid#.#getBranch#(#)#,#rev#,#mrid#.#getQualifiedExtraAttributes#(#)#)#)#;#}##ModuleRevisionId#newInstance#(#ModuleRevisionId#mrid#,#String#branch#,#String#rev#)#{#return#intern#(#new#ModuleRevisionId#(#mrid#.#getModuleId#(#)#,#branch#,#rev#,#mrid#.#getQualifiedExtraAttributes#(#)#)#)#;#}##ModuleRevisionId#intern#(#ModuleRevisionId#moduleRevisionId#)#{#ModuleRevisionId#r#=#null#;#synchronized#(#CACHE#)#{#WeakReference#ref#=#(#WeakReference#)#CACHE#.#get#(#moduleRevisionId#)#;#if#(#ref#!=#null#)#{#r#=#(#ModuleRevisionId#)#ref#.#get#(#)#;#}#if#(#r#==#null#)#{#r#=#moduleRevisionId#;#CACHE#.#put#(#r#,#new#WeakReference#(#r#)#)#;#}#}#return#r#;#}##ModuleId#getModuleId#(#)#{#return#moduleId#;#}##String#getName#(#)#{#return#getModuleId#(#)#.#getName#(#)#;#}##String#getOrganisation#(#)#{#return#getModuleId#(#)#.#getOrganisation#(#)#;#}##String#getRevision#(#)#{#return#revision#;#}##boolean#equals#(#Object#obj#)#{#if#(#!#(#obj#instanceof#ModuleRevisionId#)#)#{#return#false#;#}#ModuleRevisionId#other#=#(#ModuleRevisionId#)#obj#;#if#(#!#other#.#getRevision#(#)#.#equals#(#getRevision#(#)#)#)#{#return#false#;#}#else#if#(#other#.#getBranch#(#)#==#null#&&#getBranch#(#)#!=#null#)#{#return#false#;#}#else#if#(#other#.#getBranch#(#)#!=#null#&&#!#other#.#getBranch#(#)#.#equals#(#getBranch#(#)#)#)#{#return#false#;#}#else#if#(#!#other#.#getModuleId#(#)#.#equals#(#getModuleId#(#)#)#)#{#return#false#;#}#else#{#return#other#.#getQualifiedExtraAttributes#(#)#.#equals#(#getQualifiedExtraAttributes#(#)#)#;#}#}##int#hashCode#(#)#{#if#(#hash#==#0#)#{#//CheckStyle:MagicNumber| OFF#hash#=#31#;#hash#=#hash#*#13#+#(#getBranch#(#)#==#null#?#0#:#getBranch#(#)#.#hashCode#(#)#)#;#hash#=#hash#*#13#+#getRevision#(#)#.#hashCode#(#)#;#hash#=#hash#*#13#+#getModuleId#(#)#.#hashCode#(#)#;#hash#=#hash#*#13#+#getQualifiedExtraAttributes#(#)#.#hashCode#(#)#;#//CheckStyle:MagicNumber| ON#}#return#hash#;#}##String#toString#(#)#{#return#moduleId#+#(#branch#==#null#||#branch#.#length#(#)#==#0#?#""#:#"#"#+#branch#)#+#";"#+#(#revision#==#null#?#"NONE"#:#revision#)#;#}##String#encodeToString#(#)#{#StringBuffer#buf#=#new#StringBuffer#(#)#;#Map#attributes#=#getAttributes#(#)#;#for#(#Iterator#iter#=#attributes#.#keySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#String#attName#=#(#String#)#iter#.#next#(#)#;#String#value#=#(#String#)#attributes#.#get#(#attName#)#;#value#=#value#==#null#?#NULL_ENCODE#:#value#;#buf#.#append#(#ENCODE_PREFIX#)#.#append#(#attName#)#.#append#(#ENCODE_SEPARATOR#)#.#append#(#ENCODE_PREFIX#)#.#append#(#value#)#.#append#(#ENCODE_SEPARATOR#)#;#}#return#buf#.#toString#(#)#;#}##ModuleRevisionId#decode#(#String#encoded#)#{#String#[#]#parts#=#encoded#.#split#(#ENCODE_SEPARATOR#)#;#if#(#parts#.#length#%#2#!=#0#)#{#throw#new#IllegalArgumentException#(#"badly encoded module revision id: '"#+#encoded#+#"'"#)#;#}#Map#attributes#=#new#HashMap#(#)#;#for#(#int#i#=#0#;#i#<#parts#.#length#;#i#+=#2#)#{#String#attName#=#parts#[#i#]#;#if#(#!#attName#.#startsWith#(#ENCODE_PREFIX#)#)#{#throw#new#IllegalArgumentException#(#"badly encoded module revision id: '"#+#encoded#+#"': "#+#attName#+#" doesn't start with "#+#ENCODE_PREFIX#)#;#}#else#{#attName#=#attName#.#substring#(#1#)#;#}#String#attValue#=#parts#[#i#+#1#]#;#if#(#!#attValue#.#startsWith#(#ENCODE_PREFIX#)#)#{#throw#new#IllegalArgumentException#(#"badly encoded module revision id: '"#+#encoded#+#"': "#+#attValue#+#" doesn't start with "#+#ENCODE_PREFIX#)#;#}#else#{#attValue#=#attValue#.#substring#(#1#)#;#}#if#(#NULL_ENCODE#.#equals#(#attValue#)#)#{#attValue#=#null#;#}#attributes#.#put#(#attName#,#attValue#)#;#}#String#org#=#(#String#)#attributes#.#remove#(#IvyPatternHelper#.#ORGANISATION_KEY#)#;#String#mod#=#(#String#)#attributes#.#remove#(#IvyPatternHelper#.#MODULE_KEY#)#;#String#rev#=#(#String#)#attributes#.#remove#(#IvyPatternHelper#.#REVISION_KEY#)#;#String#branch#=#(#String#)#attributes#.#remove#(#IvyPatternHelper#.#BRANCH_KEY#)#;#if#(#org#==#null#)#{#throw#new#IllegalArgumentException#(#"badly encoded module revision id: '"#+#encoded#+#"': no organisation"#)#;#}#if#(#mod#==#null#)#{#throw#new#IllegalArgumentException#(#"badly encoded module revision id: '"#+#encoded#+#"': no module name"#)#;#}#if#(#rev#==#null#)#{#throw#new#IllegalArgumentException#(#"badly encoded module revision id: '"#+#encoded#+#"': no revision"#)#;#}#return#newInstance#(#org#,#mod#,#branch#,#rev#,#attributes#)#;#}##String#getBranch#(#)#{#return#branch#;#}##