void#defineRule#(#MapMatcher#condition#,#Object#rule#)#{#Checks#.#checkNotNull#(#condition#,#"condition"#)#;#Checks#.#checkNotNull#(#rule#,#"rule"#)#;#rules#.#put#(#condition#,#rule#)#;#}##Object#getRule#(#ModuleId#mid#)#{#return#getRule#(#mid#,#NoFilter#.#INSTANCE#)#;#}##Object#[#]#getRules#(#ModuleId#mid#)#{#return#getRules#(#mid#.#getAttributes#(#)#,#NoFilter#.#INSTANCE#)#;#}##Object#getRule#(#ModuleRevisionId#mrid#)#{#return#getRule#(#mrid#,#NoFilter#.#INSTANCE#)#;#}##Object#getRule#(#ModuleId#mid#,#Filter#filter#)#{#Checks#.#checkNotNull#(#mid#,#"mid"#)#;#return#getRule#(#mid#.#getAttributes#(#)#,#filter#)#;#}##Object#getRule#(#ModuleRevisionId#mrid#,#Filter#filter#)#{#Checks#.#checkNotNull#(#mrid#,#"mrid"#)#;#Checks#.#checkNotNull#(#filter#,#"filter"#)#;#Map#moduleAttributes#=#mrid#.#getAttributes#(#)#;#return#getRule#(#moduleAttributes#,#filter#)#;#}##Object#getRule#(#Map#moduleAttributes#,#Filter#filter#)#{#for#(#Iterator#iter#=#rules#.#entrySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#Map#.#Entry#ruleEntry#=#(#Entry#)#iter#.#next#(#)#;#MapMatcher#midm#=#(#MapMatcher#)#ruleEntry#.#getKey#(#)#;#if#(#midm#.#matches#(#moduleAttributes#)#)#{#Object#rule#=#ruleEntry#.#getValue#(#)#;#if#(#filter#.#accept#(#rule#)#)#{#return#rule#;#}#}#}#return#null#;#}##Object#[#]#getRules#(#ModuleRevisionId#mrid#,#Filter#filter#)#{#Checks#.#checkNotNull#(#mrid#,#"mrid"#)#;#Checks#.#checkNotNull#(#filter#,#"filter"#)#;#Map#moduleAttributes#=#mrid#.#getAttributes#(#)#;#return#getRules#(#moduleAttributes#,#filter#)#;#}##Object#[#]#getRules#(#Map#moduleAttributes#,#Filter#filter#)#{#List#matchingRules#=#new#ArrayList#(#)#;#for#(#Iterator#iter#=#rules#.#entrySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#Map#.#Entry#ruleEntry#=#(#Entry#)#iter#.#next#(#)#;#MapMatcher#midm#=#(#MapMatcher#)#ruleEntry#.#getKey#(#)#;#if#(#midm#.#matches#(#moduleAttributes#)#)#{#Object#rule#=#ruleEntry#.#getValue#(#)#;#if#(#filter#.#accept#(#rule#)#)#{#matchingRules#.#add#(#rule#)#;#}#}#}#return#matchingRules#.#toArray#(#)#;#}##void#dump#(#String#prefix#)#{#if#(#rules#.#isEmpty#(#)#)#{#Message#.#debug#(#prefix#+#"NONE"#)#;#}#else#{#for#(#Iterator#iter#=#rules#.#keySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#MapMatcher#midm#=#(#MapMatcher#)#iter#.#next#(#)#;#Object#rule#=#rules#.#get#(#midm#)#;#Message#.#debug#(#prefix#+#midm#+#" -> "#+#rule#)#;#}#}#}##Map#/*<MapMatcher,Object>*/#getAllRules#(#)#{#return#Collections#.#unmodifiableMap#(#rules#)#;#}##Object#clone#(#)#{#return#new#ModuleRules#(#rules#)#;#}##