void#addToModulesByModuleId#(#ModuleDescriptor#md#,#ModuleInSort#mdInSort#)#{#ModuleId#mdId#=#md#.#getModuleRevisionId#(#)#.#getModuleId#(#)#;#List#mdInSortAsList#=#new#LinkedList#(#)#;#mdInSortAsList#.#add#(#mdInSort#)#;#List#previousList#=#(#List#)#modulesByModuleId#.#put#(#mdId#,#mdInSortAsList#)#;#if#(#previousList#!=#null#)#{#mdInSortAsList#.#addAll#(#previousList#)#;#}#}##Iterator#iterator#(#)#{#return#moduleDescriptors#.#iterator#(#)#;#}##int#size#(#)#{#return#moduleDescriptors#.#size#(#)#;#}##ModuleInSort#getModuleDescriptorDependency#(#DependencyDescriptor#descriptor#)#{#Collection#modulesOfSameId#=#(#Collection#)#modulesByModuleId#.#get#(#descriptor#.#getDependencyId#(#)#)#;#if#(#modulesOfSameId#==#null#)#{#return#null#;#}#for#(#Iterator#it#=#modulesOfSameId#.#iterator#(#)#;#it#.#hasNext#(#)#;#)#{#ModuleInSort#mdInSort#=#(#ModuleInSort#)#it#.#next#(#)#;#if#(#mdInSort#.#match#(#descriptor#,#versionMatcher#)#)#{#return#mdInSort#;#}#else#{#nonMatchingVersionReporter#.#reportNonMatchingVersion#(#descriptor#,#mdInSort#.#getSortedModuleDescriptor#(#)#)#;#}#}#return#null#;#}##