void#setUp#(#)#throws#Exception#{#fixture#=#new#TestFixture#(#)#;#LatestCompatibleConflictManager#cm#=#new#LatestCompatibleConflictManager#(#)#;#fixture#.#getSettings#(#)#.#addConfigured#(#cm#)#;#fixture#.#getSettings#(#)#.#setDefaultConflictManager#(#cm#)#;#}##void#tearDown#(#)#throws#Exception#{#fixture#.#clean#(#)#;#}##void#testInitFromSettings#(#)#throws#Exception#{#Ivy#ivy#=#new#Ivy#(#)#;#ivy#.#configure#(#LatestCompatibleConflictManagerTest#.#class#.#getResource#(#"ivysettings-latest-compatible.xml"#)#)#;#ConflictManager#cm#=#ivy#.#getSettings#(#)#.#getDefaultConflictManager#(#)#;#assertTrue#(#cm#instanceof#LatestCompatibleConflictManager#)#;#}##void#testCompatibilityResolve1#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;1-> { #B;1.4 #C;[2.0,2.5] }"#)#.#addMD#(#"#B;1.4->#D;1.5"#)#.#addMD#(#"#C;2.5->#D;[1.0,1.6]"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#init#(#)#;#resolveAndAssert#(#"#A;1"#,#"#B;1.4, #C;2.5, #D;1.5"#)#;#}##void#testCompatibilityResolve2#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;2-> { #B;[1.0,1.5] #C;[2.0,2.5] }"#)#.#addMD#(#"#B;1.4->#D;1.5"#)#.#addMD#(#"#B;1.5->#D;2.0"#)#.#addMD#(#"#C;2.5->#D;[1.0,1.6]"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#addMD#(#"#D;2.0"#)#.#init#(#)#;#resolveAndAssert#(#"#A;2"#,#"#B;1.4, #C;2.5, #D;1.5"#)#;#}##void#testCompatibilityResolve3#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;3-> { #B;[2.0,2.5] #C;[3.0,3.5] }"#)#.#addMD#(#"#B;2.3-> { #D;1.5 #E;1.0 }"#)#.#addMD#(#"#B;2.4-> { #D;1.5 #E;2.0 }"#)#.#addMD#(#"#B;2.5-> { #D;2.0 }"#)#.#addMD#(#"#C;3.4-> { #D;[1.0,1.6] #E;1.0 }"#)#.#addMD#(#"#C;3.5-> { #D;[1.0,1.6] #E;1.9 }"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#addMD#(#"#D;2.0"#)#.#addMD#(#"#E;1.0"#)#.#addMD#(#"#E;1.9"#)#.#addMD#(#"#E;2.0"#)#.#init#(#)#;#resolveAndAssert#(#"#A;3"#,#"#B;2.3, #C;3.4, #D;1.5, #E;1.0"#)#;#}##void#testCompatibilityResolve4#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;4-> { #B;[1.0,1.5] #C;[2.0,2.5] #F;[1.0,1.1] }"#)#.#addMD#(#"#B;1.4->#D;1.5"#)#.#addMD#(#"#B;1.5->#D;2.0"#)#.#addMD#(#"#C;2.5->#D;[1.0,1.6]"#)#.#addMD#(#"#F;1.0->#D;1.5"#)#.#addMD#(#"#F;1.1->#D;1.6"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#addMD#(#"#D;2.0"#)#.#init#(#)#;#resolveAndAssert#(#"#A;4"#,#"#B;1.4, #C;2.5, #D;1.5, #F;1.0"#)#;#}##void#testCompatibilityResolve5#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;5->{ #B;[1.0,1.5] #C;2.6 }"#)#.#addMD#(#"#B;1.3->{ }"#)#.#addMD#(#"#B;1.4->#D;1.5"#)#.#addMD#(#"#B;1.5->#D;2.0"#)#.#addMD#(#"#C;2.6->#D;1.6"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#addMD#(#"#D;2.0"#)#.#init#(#)#;#resolveAndAssert#(#"#A;5"#,#"#B;1.3, #C;2.6, #D;1.6"#)#;#}##void#testCompatibilityResolve6#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;1-> { #C;[2.0,2.5] #B;1.4 }"#)#.#addMD#(#"#B;1.4->#D;1.5"#)#.#addMD#(#"#C;2.5->#D;[1.0,1.6]"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#init#(#)#;#resolveAndAssert#(#"#A;1"#,#"#B;1.4, #C;2.5, #D;1.5"#)#;#}##void#testCompatibilityResolveCircularDependency1#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;6->{ #B;[3.0,3.5] #C;4.6 }"#)#.#addMD#(#"#B;3.4->#D;2.5"#)#.#addMD#(#"#B;3.5->#D;3.0"#)#.#addMD#(#"#C;4.6->#D;2.5"#)#.#addMD#(#"#D;3.0->#B;3.5"#)#// circular dependency#.#addMD#(#"#D;2.5->#B;3.4"#)#// circular dependency#.#init#(#)#;#resolveAndAssert#(#"#A;6"#,#"#B;3.4, #C;4.6, #D;2.5"#)#;#}##void#testCompatibilityResolveCircularDependency2#(#)#throws#Exception#{#fixture#.#addMD#(#"#A;1->#C;2"#)#.#addMD#(#"#C;1->#B;1"#)#.#addMD#(#"#C;2->#B;2"#)#.#addMD#(#"#C;3->#B;3"#)#.#addMD#(#"#B;1->#C;latest.integration"#)#// circular dependency#.#addMD#(#"#B;2->#C;latest.integration"#)#// circular dependency#.#addMD#(#"#B;3->#C;latest.integration"#)#// circular dependency#.#init#(#)#;#resolveAndAssert#(#"#A;1"#,#"#B;2, #C;2"#)#;#}##void#testCompatibilityResolveCircularDependency3#(#)#throws#Exception#{#// same as 2, but A depends on B#fixture#.#addMD#(#"#A;1->#B;2"#)#.#addMD#(#"#C;1->#B;1"#)#.#addMD#(#"#C;2->#B;2"#)#.#addMD#(#"#C;3->#B;3"#)#.#addMD#(#"#B;1->#C;latest.integration"#)#// circular dependency#.#addMD#(#"#B;2->#C;latest.integration"#)#// circular dependency#.#addMD#(#"#B;3->#C;latest.integration"#)#// circular dependency#.#init#(#)#;#resolveAndAssert#(#"#A;1"#,#"#B;2, #C;2"#)#;#}##void#testConflict#(#)#throws#Exception#{#try#{#fixture#.#addMD#(#"#A;conflict-> { #B;[1.5,1.6] #C;2.5 }"#)#.#addMD#(#"#B;1.5->#D;2.0"#)#.#addMD#(#"#B;1.6->#D;2.0"#)#.#addMD#(#"#C;2.5->#D;[1.0,1.6]"#)#.#addMD#(#"#D;1.5"#)#.#addMD#(#"#D;1.6"#)#.#addMD#(#"#D;2.0"#)#.#init#(#)#;#fixture#.#resolve#(#"#A;conflict"#)#;#fail#(#"Resolve should have failed with a conflict"#)#;#}#catch#(#StrictConflictException#e#)#{#// this is expected#}#}##void#resolveAndAssert#(#String#mrid#,#String#expectedModuleSet#)#throws#ParseException#,#IOException#{#ResolveReport#report#=#fixture#.#resolve#(#mrid#)#;#assertFalse#(#report#.#hasError#(#)#)#;#ConfigurationResolveReport#defaultReport#=#report#.#getConfigurationReport#(#"default"#)#;#TestHelper#.#assertModuleRevisionIds#(#expectedModuleSet#,#defaultReport#.#getModuleRevisionIds#(#)#)#;#}##