long#getLastModified#(#)#{#long#lastModified#=#node#.#getLastModified#(#)#;#if#(#lastModified#==#0#)#{#// if the last modified timestamp is unknown, we can't resolve#// the conflicts now, and trigger an exception which will be catched#// in the main resolveConflicts method#throw#new#NoConflictResolvedYetException#(#)#;#}#else#{#return#lastModified#;#}#}##String#getRevision#(#)#{#return#node#.#getResolvedId#(#)#.#getRevision#(#)#;#}##IvyNode#getNode#(#)#{#return#node#;#}##Collection#resolveConflicts#(#IvyNode#parent#,#Collection#conflicts#)#{#if#(#conflicts#.#size#(#)#<#2#)#{#return#conflicts#;#}#for#(#Iterator#iter#=#conflicts#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#IvyNode#node#=#(#IvyNode#)#iter#.#next#(#)#;#DependencyDescriptor#dd#=#node#.#getDependencyDescriptor#(#parent#)#;#if#(#dd#!=#null#&&#dd#.#isForce#(#)#&&#parent#.#getResolvedId#(#)#.#equals#(#dd#.#getParentRevisionId#(#)#)#)#{#return#Collections#.#singleton#(#node#)#;#}#}#/*
         * If the list of conflicts contains dynamic revisions, delay the conflict
         * calculation until they are resolved.
         * TODO: we probably could already evict some of the dynamic revisions!
         */#for#(#Iterator#iter#=#conflicts#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#IvyNode#node#=#(#IvyNode#)#iter#.#next#(#)#;#ModuleRevisionId#modRev#=#node#.#getResolvedId#(#)#;#if#(#getSettings#(#)#.#getVersionMatcher#(#)#.#isDynamic#(#modRev#)#)#{#return#null#;#}#}#try#{#IvyNodeArtifactInfo#latest#=#(#IvyNodeArtifactInfo#)#getStrategy#(#)#.#findLatest#(#toArtifactInfo#(#conflicts#)#,#null#)#;#if#(#latest#!=#null#)#{#return#Collections#.#singleton#(#latest#.#getNode#(#)#)#;#}#else#{#return#conflicts#;#}#}#catch#(#NoConflictResolvedYetException#ex#)#{#// we have not enough informations in the nodes to resolve conflict#// according to the resolveConflicts contract, we must return null#return#null#;#}#}##ArtifactInfo#[#]#toArtifactInfo#(#Collection#conflicts#)#{#List#artifacts#=#new#ArrayList#(#conflicts#.#size#(#)#)#;#for#(#Iterator#iter#=#conflicts#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#IvyNode#node#=#(#IvyNode#)#iter#.#next#(#)#;#artifacts#.#add#(#new#IvyNodeArtifactInfo#(#node#)#)#;#}#return#(#ArtifactInfo#[#]#)#artifacts#.#toArray#(#new#ArtifactInfo#[#artifacts#.#size#(#)#]#)#;#}##LatestStrategy#getStrategy#(#)#{#if#(#strategy#==#null#)#{#if#(#strategyName#!=#null#)#{#strategy#=#getSettings#(#)#.#getLatestStrategy#(#strategyName#)#;#if#(#strategy#==#null#)#{#Message#.#error#(#"unknown latest strategy: "#+#strategyName#)#;#strategy#=#getSettings#(#)#.#getDefaultLatestStrategy#(#)#;#}#}#else#{#strategy#=#getSettings#(#)#.#getDefaultLatestStrategy#(#)#;#}#}#return#strategy#;#}##void#setLatest#(#String#strategyName#)#{#this#.#strategyName#=#strategyName#;#}##void#setStrategy#(#LatestStrategy#strategy#)#{#this#.#strategy#=#strategy#;#}##String#toString#(#)#{#return#strategy#!=#null#?#String#.#valueOf#(#strategy#)#:#strategyName#;#}##