String#getIBiblioMirror#(#)#throws#Exception#{#if#(#!#_checked#)#{#String#[#]#mirrors#=#new#String#[#]#{#"http://repo1.maven.org/maven/REPOSITORY-V1.txt"#,#"http://mirrors.sunsite.dk/maven"#,#"http://public.planetmirror.com/pub/maven"#,#"http://www.ibiblio.org/maven"#}#;#String#[#]#mirrorsRoot#=#new#String#[#]#{#"http://repo1.maven.org/maven"#,#"http://mirrors.sunsite.dk/maven"#,#"http://public.planetmirror.com/pub/maven"#,#"http://www.ibiblio.org/maven"#}#;#long#best#=#-#1#;#for#(#int#i#=#0#;#i#<#mirrors#.#length#;#i#++#)#{#long#start#=#System#.#currentTimeMillis#(#)#;#if#(#handler#.#isReachable#(#new#URL#(#mirrors#[#i#]#)#,#300#)#)#{#long#took#=#System#.#currentTimeMillis#(#)#-#start#;#System#.#out#.#println#(#"reached "#+#mirrors#[#i#]#+#" in "#+#took#+#"ms"#)#;#if#(#best#==#-#1#||#took#<#best#)#{#best#=#took#;#_mirror#=#mirrorsRoot#[#i#]#;#if#(#took#<#400#)#{#// this mirror is good enough#break#;#}#}#}#}#if#(#_mirror#==#null#)#{#System#.#out#.#println#(#"No ibiblio mirror available: no ibiblio test done"#)#;#}#}#return#_mirror#;#}##void#main#(#String#[#]#args#)#throws#Exception#{#long#start#=#System#.#currentTimeMillis#(#)#;#String#biblioMirror#=#getIBiblioMirror#(#)#;#System#.#out#.#println#(#"best mirror is "#+#biblioMirror#+#" - found in "#+#(#System#.#currentTimeMillis#(#)#-#start#)#+#"ms"#)#;#}##