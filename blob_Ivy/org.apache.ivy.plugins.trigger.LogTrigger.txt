void#progress#(#IvyEvent#event#)#{#log#(#IvyPatternHelper#.#substituteVariables#(#message#,#event#.#getAttributes#(#)#)#)#;#}##void#log#(#String#message#)#{#if#(#file#==#null#)#{#Message#.#info#(#message#)#;#}#else#{#Writer#out#=#null#;#try#{#// we add a line separator here for consistency with Message.info which creates a#// new line each time.#// we use the system dependent line separator to ease reading the log file#message#+=#LINE_SEPARATOR#;#String#filename#=#file#.#getAbsolutePath#(#)#;#if#(#encoding#==#null#||#encoding#.#length#(#)#==#0#)#{#out#=#new#FileWriter#(#filename#,#append#)#;#}#else#{#out#=#new#BufferedWriter#(#new#OutputStreamWriter#(#new#FileOutputStream#(#filename#,#append#)#,#encoding#)#)#;#}#out#.#write#(#message#,#0#,#message#.#length#(#)#)#;#}#catch#(#IOException#e#)#{#throw#new#ResolveProcessException#(#e#)#;#}#finally#{#if#(#out#!=#null#)#{#try#{#out#.#close#(#)#;#}#catch#(#IOException#e#)#{#throw#new#ResolveProcessException#(#e#)#;#}#}#}#}#}##void#setMessage#(#String#msg#)#{#this#.#message#=#msg#;#}##void#setFile#(#File#file#)#{#this#.#file#=#file#;#}##void#setAppend#(#boolean#append#)#{#this#.#append#=#append#;#}##void#setEncoding#(#String#encoding#)#{#this#.#encoding#=#encoding#;#}##