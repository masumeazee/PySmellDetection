void#testSubstitute#(#)#{#String#pattern#=#"[organisation]/[module]/build/archives/[type]s/[artifact]-[revision].[ext]"#;#assertEquals#(#"apache/Test/build/archives/jars/test-1.0.jar"#,#IvyPatternHelper#.#substitute#(#pattern#,#"apache"#,#"Test"#,#"1.0"#,#"test"#,#"jar"#,#"jar"#)#)#;#}##void#testCyclicSubstitute#(#)#{#String#pattern#=#"${var}"#;#Map#variables#=#new#HashMap#(#)#;#variables#.#put#(#"var"#,#"${othervar}"#)#;#variables#.#put#(#"othervar"#,#"${var}"#)#;#try#{#IvyPatternHelper#.#substituteVariables#(#pattern#,#variables#)#;#fail#(#"cyclic var should raise an exception"#)#;#}#catch#(#Exception#ex#)#{#// ok#}#catch#(#Error#er#)#{#fail#(#"cyclic var shouldn't raise an error: "#+#er#)#;#}#}##void#testOptionalSubstitute#(#)#{#Map#tokens#=#new#HashMap#(#)#;#tokens#.#put#(#"token"#,#""#)#;#tokens#.#put#(#"othertoken"#,#"myval"#)#;#assertEquals#(#"test-myval"#,#IvyPatternHelper#.#substituteTokens#(#"test(-[token])(-[othertoken])"#,#tokens#)#)#;#tokens#.#put#(#"token"#,#"val"#)#;#assertEquals#(#"test-val-myval"#,#IvyPatternHelper#.#substituteTokens#(#"test(-[token])(-[othertoken])"#,#tokens#)#)#;#}##void#testOrganization#(#)#{#String#pattern#=#"[organization]/[module]/build/archives/[type]s/[artifact]-[revision].[ext]"#;#assertEquals#(#"apache/Test/build/archives/jars/test-1.0.jar"#,#IvyPatternHelper#.#substitute#(#pattern#,#"apache"#,#"Test"#,#"1.0"#,#"test"#,#"jar"#,#"jar"#)#)#;#}##void#testSpecialCharsInsidePattern#(#)#{#String#pattern#=#"[organization]/[module]/build/archives (x86)/[type]s/[artifact]-[revision].[ext]"#;#assertEquals#(#"apache/Test/build/archives (x86)/jars/test-1.0.jar"#,#IvyPatternHelper#.#substitute#(#pattern#,#"apache"#,#"Test"#,#"1.0"#,#"test"#,#"jar"#,#"jar"#)#)#;#}##