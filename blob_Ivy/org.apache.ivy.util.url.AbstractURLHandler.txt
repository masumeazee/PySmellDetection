boolean#isReachable#(#URL#url#)#{#return#getURLInfo#(#url#)#.#isReachable#(#)#;#}##boolean#isReachable#(#URL#url#,#int#timeout#)#{#return#getURLInfo#(#url#,#timeout#)#.#isReachable#(#)#;#}##long#getContentLength#(#URL#url#)#{#return#getURLInfo#(#url#)#.#getContentLength#(#)#;#}##long#getContentLength#(#URL#url#,#int#timeout#)#{#return#getURLInfo#(#url#,#timeout#)#.#getContentLength#(#)#;#}##long#getLastModified#(#URL#url#)#{#return#getURLInfo#(#url#)#.#getLastModified#(#)#;#}##long#getLastModified#(#URL#url#,#int#timeout#)#{#return#getURLInfo#(#url#,#timeout#)#.#getLastModified#(#)#;#}##void#validatePutStatusCode#(#URL#dest#,#int#statusCode#,#String#statusMessage#)#throws#IOException#{#switch#(#statusCode#)#{#case#HttpURLConnection#.#HTTP_OK#:#/* intentional fallthrough */#case#HttpURLConnection#.#HTTP_CREATED#:#/* intentional fallthrough */#case#HttpURLConnection#.#HTTP_ACCEPTED#:#/* intentional fallthrough */#case#HttpURLConnection#.#HTTP_NO_CONTENT#:#break#;#case#HttpURLConnection#.#HTTP_UNAUTHORIZED#:#/* intentional fallthrough */#case#HttpURLConnection#.#HTTP_FORBIDDEN#:#throw#new#IOException#(#"Access to URL "#+#dest#+#" was refused by the server"#+#(#statusMessage#==#null#?#""#:#": "#+#statusMessage#)#)#;#default#:#throw#new#IOException#(#"PUT operation to URL "#+#dest#+#" failed with status code "#+#statusCode#+#(#statusMessage#==#null#?#""#:#": "#+#statusMessage#)#)#;#}#}##void#setRequestMethod#(#int#requestMethod#)#{#AbstractURLHandler#.#requestMethod#=#requestMethod#;#}##int#getRequestMethod#(#)#{#return#requestMethod#;#}##String#normalizeToString#(#URL#url#)#throws#IOException#{#if#(#!#"http"#.#equals#(#url#.#getProtocol#(#)#)#&&#!#"https"#.#equals#(#url#.#getProtocol#(#)#)#)#{#return#url#.#toExternalForm#(#)#;#}#try#{#URI#uri#=#new#URI#(#url#.#getProtocol#(#)#,#url#.#getUserInfo#(#)#,#url#.#getHost#(#)#,#url#.#getPort#(#)#,#url#.#getPath#(#)#,#url#.#getQuery#(#)#,#url#.#getRef#(#)#)#;#// it is possible that the original url was already (partial) escaped,#// so we must unescape all '%' followed by 2 hexadecimals...#String#uriString#=#uri#.#toASCIIString#(#)#;#// manually escape the '+' character#uriString#=#uriString#.#replaceAll#(#"\\+"#,#"%2B"#)#;#return#ESCAPE_PATTERN#.#matcher#(#uriString#)#.#replaceAll#(#"%$1"#)#;#}#catch#(#URISyntaxException#e#)#{#IOException#ioe#=#new#MalformedURLException#(#"Couldn't convert '"#+#url#.#toString#(#)#+#"' to a valid URI"#)#;#ioe#.#initCause#(#e#)#;#throw#ioe#;#}#}##URL#normalizeToURL#(#URL#url#)#throws#IOException#{#if#(#!#"http"#.#equals#(#url#.#getProtocol#(#)#)#&&#!#"https"#.#equals#(#url#.#getProtocol#(#)#)#)#{#return#url#;#}#return#new#URL#(#normalizeToString#(#url#)#)#;#}##