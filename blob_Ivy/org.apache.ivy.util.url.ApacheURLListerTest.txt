void#testRetrieveListing#(#)#throws#Exception#{#ApacheURLLister#lister#=#new#ApacheURLLister#(#)#;#List#files#=#lister#.#retrieveListing#(#ApacheURLListerTest#.#class#.#getResource#(#"apache-file-listing.html"#)#,#true#,#false#)#;#assertNotNull#(#files#)#;#assertTrue#(#files#.#size#(#)#>#0#)#;#for#(#Iterator#iter#=#files#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#URL#file#=#(#URL#)#iter#.#next#(#)#;#assertTrue#(#"found a non matching file: "#+#file#,#file#.#getPath#(#)#.#matches#(#".*/[^/]+\\.(jar|md5|sha1)"#)#)#;#}#// try a directory listing#List#dirs#=#lister#.#retrieveListing#(#ApacheURLListerTest#.#class#.#getResource#(#"apache-dir-listing.html"#)#,#false#,#true#)#;#assertNotNull#(#dirs#)#;#assertEquals#(#4#,#dirs#.#size#(#)#)#;#List#empty#=#lister#.#retrieveListing#(#ApacheURLListerTest#.#class#.#getResource#(#"apache-dir-listing.html"#)#,#true#,#false#)#;#assertTrue#(#empty#.#isEmpty#(#)#)#;#}##void#testRetrieveListingWithSpaces#(#)#throws#Exception#{#ApacheURLLister#lister#=#new#ApacheURLLister#(#)#;#List#files#=#lister#.#retrieveListing#(#ApacheURLListerTest#.#class#.#getResource#(#"listing-with-spaces.html"#)#,#true#,#false#)#;#assertNotNull#(#files#)#;#assertTrue#(#files#.#size#(#)#>#0#)#;#}##void#testRetrieveArchivaListing#(#)#throws#Exception#{#ApacheURLLister#lister#=#new#ApacheURLLister#(#)#;#List#d#=#lister#.#listDirectories#(#ApacheURLListerTest#.#class#.#getResource#(#"archiva-listing.html"#)#)#;#assertNotNull#(#d#)#;#// archiva listing is not valid html at all currently (1.0, unclosed a tags), #// and we don't want to adapt to this#//        assertEquals(3, d.size());#}##void#testRetrieveFixedArchivaListing#(#)#throws#Exception#{#ApacheURLLister#lister#=#new#ApacheURLLister#(#)#;#List#d#=#lister#.#listDirectories#(#ApacheURLListerTest#.#class#.#getResource#(#"fixed-archiva-listing.html"#)#)#;#assertNotNull#(#d#)#;#assertEquals#(#3#,#d#.#size#(#)#)#;#}##void#testRetrieveMavenProxyListing#(#)#throws#Exception#{#ApacheURLLister#lister#=#new#ApacheURLLister#(#)#;#List#d#=#lister#.#listDirectories#(#ApacheURLListerTest#.#class#.#getResource#(#"maven-proxy-listing.html"#)#)#;#assertNotNull#(#d#)#;#assertEquals#(#3#,#d#.#size#(#)#)#;#}##