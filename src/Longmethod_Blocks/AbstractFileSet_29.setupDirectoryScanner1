void#setupDirectoryScanner#(#FileScanner#ds#,#Project#p#)#{##if#(#isReference#(#)#)#{#getRef#(#p#)#.#setupDirectoryScanner#(#ds#,#p#)#;##return#;#}##dieOnCircularReference#(#p#)#;##if#(#ds#==#null#)#{#throw#new#IllegalArgumentException#(#"ds cannot be null"#)#;#}##ds#.#setBasedir#(#dir#)#;#PatternSet#ps#=#mergePatterns#(#p#)#;#p#.#log#(#getDataTypeName#(#)#+#": Setup scanner in dir "#+#dir#+#" with "#+#ps#,#Project#.#MSG_DEBUG#)#;#ds#.#setIncludes#(#ps#.#getIncludePatterns#(#p#)#)#;#ds#.#setExcludes#(#ps#.#getExcludePatterns#(#p#)#)#;##if#(#ds#instanceof#SelectorScanner#)#{#SelectorScanner#ss#=#(#SelectorScanner#)#ds#;#ss#.#setSelectors#(#getSelectors#(#p#)#)#;#}##if#(#useDefaultExcludes#)#{#ds#.#addDefaultExcludes#(#)#;#}##ds#.#setCaseSensitive#(#caseSensitive#)#;#}