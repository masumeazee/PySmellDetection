void#testCleanup#(#)#throws#BuildException#{#Path#path#=#new#Path#(#p#,#"."#)#;#loader#=#p#.#createClassLoader#(#path#)#;##try#{##// we don't expect to find this#loader#.#findClass#(#"fubar"#)#;#fail#(#"Did not expect to find fubar class"#)#;#}##catch#(#ClassNotFoundException#e#)#{##// ignore expected#}##loader#.#cleanup#(#)#;##try#{##// we don't expect to find this#loader#.#findClass#(#"fubar"#)#;#fail#(#"Did not expect to find fubar class"#)#;#}##catch#(#ClassNotFoundException#e#)#{##// ignore expected#}##catch#(#NullPointerException#e#)#{#fail#(#"loader should not fail even if cleaned up"#)#;#}##// tell the build it is finished#p#.#fireBuildFinished#(#null#)#;##try#{##// we don't expect to find this#loader#.#findClass#(#"fubar"#)#;#fail#(#"Did not expect to find fubar class"#)#;#}##catch#(#ClassNotFoundException#e#)#{##// ignore expected#}##catch#(#NullPointerException#e#)#{#fail#(#"loader should not fail even if project finished"#)#;#}#}