void#testInvalidZipException#(#)#throws#Exception#{#executeTarget#(#"createNonJar"#)#;#File#jar#=#new#File#(#getProject#(#)#.#getProperty#(#"tmp.dir"#)#+#"/foo.jar"#)#;#Path#myPath#=#new#Path#(#getProject#(#)#)#;#myPath#.#setLocation#(#jar#)#;#getProject#(#)#.#setUserProperty#(#"build.sysclasspath"#,#"ignore"#)#;#loader#=#getProject#(#)#.#createClassLoader#(#myPath#)#;#PrintStream#sysErr#=#System#.#err#;##try#{#StringBuffer#errBuffer#=#new#StringBuffer#(#)#;#PrintStream#err#=#new#PrintStream#(#new#BuildFileTest#.#AntOutputStream#(#errBuffer#)#)#;#System#.#setErr#(#err#)#;#loader#.#getResource#(#"foo.txt"#)#;#String#log#=#getLog#(#)#;#int#startMessage#=#log#.#indexOf#(#"Unable to obtain resource from "#)#;#assertTrue#(#startMessage#>=#0#)#;#assertTrue#(#log#.#indexOf#(#"foo.jar"#,#startMessage#)#>#0#)#;#log#=#errBuffer#.#toString#(#)#;#startMessage#=#log#.#indexOf#(#"Unable to obtain resource from "#)#;#assertTrue#(#startMessage#>=#0#)#;#assertTrue#(#log#.#indexOf#(#"foo.jar"#,#startMessage#)#>#0#)#;#}##finally#{#System#.#setErr#(#sysErr#)#;#}#}