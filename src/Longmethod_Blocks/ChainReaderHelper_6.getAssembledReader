Reader#getAssembledReader#(#)#throws#BuildException#{##if#(#primaryReader#==#null#)#{#throw#new#BuildException#(#"primaryReader must not be null."#)#;#}##Reader#instream#=#primaryReader#;#final#int#filterReadersCount#=#filterChains#.#size#(#)#;#final#Vector#finalFilters#=#new#Vector#(#)#;#final#ArrayList##/*<AntClassLoader>*/#classLoadersToCleanUp#=#new#ArrayList##/*<AntClassLoader>*/#(#)#;##for#(#int#i#=#0#;##i#<#filterReadersCount#;#i#++#)#{#final#FilterChain#filterchain#=#(#FilterChain#)#filterChains#.#elementAt#(#i#)#;#final#Vector#filterReaders#=#filterchain#.#getFilterReaders#(#)#;#final#int#readerCount#=#filterReaders#.#size#(#)#;##for#(#int#j#=#0#;##j#<#readerCount#;#j#++#)#{#finalFilters#.#addElement#(#filterReaders#.#elementAt#(#j#)#)#;#}#}##final#int#filtersCount#=#finalFilters#.#size#(#)#;##if#(#filtersCount#>#0#)#{#boolean#success#=#false#;##try#{#for#(#int#i#=#0#;##i#<#filtersCount#;#i#++#)#{#Object#o#=#finalFilters#.#elementAt#(#i#)#;##if#(#o#instanceof#AntFilterReader#)#{#instream#=#expandReader#(#(#AntFilterReader#)#finalFilters#.#elementAt#(#i#)#,#instream#,#classLoadersToCleanUp#)#;#}#else##if#(#o#instanceof#ChainableReader#)#{#setProjectOnObject#(#o#)#;#instream#=#(#(#ChainableReader#)#o#)#.#chain#(#instream#)#;#setProjectOnObject#(#instream#)#;#}#}##success#=#true#;#}##finally#{##if#(#!#success#&&#classLoadersToCleanUp#.#size#(#)#>#0#)#{#cleanUpClassLoaders#(#classLoadersToCleanUp#)#;#}#}#}##final#Reader#finalReader#=#instream#;##return#classLoadersToCleanUp#.#size#(#)#==#0#?#finalReader#:#new#FilterReader#(#finalReader#)#{#public#void#close#(#)#throws#IOException#{#FileUtils#.#close#(#in#)#;#cleanUpClassLoaders#(#classLoadersToCleanUp#)#;#}##protected#void#finalize#(#)#throws#Throwable#{#try#{#close#(#)#;#}##finally#{#super#.#finalize#(#)#;#}#}#}#;#}