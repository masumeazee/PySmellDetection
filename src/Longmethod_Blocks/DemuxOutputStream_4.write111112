void#write#(#int#cc#)#throws#IOException#{#final#byte#c#=#(#byte#)#cc#;#BufferInfo#bufferInfo#=#getBufferInfo#(#)#;##if#(#c#==#'\n'#)#{##// LF is always end of line (i.e. CRLF or single LF)#bufferInfo#.#buffer#.#write#(#cc#)#;#processBuffer#(#bufferInfo#.#buffer#)#;#}#else#{##if#(#bufferInfo#.#crSeen#)#{##// CR without LF - send buffer then add char#processBuffer#(#bufferInfo#.#buffer#)#;#}##// add into buffer#bufferInfo#.#buffer#.#write#(#cc#)#;#}##bufferInfo#.#crSeen#=#(#c#==#'\r'#)#;##if#(#!#bufferInfo#.#crSeen#&&#bufferInfo#.#buffer#.#size#(#)#>#MAX_SIZE#)#{#processBuffer#(#bufferInfo#.#buffer#)#;#}#}