int#fork#(#ProjectComponent#pc#)#throws#BuildException#{#CommandlineJava#cmdl#=#new#CommandlineJava#(#)#;#cmdl#.#setClassname#(#javaCommand#.#getExecutable#(#)#)#;#String#[#]#args#=#javaCommand#.#getArguments#(#)#;##for#(#int#i#=#0#;##i#<#args#.#length#;#i#++#)#{#cmdl#.#createArgument#(#)#.#setValue#(#args#[#i#]#)#;#}##if#(#classpath#!=#null#)#{#cmdl#.#createClasspath#(#pc#.#getProject#(#)#)#.#append#(#classpath#)#;#}##if#(#sysProperties#!=#null#)#{#cmdl#.#addSysproperties#(#sysProperties#)#;#}##Redirector#redirector#=#new#Redirector#(#pc#)#;#Execute#exe#=#new#Execute#(#redirector#.#createHandler#(#)#,#timeout#==#null#?#null#:#new#ExecuteWatchdog#(#timeout#.#longValue#(#)#)#)#;#exe#.#setAntRun#(#pc#.#getProject#(#)#)#;##if#(#Os#.#isFamily#(#"openvms"#)#)#{#setupCommandLineForVMS#(#exe#,#cmdl#.#getCommandline#(#)#)#;#}#else#{#exe#.#setCommandline#(#cmdl#.#getCommandline#(#)#)#;#}##try#{#int#rc#=#exe#.#execute#(#)#;#redirector#.#complete#(#)#;##return#rc#;#}##catch#(#IOException#e#)#{#throw#new#BuildException#(#e#)#;#}##finally#{#timedOut#=#exe#.#killedProcess#(#)#;#}#}