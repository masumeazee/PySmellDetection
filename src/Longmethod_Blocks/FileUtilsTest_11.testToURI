void#testToURI#(#)#{#String#dosRoot#=#null#;##if#(#Os#.#isFamily#(#"dos"#)#||#Os#.#isFamily#(#"netware"#)#)#{#dosRoot#=#System#.#getProperty#(#"user.dir"#)#.#substring#(#0#,#3#)#.#replace#(#File#.#separatorChar#,#'/'#)#;#}#else#{#dosRoot#=#""#;#}##if#(#Os#.#isFamily#(#"dos"#)#)#{#assertEquals#(#"file:/c:/foo"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"c:\\foo"#)#)#)#;#}##if#(#Os#.#isFamily#(#"netware"#)#)#{#assertEquals#(#"file:/SYS:/foo"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"sys:\\foo"#)#)#)#;#}##if#(#File#.#pathSeparatorChar#==#'/'#)#{#assertEquals#(#"file:/foo"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"/foo"#)#)#)#;#assertTrue#(#"file: URIs must name absolute paths"#,#FILE_UTILS#.#toURI#(#"./foo"#)#.#startsWith#(#"file:/"#)#)#;#assertTrue#(#FILE_UTILS#.#toURI#(#"./foo"#)#.#endsWith#(#"/foo"#)#)#;#assertEquals#(#"file:/"#+#dosRoot#+#"foo%20bar"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"/foo bar"#)#)#)#;#assertEquals#(#"file:/"#+#dosRoot#+#"foo%23bar"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"/foo#bar"#)#)#)#;#}#else##if#(#File#.#pathSeparatorChar#==#'\\'#)#{#assertEquals#(#"file:/"#+#dosRoot#+#"foo"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"\\foo"#)#)#)#;#assertTrue#(#"file: URIs must name absolute paths"#,#FILE_UTILS#.#toURI#(#".\\foo"#)#.#startsWith#(#"file:/"#)#)#;#assertTrue#(#FILE_UTILS#.#toURI#(#".\\foo"#)#.#endsWith#(#"/foo"#)#)#;#assertEquals#(#"file:/"#+#dosRoot#+#"foo%20bar"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"\\foo bar"#)#)#)#;#assertEquals#(#"file:/"#+#dosRoot#+#"foo%23bar"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"\\foo#bar"#)#)#)#;#}##// a test with ant for germans##// the escaped character used for the test is the "a umlaut"##// this is the fix for the bug 37348#assertEquals#(#"file:/"#+#dosRoot#+#"%C3%A4nt"#,#removeExtraneousAuthority#(#FILE_UTILS#.#toURI#(#"/\u00E4nt"#)#)#)#;#}