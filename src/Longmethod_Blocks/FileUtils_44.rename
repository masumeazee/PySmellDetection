void#rename#(#File#from#,#File#to#)#throws#IOException#{#from#=#normalize#(#from#.#getAbsolutePath#(#)#)#.#getCanonicalFile#(#)#;#to#=#normalize#(#to#.#getAbsolutePath#(#)#)#;##if#(#!#from#.#exists#(#)#)#{#System#.#err#.#println#(#"Cannot rename nonexistent file "#+#from#)#;##return#;#}##if#(#from#.#equals#(#to#)#)#{#System#.#err#.#println#(#"Rename of "#+#from#+#" to "#+#to#+#" is a no-op."#)#;##return#;#}##if#(#to#.#exists#(#)#&&#!#(#from#.#equals#(#to#.#getCanonicalFile#(#)#)#||#tryHardToDelete#(#to#)#)#)#{#throw#new#IOException#(#"Failed to delete "#+#to#+#" while trying to rename "#+#from#)#;#}##File#parent#=#to#.#getParentFile#(#)#;##if#(#parent#!=#null#&&#!#parent#.#exists#(#)#&&#!#parent#.#mkdirs#(#)#)#{#throw#new#IOException#(#"Failed to create directory "#+#parent#+#" while trying to rename "#+#from#)#;#}##if#(#!#from#.#renameTo#(#to#)#)#{#copyFile#(#from#,#to#)#;##if#(#!#tryHardToDelete#(#from#)#)#{#throw#new#IOException#(#"Failed to delete "#+#from#+#" while trying to rename it."#)#;#}#}#}