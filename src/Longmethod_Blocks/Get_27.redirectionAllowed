boolean#redirectionAllowed#(#URL#aSource#,#URL#aDest#)#{##if#(#!#(#aSource#.#getProtocol#(#)#.#equals#(#aDest#.#getProtocol#(#)#)#||#(#HTTP#.#equals#(#aSource#.#getProtocol#(#)#)#&&#HTTPS#.#equals#(#aDest#.#getProtocol#(#)#)#)#)#)#{#String#message#=#"Redirection detected from "#+#aSource#.#getProtocol#(#)#+#" to "#+#aDest#.#getProtocol#(#)#+#". Protocol switch unsafe, not allowed."#;##if#(#ignoreErrors#)#{#log#(#message#,#logLevel#)#;##return#false#;#}#else#{#throw#new#BuildException#(#message#)#;#}#}##redirections#++#;##if#(#redirections#>#REDIRECT_LIMIT#)#{#String#message#=#"More than "#+#REDIRECT_LIMIT#+#" times redirected, giving up"#;##if#(#ignoreErrors#)#{#log#(#message#,#logLevel#)#;##return#false#;#}#else#{#throw#new#BuildException#(#message#)#;#}#}##return#true#;#}