void#importResource#(#ProjectHelper#helper#,#Resource#importedResource#)#{#Vector#importStack#=#helper#.#getImportStack#(#)#;#getProject#(#)#.#log#(#"Importing file "#+#importedResource#+#" from "#+#getLocation#(#)#.#getFileName#(#)#,#Project#.#MSG_VERBOSE#)#;##if#(#!#importedResource#.#isExists#(#)#)#{#String#message#=#"Cannot find "#+#importedResource#+#" imported from "#+#getLocation#(#)#.#getFileName#(#)#;##if#(#optional#)#{#getProject#(#)#.#log#(#message#,#Project#.#MSG_VERBOSE#)#;##return#;#}#else#{#throw#new#BuildException#(#message#)#;#}#}##File#importedFile#=#null#;#FileProvider#fp#=#(#FileProvider#)#importedResource#.#as#(#FileProvider#.#class#)#;##if#(#fp#!=#null#)#{#importedFile#=#fp#.#getFile#(#)#;#}##if#(#!#isInIncludeMode#(#)#&&#(#importStack#.#contains#(#importedResource#)#||#(#importedFile#!=#null#&&#importStack#.#contains#(#importedFile#)#)#)#)#{#getProject#(#)#.#log#(#"Skipped already imported file:\n   "#+#importedResource#+#"\n"#,#Project#.#MSG_VERBOSE#)#;##return#;#}##// nested invokations are possible like an imported file##// importing another one#String#oldPrefix#=#ProjectHelper#.#getCurrentTargetPrefix#(#)#;#boolean#oldIncludeMode#=#ProjectHelper#.#isInIncludeMode#(#)#;#String#oldSep#=#ProjectHelper#.#getCurrentPrefixSeparator#(#)#;##try#{#String#prefix#=#targetPrefix#;##if#(#isInIncludeMode#(#)#&&#oldPrefix#!=#null#&&#targetPrefix#!=#null#)#{#prefix#=#oldPrefix#+#oldSep#+#targetPrefix#;#}##setProjectHelperProps#(#prefix#,#prefixSeparator#,#isInIncludeMode#(#)#)#;#helper#.#parse#(#getProject#(#)#,#importedResource#)#;#}##catch#(#BuildException#ex#)#{#throw#ProjectHelper#.#addLocationToBuildException#(#ex#,#getLocation#(#)#)#;#}##finally#{#setProjectHelperProps#(#oldPrefix#,#oldSep#,#oldIncludeMode#)#;#}#}