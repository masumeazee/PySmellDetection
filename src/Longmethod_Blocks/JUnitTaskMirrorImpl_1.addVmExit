void#addVmExit#(#JUnitTest#test#,#JUnitTaskMirror#.#JUnitResultFormatterMirror#aFormatter#,#OutputStream#out#,#String#message#,#String#testCase#)#{#JUnitResultFormatter#formatter#=#(#JUnitResultFormatter#)#aFormatter#;#formatter#.#setOutput#(#out#)#;#formatter#.#startTestSuite#(#test#)#;##//the trick to integrating test output to the formatter, is to##//create a special test class that asserts an error##//and tell the formatter that it raised.#TestCase#t#=#new#VmExitErrorTest#(#message#,#test#,#testCase#)#;#formatter#.#startTest#(#t#)#;#formatter#.#addError#(#t#,#new#AssertionFailedError#(#message#)#)#;#formatter#.#endTestSuite#(#test#)#;#}