void#execute#(#)#throws#BuildException#{#setupJUnitDelegate#(#)#;#List#testLists#=#new#ArrayList#(#)#;#boolean#forkPerTest#=#forkMode#.#getValue#(#)#.#equals#(#ForkMode#.#PER_TEST#)#;##if#(#forkPerTest#||#forkMode#.#getValue#(#)#.#equals#(#ForkMode#.#ONCE#)#)#{#testLists#.#addAll#(#executeOrQueue#(#getIndividualTests#(#)#,#forkPerTest#)#)#;#}#else#{##/* forkMode.getValue().equals(ForkMode.PER_BATCH) */#final#int#count#=#batchTests#.#size#(#)#;##for#(#int#i#=#0#;##i#<#count#;#i#++#)#{#BatchTest#batchtest#=#(#BatchTest#)#batchTests#.#elementAt#(#i#)#;#testLists#.#addAll#(#executeOrQueue#(#batchtest#.#elements#(#)#,#false#)#)#;#}##testLists#.#addAll#(#executeOrQueue#(#tests#.#elements#(#)#,#forkPerTest#)#)#;#}##try#{#Iterator#iter#=#testLists#.#iterator#(#)#;##while#(#iter#.#hasNext#(#)#)#{#List#l#=#(#List#)#iter#.#next#(#)#;##if#(#l#.#size#(#)#==#1#)#{#execute#(#(#JUnitTest#)#l#.#get#(#0#)#)#;#}#else#{#execute#(#l#)#;#}#}#}##finally#{#cleanup#(#)#;#}#}