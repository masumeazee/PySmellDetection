void#execute#(#JUnitTest#arg#)#throws#BuildException#{#JUnitTest#test#=#(#JUnitTest#)#arg#.#clone#(#)#;##// set the default values if not specified##//@todo should be moved to the test class instead.##if#(#test#.#getTodir#(#)#==#null#)#{#test#.#setTodir#(#getProject#(#)#.#resolveFile#(#"."#)#)#;#}##if#(#test#.#getOutfile#(#)#==#null#)#{#test#.#setOutfile#(#"TEST-"#+#test#.#getName#(#)#)#;#}##// execute the test and get the return code#TestResultHolder#result#=#null#;##if#(#!#test#.#getFork#(#)#)#{#result#=#executeInVM#(#test#)#;#}#else#{#ExecuteWatchdog#watchdog#=#createWatchdog#(#)#;#result#=#executeAsForked#(#test#,#watchdog#,#null#)#;##// null watchdog means no timeout, you'd better not check with null#}##actOnTestResult#(#result#,#test#,#"Test "#+#test#.#getName#(#)#)#;#}