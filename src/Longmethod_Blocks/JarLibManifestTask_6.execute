void#execute#(#)#throws#BuildException#{#validate#(#)#;#final#Manifest#manifest#=#new#Manifest#(#)#;#final#Attributes#attributes#=#manifest#.#getMainAttributes#(#)#;#attributes#.#put#(#Attributes#.#Name#.#MANIFEST_VERSION#,#MANIFEST_VERSION#)#;#attributes#.#putValue#(#CREATED_BY#,#"Apache Ant "#+#getProject#(#)#.#getProperty#(#MagicNames#.#ANT_VERSION#)#)#;#appendExtraAttributes#(#attributes#)#;##if#(#null#!=#extension#)#{#Extension#.#addExtension#(#extension#,#attributes#)#;#}##//Add all the dependency data to manifest for dependencies#final#ArrayList#depends#=#toExtensions#(#dependencies#)#;#appendExtensionList#(#attributes#,#Extension#.#EXTENSION_LIST#,#"lib"#,#depends#.#size#(#)#)#;#appendLibraryList#(#attributes#,#"lib"#,#depends#)#;##// Add all the dependency data to manifest for "optional"##//dependencies#final#ArrayList#option#=#toExtensions#(#optionals#)#;#appendExtensionList#(#attributes#,#Extension#.#OPTIONAL_EXTENSION_LIST#,#"opt"#,#option#.#size#(#)#)#;#appendLibraryList#(#attributes#,#"opt"#,#option#)#;##try#{#log#(#"Generating manifest "#+#destFile#.#getAbsoluteFile#(#)#,#Project#.#MSG_INFO#)#;#writeManifest#(#manifest#)#;#}##catch#(#final#IOException#ioe#)#{#throw#new#BuildException#(#ioe#.#getMessage#(#)#,#ioe#)#;#}#}