void#writeServices#(#ZipOutputStream#zOut#)#throws#IOException#{#Iterator#serviceIterator#;#Service#service#;#serviceIterator#=#serviceList#.#iterator#(#)#;##while#(#serviceIterator#.#hasNext#(#)#)#{#service#=#(#Service#)#serviceIterator#.#next#(#)#;#InputStream#is#=#null#;##try#{#is#=#service#.#getAsStream#(#)#;##//stolen from writeManifest#super#.#zipFile#(#is#,#zOut#,#"META-INF/services/"#+#service#.#getType#(#)#,#System#.#currentTimeMillis#(#)#,#null#,#ZipFileSet#.#DEFAULT_FILE_MODE#)#;#}##finally#{##// technically this is unnecessary since##// Service.getAsStream returns a ByteArrayInputStream##// and not closing it wouldn't do any harm.#FileUtils#.#close#(#is#)#;#}#}#}