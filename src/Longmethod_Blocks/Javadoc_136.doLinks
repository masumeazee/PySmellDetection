void#doLinks#(#Commandline#toExecute#)#{##if#(#links#.#size#(#)#!=#0#)#{#for#(#Enumeration#e#=#links#.#elements#(#)#;##e#.#hasMoreElements#(#)#;#)#{#LinkArgument#la#=#(#LinkArgument#)#e#.#nextElement#(#)#;##if#(#la#.#getHref#(#)#==#null#||#la#.#getHref#(#)#.#length#(#)#==#0#)#{#log#(#"No href was given for the link - skipping"#,#Project#.#MSG_VERBOSE#)#;#continue#;#}##String#link#=#null#;##if#(#la#.#shouldResolveLink#(#)#)#{#File#hrefAsFile#=#getProject#(#)#.#resolveFile#(#la#.#getHref#(#)#)#;##if#(#hrefAsFile#.#exists#(#)#)#{#try#{#link#=#FILE_UTILS#.#getFileURL#(#hrefAsFile#)#.#toExternalForm#(#)#;#}##catch#(#MalformedURLException#ex#)#{##// should be impossible#log#(#"Warning: link location was invalid "#+#hrefAsFile#,#Project#.#MSG_WARN#)#;#}#}#}##if#(#link#==#null#)#{##// is the href a valid URL#try#{#URL#base#=#new#URL#(#"file://."#)#;#new#URL#(#base#,#la#.#getHref#(#)#)#;#link#=#la#.#getHref#(#)#;#}##catch#(#MalformedURLException#mue#)#{##// ok - just skip#log#(#"Link href \""#+#la#.#getHref#(#)#+#"\" is not a valid url - skipping link"#,#Project#.#MSG_WARN#)#;#continue#;#}#}##if#(#la#.#isLinkOffline#(#)#)#{#File#packageListLocation#=#la#.#getPackagelistLoc#(#)#;#URL#packageListURL#=#la#.#getPackagelistURL#(#)#;##if#(#packageListLocation#==#null#&&#packageListURL#==#null#)#{#throw#new#BuildException#(#"The package list"#+#" location for link "#+#la#.#getHref#(#)#+#" must be provided "#+#"because the link is "#+#"offline"#)#;#}##if#(#packageListLocation#!=#null#)#{#File#packageListFile#=#new#File#(#packageListLocation#,#"package-list"#)#;##if#(#packageListFile#.#exists#(#)#)#{#try#{#packageListURL#=#FILE_UTILS#.#getFileURL#(#packageListLocation#)#;#}##catch#(#MalformedURLException#ex#)#{#log#(#"Warning: Package list location was "#+#"invalid "#+#packageListLocation#,#Project#.#MSG_WARN#)#;#}#}#else#{#log#(#"Warning: No package list was found at "#+#packageListLocation#,#Project#.#MSG_VERBOSE#)#;#}#}##if#(#packageListURL#!=#null#)#{#toExecute#.#createArgument#(#)#.#setValue#(#"-linkoffline"#)#;#toExecute#.#createArgument#(#)#.#setValue#(#link#)#;#toExecute#.#createArgument#(#)#.#setValue#(#packageListURL#.#toExternalForm#(#)#)#;#}#}#else#{#toExecute#.#createArgument#(#)#.#setValue#(#"-link"#)#;#toExecute#.#createArgument#(#)#.#setValue#(#link#)#;#}#}#}#}