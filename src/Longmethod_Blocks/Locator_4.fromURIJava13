String#fromURIJava13#(#String#uri#)#{##// Fallback method for Java 1.3 or earlier.#URL#url#=#null#;##try#{#url#=#new#URL#(#uri#)#;#}##catch#(#MalformedURLException#emYouEarlEx#)#{##// Ignore malformed exception#}##if#(#url#==#null#||#!#(#"file"#.#equals#(#url#.#getProtocol#(#)#)#)#)#{#throw#new#IllegalArgumentException#(#ERROR_NOT_FILE_URI#+#uri#)#;#}##StringBuffer#buf#=#new#StringBuffer#(#url#.#getHost#(#)#)#;##if#(#buf#.#length#(#)#>#0#)#{#buf#.#insert#(#0#,#File#.#separatorChar#)#.#insert#(#0#,#File#.#separatorChar#)#;#}##String#file#=#url#.#getFile#(#)#;#int#queryPos#=#file#.#indexOf#(#'?'#)#;#buf#.#append#(#(#queryPos#<#0#)#?#file#:#file#.#substring#(#0#,#queryPos#)#)#;#uri#=#buf#.#toString#(#)#.#replace#(#'/'#,#File#.#separatorChar#)#;##if#(#File#.#pathSeparatorChar#==#';'#&&#uri#.#startsWith#(#"\\"#)#&&#uri#.#length#(#)#>#2#&&#Character#.#isLetter#(#uri#.#charAt#(#1#)#)#&&#uri#.#lastIndexOf#(#':'#)#>#-#1#)#{#uri#=#uri#.#substring#(#1#)#;#}##String#path#=#null#;##try#{#path#=#decodeUri#(#uri#)#;##//consider adding the current directory. This is not done when##//the path is a UNC name#String#cwd#=#System#.#getProperty#(#"user.dir"#)#;#int#posi#=#cwd#.#indexOf#(#':'#)#;#boolean#pathStartsWithFileSeparator#=#path#.#startsWith#(#File#.#separator#)#;#boolean#pathStartsWithUNC#=#path#.#startsWith#(#""#+#File#.#separator#+#File#.#separator#)#;##if#(#(#posi#>#0#)#&&#pathStartsWithFileSeparator#&&#!#pathStartsWithUNC#)#{#path#=#cwd#.#substring#(#0#,#posi#+#1#)#+#path#;#}#}##catch#(#UnsupportedEncodingException#exc#)#{##// not sure whether this is clean, but this method is##// declared not to throw exceptions.#throw#new#IllegalStateException#(#"Could not convert URI "#+#uri#+#" to path: "#+#exc#.#getMessage#(#)#)#;#}##return#path#;#}