void#convert#(#String#srcName#,#String#destName#)#throws#BuildException#{#File#srcFile#;##// File to convert#File#destFile#;##// where to put the results##// Build the full file names#srcFile#=#new#File#(#srcDir#,#srcName#)#;#destFile#=#new#File#(#destDir#,#destName#)#;##// Make sure we're not about to clobber something##if#(#srcFile#.#equals#(#destFile#)#)#{#throw#new#BuildException#(#"file "#+#srcFile#+#" would overwrite its self"#)#;#}##// Make intermediate directories if needed##// XXX JDK 1.1 doesn't have File.getParentFile,#String#parentName#=#destFile#.#getParent#(#)#;##if#(#parentName#!=#null#)#{#File#parentFile#=#new#File#(#parentName#)#;##if#(#(#!#parentFile#.#exists#(#)#)#&&#(#!#parentFile#.#mkdirs#(#)#)#)#{#throw#new#BuildException#(#"cannot create parent directory "#+#parentName#)#;#}#}##log#(#"converting "#+#srcName#,#Project#.#MSG_VERBOSE#)#;#Native2AsciiAdapter#ad#=#nestedAdapter#!=#null#?#nestedAdapter#:#Native2AsciiAdapterFactory#.#getAdapter#(#facade#.#getImplementation#(#)#,#this#,#createImplementationClasspath#(#)#)#;##if#(#!#ad#.#convert#(#this#,#srcFile#,#destFile#)#)#{#throw#new#BuildException#(#"conversion failed"#)#;#}#}