void#testCircularReferenceCheck#(#)#{#PatternSet#p#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy"#,#p#)#;#p#.#setRefid#(#new#Reference#(#project#,#"dummy"#)#)#;##try#{#p#.#getIncludePatterns#(#project#)#;#fail#(#"Can make PatternSet a Reference to itself."#)#;#}##catch#(#BuildException#be#)#{#assertEquals#(#"This data type contains a circular reference."#,#be#.#getMessage#(#)#)#;#}##try#{#p#.#getExcludePatterns#(#project#)#;#fail#(#"Can make PatternSet a Reference to itself."#)#;#}##catch#(#BuildException#be#)#{#assertEquals#(#"This data type contains a circular reference."#,#be#.#getMessage#(#)#)#;#}##// dummy1 --> dummy2 --> dummy3 --> dummy1#PatternSet#p1#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy1"#,#p1#)#;#p1#.#setRefid#(#new#Reference#(#project#,#"dummy2"#)#)#;#PatternSet#p2#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy2"#,#p2#)#;#p2#.#setRefid#(#new#Reference#(#project#,#"dummy3"#)#)#;#PatternSet#p3#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy3"#,#p3#)#;#p3#.#setRefid#(#new#Reference#(#project#,#"dummy1"#)#)#;##try#{#p1#.#getIncludePatterns#(#project#)#;#fail#(#"Can make circular reference."#)#;#}##catch#(#BuildException#be#)#{#assertEquals#(#"This data type contains a circular reference."#,#be#.#getMessage#(#)#)#;#}##try#{#p1#.#getExcludePatterns#(#project#)#;#fail#(#"Can make circular reference."#)#;#}##catch#(#BuildException#be#)#{#assertEquals#(#"This data type contains a circular reference."#,#be#.#getMessage#(#)#)#;#}##// dummy1 --> dummy2 --> dummy3##// (which holds patterns "include" and "exclude")#p1#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy1"#,#p1#)#;#p1#.#setRefid#(#new#Reference#(#project#,#"dummy2"#)#)#;#p2#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy2"#,#p2#)#;#p2#.#setRefid#(#new#Reference#(#project#,#"dummy3"#)#)#;#p3#=#new#PatternSet#(#)#;#project#.#addReference#(#"dummy3"#,#p3#)#;#p3#.#setIncludes#(#"include"#)#;#p3#.#createExclude#(#)#.#setName#(#"exclude"#)#;#String#[#]#i#=#p1#.#getIncludePatterns#(#project#)#;#assertEquals#(#"One include pattern buried deep inside a nested patternset structure"#,#1#,#i#.#length#)#;#assertEquals#(#"include"#,#i#[#0#]#)#;#i#=#p3#.#getExcludePatterns#(#project#)#;#assertEquals#(#"One exclude pattern buried deep inside a nested patternset structure"#,#1#,#i#.#length#)#;#assertEquals#(#"exclude"#,#i#[#0#]#)#;#}