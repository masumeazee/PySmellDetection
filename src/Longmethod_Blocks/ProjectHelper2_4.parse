void#parse#(#Project#project#,#Object#source#)#throws#BuildException#{#getImportStack#(#)#.#addElement#(#source#)#;#AntXMLContext#context#=#null#;#context#=#(#AntXMLContext#)#project#.#getReference#(#REFID_CONTEXT#)#;##if#(#context#==#null#)#{#context#=#new#AntXMLContext#(#project#)#;#project#.#addReference#(#REFID_CONTEXT#,#context#)#;#project#.#addReference#(#REFID_TARGETS#,#context#.#getTargets#(#)#)#;#}##if#(#getImportStack#(#)#.#size#(#)#>#1#)#{##// we are in an imported file.#context#.#setIgnoreProjectTag#(#true#)#;#Target#currentTarget#=#context#.#getCurrentTarget#(#)#;#Target#currentImplicit#=#context#.#getImplicitTarget#(#)#;#Map#currentTargets#=#context#.#getCurrentTargets#(#)#;##try#{#Target#newCurrent#=#new#Target#(#)#;#newCurrent#.#setProject#(#project#)#;#newCurrent#.#setName#(#""#)#;#context#.#setCurrentTarget#(#newCurrent#)#;#context#.#setCurrentTargets#(#new#HashMap#(#)#)#;#context#.#setImplicitTarget#(#newCurrent#)#;#parse#(#project#,#source#,#new#RootHandler#(#context#,#mainHandler#)#)#;#newCurrent#.#execute#(#)#;#}##finally#{#context#.#setCurrentTarget#(#currentTarget#)#;#context#.#setImplicitTarget#(#currentImplicit#)#;#context#.#setCurrentTargets#(#currentTargets#)#;#}#}#else#{##// top level file#context#.#setCurrentTargets#(#new#HashMap#(#)#)#;#parse#(#project#,#source#,#new#RootHandler#(#context#,#mainHandler#)#)#;##// Execute the top-level target#context#.#getImplicitTarget#(#)#.#execute#(#)#;#}#}