void#loadResource#(#String#name#)#{#Properties#props#=#new#Properties#(#)#;#log#(#"Resource Loading "#+#name#,#Project#.#MSG_VERBOSE#)#;#InputStream#is#=#null#;#ClassLoader#cL#=#null#;#boolean#cleanup#=#false#;##try#{##if#(#classpath#!=#null#)#{#cleanup#=#true#;#cL#=#getProject#(#)#.#createClassLoader#(#classpath#)#;#}#else#{#cL#=#this#.#getClass#(#)#.#getClassLoader#(#)#;#}##if#(#cL#==#null#)#{#is#=#ClassLoader#.#getSystemResourceAsStream#(#name#)#;#}#else#{#is#=#cL#.#getResourceAsStream#(#name#)#;#}##if#(#is#!=#null#)#{#loadProperties#(#props#,#is#,#name#.#endsWith#(#".xml"#)#)#;#addProperties#(#props#)#;#}#else#{#log#(#"Unable to find resource "#+#name#,#Project#.#MSG_WARN#)#;#}#}##catch#(#IOException#ex#)#{#throw#new#BuildException#(#ex#,#getLocation#(#)#)#;#}##finally#{##if#(#is#!=#null#)#{#try#{#is#.#close#(#)#;#}##catch#(#IOException#e#)#{##// ignore#}#}##if#(#cleanup#&&#cL#!=#null#)#{#(#(#AntClassLoader#)#cL#)#.#cleanup#(#)#;#}#}#}