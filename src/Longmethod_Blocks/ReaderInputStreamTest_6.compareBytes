void#compareBytes#(#String#s#,#String#encoding#)#throws#Exception#{#byte#[#]#expected#=#s#.#getBytes#(#encoding#)#;#ReaderInputStream#r#=#new#ReaderInputStream#(#new#StringReader#(#s#)#,#encoding#)#;##for#(#int#i#=#0#;##i#<#expected#.#length#;#++#i#)#{#int#expect#=#expected#[#i#]#&#0xFF#;#int#read#=#r#.#read#(#)#;##if#(#expect#!=#read#)#{#fail#(#"Mismatch in ReaderInputStream at index "#+#i#+#" expecting "#+#expect#+#" got "#+#read#+#" for string "#+#s#+#" with encoding "#+#encoding#)#;#}#}##if#(#r#.#read#(#)#!=#-#1#)#{#fail#(#"Mismatch in ReaderInputStream - EOF not seen for string "#+#s#+#" with encoding "#+#encoding#)#;#}#}