int#read#(#)#throws#IOException#{##if#(#!#getInitialized#(#)#)#{#initialize#(#)#;#setInitialized#(#true#)#;#}##if#(#replaceIndex#!=#-#1#)#{#final#int#ch#=#replaceData#.#charAt#(#replaceIndex#++#)#;##if#(#replaceIndex#>=#replaceData#.#length#(#)#)#{#replaceIndex#=#-#1#;#}##return#ch#;#}##int#ch#=#getNextChar#(#)#;##if#(#ch#==#beginToken#)#{#final#StringBuffer#key#=#new#StringBuffer#(#""#)#;##do#{#ch#=#getNextChar#(#)#;##if#(#ch#!=#-#1#)#{#key#.#append#(#(#char#)#ch#)#;#}#else#{#break#;#}#}##while#(#ch#!=#endToken#)#;##if#(#ch#==#-#1#)#{##if#(#queuedData#==#null#||#queueIndex#==#-#1#)#{#queuedData#=#key#.#toString#(#)#;#}#else#{#queuedData#=#key#.#toString#(#)#+#queuedData#.#substring#(#queueIndex#)#;#}##if#(#queuedData#.#length#(#)#>#0#)#{#queueIndex#=#0#;#}#else#{#queueIndex#=#-#1#;#}##return#beginToken#;#}#else#{#key#.#setLength#(#key#.#length#(#)#-#1#)#;#final#String#replaceWith#=#(#String#)#hash#.#get#(#key#.#toString#(#)#)#;##if#(#replaceWith#!=#null#)#{##if#(#replaceWith#.#length#(#)#>#0#)#{#replaceData#=#replaceWith#;#replaceIndex#=#0#;#}##return#read#(#)#;#}#else#{#String#newData#=#key#.#toString#(#)#+#endToken#;##if#(#queuedData#==#null#||#queueIndex#==#-#1#)#{#queuedData#=#newData#;#}#else#{#queuedData#=#newData#+#queuedData#.#substring#(#queueIndex#)#;#}##queueIndex#=#0#;##return#beginToken#;#}#}#}##return#ch#;#}