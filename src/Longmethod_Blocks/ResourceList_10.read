ResourceCollection#read#(#Resource#r#)#{#BufferedInputStream#bis#=#null#;##try#{#bis#=#new#BufferedInputStream#(#r#.#getInputStream#(#)#)#;#Reader#input#=#null#;##if#(#encoding#==#null#)#{#input#=#new#InputStreamReader#(#bis#)#;#}#else#{#input#=#new#InputStreamReader#(#bis#,#encoding#)#;#}##ChainReaderHelper#crh#=#new#ChainReaderHelper#(#)#;#crh#.#setPrimaryReader#(#input#)#;#crh#.#setFilterChains#(#filterChains#)#;#crh#.#setProject#(#getProject#(#)#)#;#BufferedReader#reader#=#new#BufferedReader#(#crh#.#getAssembledReader#(#)#)#;#Union#streamResources#=#new#Union#(#)#;#streamResources#.#setCache#(#true#)#;#String#line#=#null#;##while#(#(#line#=#reader#.#readLine#(#)#)#!=#null#)#{#streamResources#.#add#(#parse#(#line#)#)#;#}##return#streamResources#;#}##catch#(#final#IOException#ioe#)#{#throw#new#BuildException#(#"Unable to read resource "#+#r#.#getName#(#)#+#": "#+#ioe#,#ioe#,#getLocation#(#)#)#;#}##finally#{#FileUtils#.#close#(#bis#)#;#}#}