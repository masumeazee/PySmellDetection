PlanarImage#performScale#(#PlanarImage#image#)#{#ParameterBlock#pb#=#new#ParameterBlock#(#)#;#pb#.#addSource#(#image#)#;#float#xFl#=#getWidth#(#)#;#float#yFl#=#getHeight#(#)#;##if#(#!#xPercent#)#{#xFl#=#(#xFl#/#image#.#getWidth#(#)#)#;#}##if#(#!#yPercent#)#{#yFl#=#(#yFl#/#image#.#getHeight#(#)#)#;#}##if#(#"width"#.#equals#(#proportions#)#)#{#yFl#=#xFl#;#}#else##if#(#"height"#.#equals#(#proportions#)#)#{#xFl#=#yFl#;#}#else##if#(#"fit"#.#equals#(#proportions#)#)#{#yFl#=#Math#.#min#(#xFl#,#yFl#)#;#xFl#=#yFl#;#}#else##if#(#"cover"#.#equals#(#proportions#)#)#{#yFl#=#Math#.#max#(#xFl#,#yFl#)#;#xFl#=#yFl#;#}##pb#.#add#(#new#Float#(#xFl#)#)#;#pb#.#add#(#new#Float#(#yFl#)#)#;#log#(#"\tScaling to "#+#(#xFl#*#HUNDRED#)#+#"% x "#+#(#yFl#*#HUNDRED#)#+#"%"#)#;##return#JAI#.#create#(#"scale"#,#pb#)#;#}