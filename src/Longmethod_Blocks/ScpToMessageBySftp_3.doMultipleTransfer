void#doMultipleTransfer#(#)#throws#IOException#,#JSchException#{#ChannelSftp#channel#=#openSftpChannel#(#)#;##try#{#channel#.#connect#(#)#;##try#{#try#{#channel#.#stat#(#remotePath#)#;#}##catch#(#SftpException#e#)#{##if#(#e#.#id#==#ChannelSftp#.#SSH_FX_NO_SUCH_FILE#)#{##// dir does not exist.#channel#.#mkdir#(#remotePath#)#;#}#else#{#throw#new#JSchException#(#"failed to access remote dir '"#+#remotePath#+#"'"#,#e#)#;#}#}##channel#.#cd#(#remotePath#)#;#}##catch#(#SftpException#e#)#{#throw#new#JSchException#(#"Could not CD to '"#+#remotePath#+#"' - "#+#e#.#toString#(#)#,#e#)#;#}##Directory#current#=#null#;##try#{#for#(#Iterator#i#=#directoryList#.#iterator#(#)#;##i#.#hasNext#(#)#;#)#{#current#=#(#Directory#)#i#.#next#(#)#;##if#(#getVerbose#(#)#)#{#log#(#"Sending directory "#+#current#)#;#}##sendDirectory#(#channel#,#current#)#;#}#}##catch#(#SftpException#e#)#{#String#msg#=#"Error sending directory"#;##if#(#current#!=#null#&&#current#.#getDirectory#(#)#!=#null#)#{#msg#+=#" '"#+#current#.#getDirectory#(#)#.#getName#(#)#+#"'"#;#}##throw#new#JSchException#(#msg#,#e#)#;#}#}##finally#{##if#(#channel#!=#null#)#{#channel#.#disconnect#(#)#;#}#}#}