void#sendDirectoryToRemote#(#Directory#directory#,#InputStream#in#,#OutputStream#out#)#throws#IOException#{#String#command#=#"D0755 0 "#;#command#+=#directory#.#getDirectory#(#)#.#getName#(#)#;#command#+=#"\n"#;#out#.#write#(#command#.#getBytes#(#)#)#;#out#.#flush#(#)#;#waitForAck#(#in#)#;#sendDirectory#(#directory#,#in#,#out#)#;#out#.#write#(#"E\n"#.#getBytes#(#)#)#;#out#.#flush#(#)#;#waitForAck#(#in#)#;#}