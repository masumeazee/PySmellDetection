String#[#]#restrict#(#String#[#]#files#,#File#srcDir#,#File#destDir#,#FileNameMapper#mapper#,#long#granularity#)#{##// record destdir for later use in getResource#this#.#destDir#=#destDir#;#Vector#v#=#new#Vector#(#)#;##for#(#int#i#=#0#;##i#<#files#.#length#;#i#++#)#{#final#String#name#=#files#[#i#]#;#v#.#addElement#(#new#FileResource#(#srcDir#,#name#)#{#public#String#getName#(#)#{##return#name#;#}#}#)#;#}##Resource#[#]#sourceresources#=#new#Resource#[#v#.#size#(#)#]#;#v#.#copyInto#(#sourceresources#)#;##// build the list of sources which are out of date with##// respect to the target#Resource#[#]#outofdate#=#ResourceUtils#.#selectOutOfDateSources#(#task#,#sourceresources#,#mapper#,#this#,#granularity#)#;#String#[#]#result#=#new#String#[#outofdate#.#length#]#;##for#(#int#counter#=#0#;##counter#<#outofdate#.#length#;#counter#++#)#{#result#[#counter#]#=#outofdate#[#counter#]#.#getName#(#)#;#}##return#result#;#}