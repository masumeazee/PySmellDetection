Properties#loadLinks#(#Vector#v#)#{#Properties#finalList#=#new#Properties#(#)#;##// loop through the supplied file sets:#for#(#int#i#=#0#;##i#<#v#.#size#(#)#;#i#++#)#{#FileSet#fs#=#(#FileSet#)#v#.#elementAt#(#i#)#;#DirectoryScanner#ds#=#new#DirectoryScanner#(#)#;#fs#.#setupDirectoryScanner#(#ds#,#getProject#(#)#)#;#ds#.#setFollowSymlinks#(#false#)#;#ds#.#scan#(#)#;#String#[#]#incs#=#ds#.#getIncludedFiles#(#)#;#File#dir#=#fs#.#getDir#(#getProject#(#)#)#;##// load included files as properties files:#for#(#int#j#=#0#;##j#<#incs#.#length#;#j#++#)#{#File#inc#=#new#File#(#dir#,#incs#[#j#]#)#;#File#pf#=#inc#.#getParentFile#(#)#;#Properties#lnks#=#new#Properties#(#)#;##try#{#lnks#.#load#(#new#BufferedInputStream#(#new#FileInputStream#(#inc#)#)#)#;#pf#=#pf#.#getCanonicalFile#(#)#;#}##catch#(#FileNotFoundException#fnfe#)#{#handleError#(#"Unable to find "#+#incs#[#j#]#+#"; skipping it."#)#;#continue#;#}##catch#(#IOException#ioe#)#{#handleError#(#"Unable to open "#+#incs#[#j#]#+#" or its parent dir; skipping it."#)#;#continue#;#}##lnks#.#list#(#new#PrintStream#(#new#LogOutputStream#(#this#,#Project#.#MSG_INFO#)#)#)#;##// Write the contents to our master list of links##// This method assumes that all links are defined in##// terms of absolute paths, or paths relative to the##// working directory:#for#(#Iterator#kitr#=#lnks#.#keySet#(#)#.#iterator#(#)#;##kitr#.#hasNext#(#)#;#)#{#String#key#=#(#String#)#kitr#.#next#(#)#;#finalList#.#put#(#new#File#(#pf#,#key#)#.#getAbsolutePath#(#)#,#lnks#.#getProperty#(#key#)#)#;#}#}#}##return#finalList#;#}