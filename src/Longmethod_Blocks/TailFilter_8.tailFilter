String#tailFilter#(#String#line#)#{##if#(#!#completedReadAhead#)#{##if#(#line#!=#null#)#{#lineList#.#add#(#line#)#;##if#(#lines#==#-#1#)#{##if#(#lineList#.#size#(#)#>#skip#)#{##return#(#String#)#lineList#.#removeFirst#(#)#;#}#}#else#{#long#linesToKeep#=#lines#+#(#skip#>#0#?#skip#:#0#)#;##if#(#linesToKeep#<#lineList#.#size#(#)#)#{#lineList#.#removeFirst#(#)#;#}#}##return#""#;#}##completedReadAhead#=#true#;##if#(#skip#>#0#)#{#for#(#int#i#=#0#;##i#<#skip#;#++#i#)#{#lineList#.#removeLast#(#)#;#}#}##if#(#lines#>#-#1#)#{#while#(#lineList#.#size#(#)#>#lines#)#{#lineList#.#removeFirst#(#)#;#}#}#}##if#(#lineList#.#size#(#)#>#0#)#{##return#(#String#)#lineList#.#removeFirst#(#)#;#}##return#null#;#}