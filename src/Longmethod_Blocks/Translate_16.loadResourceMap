void#loadResourceMap#(#FileInputStream#ins#)#throws#BuildException#{#try#{#BufferedReader#in#=#null#;#InputStreamReader#isr#=#new#InputStreamReader#(#ins#,#bundleEncoding#)#;#in#=#new#BufferedReader#(#isr#)#;#String#line#=#null#;##while#(#(#line#=#in#.#readLine#(#)#)#!=#null#)#{##//So long as the line isn't empty and isn't a comment...##if#(#line#.#trim#(#)#.#length#(#)#>#1#&&#'#'#!=#line#.#charAt#(#0#)#&&#'!'#!=#line#.#charAt#(#0#)#)#{##//Legal Key-Value separators are :, = and white space.#int#sepIndex#=#line#.#indexOf#(#'='#)#;##if#(#-#1#==#sepIndex#)#{#sepIndex#=#line#.#indexOf#(#':'#)#;#}##if#(#-#1#==#sepIndex#)#{#for#(#int#k#=#0#;##k#<#line#.#length#(#)#;#k#++#)#{##if#(#Character#.#isSpaceChar#(#line#.#charAt#(#k#)#)#)#{#sepIndex#=#k#;#break#;#}#}#}##//Only if we do have a key is there going to be a value##if#(#-#1#!=#sepIndex#)#{#String#key#=#line#.#substring#(#0#,#sepIndex#)#.#trim#(#)#;#String#value#=#line#.#substring#(#sepIndex#+#1#)#.#trim#(#)#;##//Handle line continuations, if any#while#(#value#.#endsWith#(#"\\"#)#)#{#value#=#value#.#substring#(#0#,#value#.#length#(#)#-#1#)#;#line#=#in#.#readLine#(#)#;##if#(#line#!=#null#)#{#value#=#value#+#line#.#trim#(#)#;#}#else#{#break#;#}#}##if#(#key#.#length#(#)#>#0#)#{##//Has key already been loaded into resourceMap?##if#(#resourceMap#.#get#(#key#)#==#null#)#{#resourceMap#.#put#(#key#,#value#)#;#}#}#}#}#}##if#(#in#!=#null#)#{#in#.#close#(#)#;#}#}##catch#(#IOException#ioe#)#{#throw#new#BuildException#(#ioe#.#getMessage#(#)#,#getLocation#(#)#)#;#}#}