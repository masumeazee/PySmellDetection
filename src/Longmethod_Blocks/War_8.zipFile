void#zipFile#(#File#file#,#ZipOutputStream#zOut#,#String#vPath#,#int#mode#)#throws#IOException#{##// If the file being added is WEB-INF/web.xml, we warn if it's##// not the one specified in the "webxml" attribute - or if##// it's being added twice, meaning the same file is specified##// by the "webxml" attribute and in a <fileset> element.#String#vPathLowerCase#=#vPath#.#toLowerCase#(#Locale#.#ENGLISH#)#;##//by default, we add the file.#boolean#addFile#=#true#;##if#(#XML_DESCRIPTOR_PATH_LC#.#equals#(#vPathLowerCase#)#)#{##//a web.xml file was found. See if it is a duplicate or not##if#(#addedWebXmlFile#!=#null#)#{##//a second web.xml file, so skip it#addFile#=#false#;##//check to see if we warn or not##if#(#!#FILE_UTILS#.#fileNameEquals#(#addedWebXmlFile#,#file#)#)#{#logWhenWriting#(#"Warning: selected "#+#archiveType#+#" files include a second "#+#XML_DESCRIPTOR_PATH#+#" which will be ignored.\n"#+#"The duplicate entry is at "#+#file#+#'\n'#+#"The file that will be used is "#+#addedWebXmlFile#,#Project#.#MSG_WARN#)#;#}#}#else#{##//no added file, yet#addedWebXmlFile#=#file#;##//there is no web.xml file, so add it#addFile#=#true#;##//and remember that we did#deploymentDescriptor#=#file#;#}#}##if#(#addFile#)#{#super#.#zipFile#(#file#,#zOut#,#vPath#,#mode#)#;#}#}