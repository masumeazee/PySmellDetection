void#messageLogged#(#BuildEvent#event#)#{#int#priority#=#event#.#getPriority#(#)#;##if#(#priority#>#msgOutputLevel#)#{##return#;#}##Element#messageElement#=#doc#.#createElement#(#MESSAGE_TAG#)#;#String#name#=#"debug"#;##switch#(#priority#)#{#case#Project#.#MSG_ERR#:#name#=#"error"#;#break#;#case#Project#.#MSG_WARN#:#name#=#"warn"#;#break#;#case#Project#.#MSG_INFO#:#name#=#"info"#;#break#;#default#:#name#=#"debug"#;##break#;#}##messageElement#.#setAttribute#(#PRIORITY_ATTR#,#name#)#;#Throwable#ex#=#event#.#getException#(#)#;##if#(#Project#.#MSG_DEBUG#<=#msgOutputLevel#&&#ex#!=#null#)#{#Text#errText#=#doc#.#createCDATASection#(#StringUtils#.#getStackTrace#(#ex#)#)#;#Element#stacktrace#=#doc#.#createElement#(#STACKTRACE_TAG#)#;#stacktrace#.#appendChild#(#errText#)#;#synchronizedAppend#(#buildElement#.#element#,#stacktrace#)#;#}##Text#messageText#=#doc#.#createCDATASection#(#event#.#getMessage#(#)#)#;#messageElement#.#appendChild#(#messageText#)#;#TimedElement#parentElement#=#null#;#Task#task#=#event#.#getTask#(#)#;#Target#target#=#event#.#getTarget#(#)#;##if#(#task#!=#null#)#{#parentElement#=#getTaskElement#(#task#)#;#}##if#(#parentElement#==#null#&&#target#!=#null#)#{#parentElement#=#(#TimedElement#)#targets#.#get#(#target#)#;#}##if#(#parentElement#!=#null#)#{#synchronizedAppend#(#parentElement#.#element#,#messageElement#)#;#}#else#{#synchronizedAppend#(#buildElement#.#element#,#messageElement#)#;#}#}