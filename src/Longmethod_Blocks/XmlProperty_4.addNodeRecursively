void#addNodeRecursively#(#Node#node#,#String#prefix#,#Object#container#)#{##// Set the prefix for this node to include its tag name.#String#nodePrefix#=#prefix#;##if#(#node#.#getNodeType#(#)#!=#Node#.#TEXT_NODE#)#{##if#(#prefix#.#trim#(#)#.#length#(#)#>#0#)#{#nodePrefix#+=#"."#;#}##nodePrefix#+=#node#.#getNodeName#(#)#;#}##// Pass the container to the processing of this node,#Object#nodeObject#=#processNode#(#node#,#nodePrefix#,#container#)#;##// now, iterate through children.##if#(#node#.#hasChildNodes#(#)#)#{#NodeList#nodeChildren#=#node#.#getChildNodes#(#)#;#int#numChildren#=#nodeChildren#.#getLength#(#)#;##for#(#int#i#=#0#;##i#<#numChildren#;#i#++#)#{##// For each child, pass the object added by##// processNode to its children -- in other word, each##// object can pass information along to its children.#addNodeRecursively#(#nodeChildren#.#item#(#i#)#,#nodePrefix#,#nodeObject#)#;#}#}#}