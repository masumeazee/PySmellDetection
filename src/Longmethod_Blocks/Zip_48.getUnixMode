int#getUnixMode#(#Resource#r#,#ZipFile#zf#,#int#defaultMode#)#throws#IOException#{#int#unixMode#=#defaultMode#;##if#(#zf#!=#null#)#{#ZipEntry#ze#=#zf#.#getEntry#(#r#.#getName#(#)#)#;#unixMode#=#ze#.#getUnixMode#(#)#;##if#(#(#unixMode#==#0#||#unixMode#==#UnixStat#.#DIR_FLAG#)#&&#!#preserve0Permissions#)#{#unixMode#=#defaultMode#;#}#}#else##if#(#r#instanceof#ArchiveResource#)#{#unixMode#=#(#(#ArchiveResource#)#r#)#.#getMode#(#)#;#}##return#unixMode#;#}