Resource#[#]#[#]#grabResources#(#FileSet#[#]#filesets#)#{#Resource#[#]#[#]#result#=#new#Resource#[#filesets#.#length#]#[#]#;##for#(#int#i#=#0#;##i#<#filesets#.#length#;#i#++#)#{#boolean#skipEmptyNames#=#true#;##if#(#filesets#[#i#]#instanceof#ZipFileSet#)#{#ZipFileSet#zfs#=#(#ZipFileSet#)#filesets#[#i#]#;#skipEmptyNames#=#zfs#.#getPrefix#(#getProject#(#)#)#.#equals#(#""#)#&&#zfs#.#getFullpath#(#getProject#(#)#)#.#equals#(#""#)#;#}##DirectoryScanner#rs#=#filesets#[#i#]#.#getDirectoryScanner#(#getProject#(#)#)#;##if#(#rs#instanceof#ZipScanner#)#{#(#(#ZipScanner#)#rs#)#.#setEncoding#(#encoding#)#;#}##Vector#resources#=#new#Vector#(#)#;##if#(#!#doFilesonly#)#{#String#[#]#directories#=#rs#.#getIncludedDirectories#(#)#;##for#(#int#j#=#0#;##j#<#directories#.#length#;#j#++#)#{##if#(#!#""#.#equals#(#directories#[#j#]#)#||#!#skipEmptyNames#)#{#resources#.#addElement#(#rs#.#getResource#(#directories#[#j#]#)#)#;#}#}#}##String#[#]#files#=#rs#.#getIncludedFiles#(#)#;##for#(#int#j#=#0#;##j#<#files#.#length#;#j#++#)#{##if#(#!#""#.#equals#(#files#[#j#]#)#||#!#skipEmptyNames#)#{#resources#.#addElement#(#rs#.#getResource#(#files#[#j#]#)#)#;#}#}##result#[#i#]#=#new#Resource#[#resources#.#size#(#)#]#;#resources#.#copyInto#(#result#[#i#]#)#;#}##return#result#;#}