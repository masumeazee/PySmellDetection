void#addParentDirs#(#File#baseDir#,#String#entry#,#ZipOutputStream#zOut#,#String#prefix#,#int#dirMode#)#throws#IOException#{##if#(#!#doFilesonly#)#{#Stack#directories#=#new#Stack#(#)#;#int#slashPos#=#entry#.#length#(#)#;##while#(#(#slashPos#=#entry#.#lastIndexOf#(#'/'#,#slashPos#-#1#)#)#!=#-#1#)#{#String#dir#=#entry#.#substring#(#0#,#slashPos#+#1#)#;##if#(#addedDirs#.#get#(#prefix#+#dir#)#!=#null#)#{#break#;#}##directories#.#push#(#dir#)#;#}##while#(#!#directories#.#isEmpty#(#)#)#{#String#dir#=#(#String#)#directories#.#pop#(#)#;#File#f#=#null#;##if#(#baseDir#!=#null#)#{#f#=#new#File#(#baseDir#,#dir#)#;#}#else#{#f#=#new#File#(#dir#)#;#}##zipDir#(#f#,#zOut#,#prefix#+#dir#,#dirMode#)#;#}#}#}