void#setMessageOutputLevel#(#int#level#)#{#this#.#msgOutputLevel#=#level#;#}##void#setOutputPrintStream#(#PrintStream#output#)#{#this#.#out#=#new#PrintStream#(#output#,#true#)#;#}##void#setErrorPrintStream#(#PrintStream#err#)#{#this#.#err#=#new#PrintStream#(#err#,#true#)#;#}##void#setEmacsMode#(#boolean#emacsMode#)#{#this#.#emacsMode#=#emacsMode#;#}##void#buildStarted#(#BuildEvent#event#)#{#startTime#=#System#.#currentTimeMillis#(#)#;#}##void#throwableMessage#(#StringBuffer#m#,#Throwable#error#,#boolean#verbose#)#{#while#(#error#instanceof#BuildException#)#{#// #43398#Throwable#cause#=#error#.#getCause#(#)#;#if#(#cause#==#null#)#{#break#;#}#String#msg1#=#error#.#toString#(#)#;#String#msg2#=#cause#.#toString#(#)#;#if#(#msg1#.#endsWith#(#msg2#)#)#{#m#.#append#(#msg1#.#substring#(#0#,#msg1#.#length#(#)#-#msg2#.#length#(#)#)#)#;#error#=#cause#;#}#else#{#break#;#}#}#if#(#verbose#||#!#(#error#instanceof#BuildException#)#)#{#m#.#append#(#StringUtils#.#getStackTrace#(#error#)#)#;#}#else#{#m#.#append#(#error#)#.#append#(#lSep#)#;#}#}##void#buildFinished#(#BuildEvent#event#)#{#Throwable#error#=#event#.#getException#(#)#;#StringBuffer#message#=#new#StringBuffer#(#)#;#if#(#error#==#null#)#{#message#.#append#(#StringUtils#.#LINE_SEP#)#;#message#.#append#(#getBuildSuccessfulMessage#(#)#)#;#}#else#{#message#.#append#(#StringUtils#.#LINE_SEP#)#;#message#.#append#(#getBuildFailedMessage#(#)#)#;#message#.#append#(#StringUtils#.#LINE_SEP#)#;#throwableMessage#(#message#,#error#,#Project#.#MSG_VERBOSE#<=#msgOutputLevel#)#;#}#message#.#append#(#StringUtils#.#LINE_SEP#)#;#message#.#append#(#"Total time: "#)#;#message#.#append#(#formatTime#(#System#.#currentTimeMillis#(#)#-#startTime#)#)#;#String#msg#=#message#.#toString#(#)#;#if#(#error#==#null#)#{#printMessage#(#msg#,#out#,#Project#.#MSG_VERBOSE#)#;#}#else#{#printMessage#(#msg#,#err#,#Project#.#MSG_ERR#)#;#}#log#(#msg#)#;#}##String#getBuildFailedMessage#(#)#{#return#"BUILD FAILED"#;#}##String#getBuildSuccessfulMessage#(#)#{#return#"BUILD SUCCESSFUL"#;#}##void#targetStarted#(#BuildEvent#event#)#{#if#(#Project#.#MSG_INFO#<=#msgOutputLevel#&&#!#event#.#getTarget#(#)#.#getName#(#)#.#equals#(#""#)#)#{#String#msg#=#StringUtils#.#LINE_SEP#+#event#.#getTarget#(#)#.#getName#(#)#+#":"#;#printMessage#(#msg#,#out#,#event#.#getPriority#(#)#)#;#log#(#msg#)#;#}#}##void#targetFinished#(#BuildEvent#event#)#{#}##void#taskStarted#(#BuildEvent#event#)#{#}##void#taskFinished#(#BuildEvent#event#)#{#}##void#messageLogged#(#BuildEvent#event#)#{#int#priority#=#event#.#getPriority#(#)#;#// Filter out messages based on priority#if#(#priority#<=#msgOutputLevel#)#{#StringBuffer#message#=#new#StringBuffer#(#)#;#if#(#event#.#getTask#(#)#!=#null#&&#!#emacsMode#)#{#// Print out the name of the task if we're in one#String#name#=#event#.#getTask#(#)#.#getTaskName#(#)#;#String#label#=#"["#+#name#+#"] "#;#int#size#=#LEFT_COLUMN_SIZE#-#label#.#length#(#)#;#StringBuffer#tmp#=#new#StringBuffer#(#)#;#for#(#int#i#=#0#;#i#<#size#;#i#++#)#{#tmp#.#append#(#" "#)#;#}#tmp#.#append#(#label#)#;#label#=#tmp#.#toString#(#)#;#BufferedReader#r#=#null#;#try#{#r#=#new#BufferedReader#(#new#StringReader#(#event#.#getMessage#(#)#)#)#;#String#line#=#r#.#readLine#(#)#;#boolean#first#=#true#;#do#{#if#(#first#)#{#if#(#line#==#null#)#{#message#.#append#(#label#)#;#break#;#}#}#else#{#message#.#append#(#StringUtils#.#LINE_SEP#)#;#}#first#=#false#;#message#.#append#(#label#)#.#append#(#line#)#;#line#=#r#.#readLine#(#)#;#}#while#(#line#!=#null#)#;#}#catch#(#IOException#e#)#{#// shouldn't be possible#message#.#append#(#label#)#.#append#(#event#.#getMessage#(#)#)#;#}#finally#{#if#(#r#!=#null#)#{#FileUtils#.#close#(#r#)#;#}#}#}#else#{#//emacs mode or there is no task#message#.#append#(#event#.#getMessage#(#)#)#;#}#Throwable#ex#=#event#.#getException#(#)#;#if#(#Project#.#MSG_DEBUG#<=#msgOutputLevel#&&#ex#!=#null#)#{#message#.#append#(#StringUtils#.#getStackTrace#(#ex#)#)#;#}#String#msg#=#message#.#toString#(#)#;#if#(#priority#!=#Project#.#MSG_ERR#)#{#printMessage#(#msg#,#out#,#priority#)#;#}#else#{#printMessage#(#msg#,#err#,#priority#)#;#}#log#(#msg#)#;#}#}##String#formatTime#(#final#long#millis#)#{#return#DateUtils#.#formatElapsedTime#(#millis#)#;#}##void#printMessage#(#final#String#message#,#final#PrintStream#stream#,#final#int#priority#)#{#stream#.#println#(#message#)#;#}##void#log#(#String#message#)#{#}##String#getTimestamp#(#)#{#Date#date#=#new#Date#(#System#.#currentTimeMillis#(#)#)#;#DateFormat#formatter#=#DateFormat#.#getDateTimeInstance#(#DateFormat#.#SHORT#,#DateFormat#.#SHORT#)#;#String#finishTime#=#formatter#.#format#(#date#)#;#return#finishTime#;#}##String#extractProjectName#(#BuildEvent#event#)#{#Project#project#=#event#.#getProject#(#)#;#return#(#project#!=#null#)#?#project#.#getName#(#)#:#null#;#}##