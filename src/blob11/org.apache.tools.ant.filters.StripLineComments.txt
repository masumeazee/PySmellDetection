int#read#(#)#throws#IOException#{#if#(#!#getInitialized#(#)#)#{#initialize#(#)#;#setInitialized#(#true#)#;#}#int#ch#=#-#1#;#if#(#line#!=#null#)#{#ch#=#line#.#charAt#(#0#)#;#if#(#line#.#length#(#)#==#1#)#{#line#=#null#;#}#else#{#line#=#line#.#substring#(#1#)#;#}#}#else#{#line#=#readLine#(#)#;#final#int#commentsSize#=#comments#.#size#(#)#;#while#(#line#!=#null#)#{#for#(#int#i#=#0#;#i#<#commentsSize#;#i#++#)#{#String#comment#=#(#String#)#comments#.#elementAt#(#i#)#;#if#(#line#.#startsWith#(#comment#)#)#{#line#=#null#;#break#;#}#}#if#(#line#==#null#)#{#// line started with comment#line#=#readLine#(#)#;#}#else#{#break#;#}#}#if#(#line#!=#null#)#{#return#read#(#)#;#}#}#return#ch#;#}##void#addConfiguredComment#(#final#Comment#comment#)#{#comments#.#addElement#(#comment#.#getValue#(#)#)#;#}##void#setComments#(#final#Vector#comments#)#{#this#.#comments#=#comments#;#}##Vector#getComments#(#)#{#return#comments#;#}##Reader#chain#(#final#Reader#rdr#)#{#StripLineComments#newFilter#=#new#StripLineComments#(#rdr#)#;#newFilter#.#setComments#(#getComments#(#)#)#;#newFilter#.#setInitialized#(#true#)#;#return#newFilter#;#}##void#initialize#(#)#{#Parameter#[#]#params#=#getParameters#(#)#;#if#(#params#!=#null#)#{#for#(#int#i#=#0#;#i#<#params#.#length#;#i#++#)#{#if#(#COMMENTS_KEY#.#equals#(#params#[#i#]#.#getType#(#)#)#)#{#comments#.#addElement#(#params#[#i#]#.#getValue#(#)#)#;#}#}#}#}##void#setValue#(#String#comment#)#{#if#(#value#!=#null#)#{#throw#new#IllegalStateException#(#"Comment value already set."#)#;#}#value#=#comment#;#}##String#getValue#(#)#{#return#value#;#}##void#addText#(#String#comment#)#{#setValue#(#comment#)#;#}##