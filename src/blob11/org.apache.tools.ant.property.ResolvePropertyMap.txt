Object#getProperty#(#String#name#)#{#if#(#seen#.#contains#(#name#)#)#{#throw#new#BuildException#(#"Property "#+#name#+#" was circularly "#+#"defined."#)#;#}#// Note: the master overrides (even if the name is subsequently#//       prefixed)#Object#masterProperty#=#master#.#getProperty#(#name#)#;#if#(#masterProperty#!=#null#)#{#return#masterProperty#;#}#try#{#seen#.#add#(#name#)#;#return#parseProperties#.#parseProperties#(#(#String#)#map#.#get#(#name#)#)#;#}#finally#{#seen#.#remove#(#name#)#;#}#}##void#resolveAllProperties#(#Map#map#)#{#this#.#map#=#map#;#// The map gets used in the getProperty callback#for#(#Iterator#i#=#map#.#keySet#(#)#.#iterator#(#)#;#i#.#hasNext#(#)#;#)#{#String#key#=#(#String#)#i#.#next#(#)#;#Object#result#=#getProperty#(#key#)#;#String#value#=#result#==#null#?#""#:#result#.#toString#(#)#;#map#.#put#(#key#,#value#)#;#}#}##