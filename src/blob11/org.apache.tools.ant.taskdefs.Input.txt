void#setRefid#(#String#refid#)#{#this#.#refid#=#refid#;#}##String#getRefid#(#)#{#return#refid#;#}##void#setClassname#(#String#classname#)#{#this#.#classname#=#classname#;#}##String#getClassname#(#)#{#return#classname#;#}##void#setType#(#HandlerType#type#)#{#this#.#type#=#type#;#}##HandlerType#getType#(#)#{#return#type#;#}##InputHandler#getInputHandler#(#)#{#if#(#type#!=#null#)#{#return#type#.#getInputHandler#(#)#;#}#if#(#refid#!=#null#)#{#try#{#return#(#InputHandler#)#(#getProject#(#)#.#getReference#(#refid#)#)#;#}#catch#(#ClassCastException#e#)#{#throw#new#BuildException#(#refid#+#" does not denote an InputHandler"#,#e#)#;#}#}#if#(#classname#!=#null#)#{#return#(#InputHandler#)#(#ClasspathUtils#.#newInstance#(#classname#,#createLoader#(#)#,#InputHandler#.#class#)#)#;#}#throw#new#BuildException#(#"Must specify refid, classname or type"#)#;#}##String#[#]#getValues#(#)#{#return#VALUES#;#}##InputHandler#getInputHandler#(#)#{#return#HANDLERS#[#getIndex#(#)#]#;#}##void#setValidargs#(#String#validargs#)#{#this#.#validargs#=#validargs#;#}##void#setAddproperty#(#String#addproperty#)#{#this#.#addproperty#=#addproperty#;#}##void#setMessage#(#String#message#)#{#this#.#message#=#message#;#messageAttribute#=#true#;#}##void#setDefaultvalue#(#String#defaultvalue#)#{#this#.#defaultvalue#=#defaultvalue#;#}##void#addText#(#String#msg#)#{#if#(#messageAttribute#&&#""#.#equals#(#msg#.#trim#(#)#)#)#{#return#;#}#message#+=#getProject#(#)#.#replaceProperties#(#msg#)#;#}##void#execute#(#)#throws#BuildException#{#if#(#addproperty#!=#null#&&#getProject#(#)#.#getProperty#(#addproperty#)#!=#null#)#{#log#(#"skipping "#+#getTaskName#(#)#+#" as property "#+#addproperty#+#" has already been set."#)#;#return#;#}#InputRequest#request#=#null#;#if#(#validargs#!=#null#)#{#Vector#accept#=#StringUtils#.#split#(#validargs#,#','#)#;#request#=#new#MultipleChoiceInputRequest#(#message#,#accept#)#;#}#else#{#request#=#new#InputRequest#(#message#)#;#}#request#.#setDefaultValue#(#defaultvalue#)#;#InputHandler#h#=#handler#==#null#?#getProject#(#)#.#getInputHandler#(#)#:#handler#.#getInputHandler#(#)#;#h#.#handleInput#(#request#)#;#String#value#=#request#.#getInput#(#)#;#if#(#(#value#==#null#||#value#.#trim#(#)#.#length#(#)#==#0#)#&&#defaultvalue#!=#null#)#{#value#=#defaultvalue#;#}#if#(#addproperty#!=#null#&&#value#!=#null#)#{#getProject#(#)#.#setNewProperty#(#addproperty#,#value#)#;#}#}##Handler#createHandler#(#)#{#if#(#handler#!=#null#)#{#throw#new#BuildException#(#"Cannot define > 1 nested input handler"#)#;#}#handler#=#new#Handler#(#)#;#return#handler#;#}##