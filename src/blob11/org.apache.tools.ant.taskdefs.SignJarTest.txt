void#setUp#(#)#{#configureProject#(#"src/etc/testcases/taskdefs/signjar.xml"#)#;#}##void#tearDown#(#)#{#executeTarget#(#"clean"#)#;#}##boolean#isOffline#(#)#{#return#Boolean#.#getBoolean#(#"offline"#)#;#}##void#testBasicSigning#(#)#{#executeTarget#(#"basic"#)#;#}##void#testSigFile#(#)#{#executeTarget#(#"sigfile"#)#;#SignJarChild#sj#=#new#SignJarChild#(#)#;#sj#.#setAlias#(#"testonly"#)#;#sj#.#setKeystore#(#"testkeystore"#)#;#sj#.#setStorepass#(#"apacheant"#)#;#File#jar#=#new#File#(#getProject#(#)#.#getProperty#(#"test.jar"#)#)#;#sj#.#setJar#(#jar#)#;#assertFalse#(#"mustn't find signature without sigfile attribute"#,#sj#.#isSigned#(#)#)#;#sj#.#setSigfile#(#"TEST"#)#;#assertTrue#(#"must find signature with sigfile attribute"#,#sj#.#isSigned#(#)#)#;#}##void#testInvalidChars#(#)#{#executeTarget#(#"invalidchars"#)#;#SignJarChild#sj#=#new#SignJarChild#(#)#;#sj#.#setAlias#(#"test@nly"#)#;#sj#.#setKeystore#(#"testkeystore"#)#;#sj#.#setStorepass#(#"apacheant"#)#;#File#jar#=#new#File#(#getProject#(#)#.#getProperty#(#"test.jar"#)#)#;#sj#.#setJar#(#jar#)#;#assertTrue#(#sj#.#isSigned#(#)#)#;#}##boolean#isSigned#(#)#{#return#isSigned#(#jar#)#;#}##void#testMaxMemory#(#)#{#executeTarget#(#"maxmemory"#)#;#}##void#testURLKeystoreFile#(#)#{#executeTarget#(#"urlKeystoreFile"#)#;#}##void#testURLKeystoreHTTP#(#)#{#if#(#!#isOffline#(#)#)#{#executeTarget#(#"urlKeystoreHTTP"#)#;#}#}##void#testPreserveLastModified#(#)#{#executeTarget#(#"preserveLastModified"#)#;#}##void#testFileset#(#)#{#executeTarget#(#"testFileset"#)#;#}##void#testFilesetAndJar#(#)#{#executeTarget#(#"testFilesetAndJar"#)#;#}##void#testFilesetAndSignedJar#(#)#{#expectBuildExceptionContaining#(#"testFilesetAndSignedJar"#,#"incompatible attributes"#,#SignJar#.#ERROR_SIGNEDJAR_AND_PATHS#)#;#}##void#testPath#(#)#{#executeTarget#(#"testPath"#)#;#}##void#testPathAndJar#(#)#{#executeTarget#(#"testPathAndJar"#)#;#}##void#testPathAndSignedJar#(#)#{#expectBuildExceptionContaining#(#"testPathAndSignedJar"#,#"incompatible attributes"#,#SignJar#.#ERROR_SIGNEDJAR_AND_PATHS#)#;#}##void#testSignedJar#(#)#{#executeTarget#(#"testSignedJar"#)#;#}##void#testDestDir#(#)#{#executeTarget#(#"testDestDir"#)#;#}##void#testDestDirAndSignedJar#(#)#{#expectBuildExceptionContaining#(#"testFilesetAndSignedJar"#,#"incompatible attributes"#,#SignJar#.#ERROR_SIGNEDJAR_AND_PATHS#)#;#}##void#testDestDirAndSignedJar2#(#)#{#expectBuildExceptionContaining#(#"testPathAndSignedJar"#,#"incompatible attributes"#,#SignJar#.#ERROR_SIGNEDJAR_AND_PATHS#)#;#}##void#testDestDirFileset#(#)#{#executeTarget#(#"testDestDirFileset"#)#;#}##void#testMapperFileset#(#)#{#executeTarget#(#"testMapperFileset"#)#;#}##void#testDestDirPath#(#)#{#executeTarget#(#"testDestDirPath"#)#;#}##void#testMapperPath#(#)#{#executeTarget#(#"testMapperPath"#)#;#}##void#testMapperNoDest#(#)#{#expectBuildExceptionContaining#(#"testMapperNoDest"#,#"two mappers"#,#SignJar#.#ERROR_MAPPER_WITHOUT_DEST#)#;#}##void#testTwoMappers#(#)#{#expectBuildExceptionContaining#(#"testTwoMappers"#,#"two mappers"#,#SignJar#.#ERROR_TOO_MANY_MAPPERS#)#;#}##void#testNoAlias#(#)#{#expectBuildExceptionContaining#(#"testNoAlias"#,#"no alias"#,#SignJar#.#ERROR_NO_ALIAS#)#;#}##void#testNoFiles#(#)#{#expectBuildExceptionContaining#(#"testNoFiles"#,#"no files"#,#SignJar#.#ERROR_NO_SOURCE#)#;#}##void#testNoStorePass#(#)#{#expectBuildExceptionContaining#(#"testNoStorePass"#,#"no password"#,#SignJar#.#ERROR_NO_STOREPASS#)#;#}##void#testTsaLocalhost#(#)#{#//only test on java1.5+#if#(#JavaEnvUtils#.#getJavaVersionNumber#(#)#>=#15#)#{#expectBuildException#(#"testTsaLocalhost"#,#"no TSA at localhost:0"#)#;#assertLogContaining#(#"java.net.ConnectException"#)#;#}#}##void#testSysProperty#(#)#{#executeTarget#(#"testSysProperty"#)#;#}##void#testVerifyJar#(#)#{#executeTarget#(#"testVerifyJar"#)#;#}##void#testVerifyNoArgs#(#)#{#expectBuildExceptionContaining#(#"testVerifyNoArgs"#,#"no args"#,#AbstractJarSignerTask#.#ERROR_NO_SOURCE#)#;#}##void#testVerifyJarUnsigned#(#)#{#expectBuildExceptionContaining#(#"testVerifyJarUnsigned"#,#"unsigned JAR file"#,#VerifyJar#.#ERROR_NO_VERIFY#)#;#}##void#NotestVerifyJarNotInKeystore#(#)#{#expectBuildExceptionContaining#(#"testVerifyJarNotInKeystore"#,#"signature not in keystore"#,#VerifyJar#.#ERROR_NO_VERIFY#)#;#}##void#testVerifyFileset#(#)#{#executeTarget#(#"testVerifyFileset"#)#;#}##void#testVerifyPath#(#)#{#executeTarget#(#"testVerifyPath"#)#;#}##