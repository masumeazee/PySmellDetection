void#setAutoflush#(#boolean#autoflush#)#{#this#.#autoflush#=#autoflush#;#}##void#run#(#)#{#synchronized#(#this#)#{#started#=#true#;#}#finished#=#false#;#finish#=#false#;#final#byte#[#]#buf#=#new#byte#[#bufferSize#]#;#int#length#;#try#{#while#(#true#)#{#waitForInput#(#is#)#;#if#(#finish#||#Thread#.#interrupted#(#)#)#{#break#;#}#length#=#is#.#read#(#buf#)#;#if#(#length#<=#0#||#finish#||#Thread#.#interrupted#(#)#)#{#break#;#}#os#.#write#(#buf#,#0#,#length#)#;#if#(#autoflush#)#{#os#.#flush#(#)#;#}#}#os#.#flush#(#)#;#}#catch#(#InterruptedException#ie#)#{#// likely PumpStreamHandler trying to stop us#}#catch#(#Exception#e#)#{#synchronized#(#this#)#{#exception#=#e#;#}#}#finally#{#if#(#closeWhenExhausted#)#{#FileUtils#.#close#(#os#)#;#}#finished#=#true#;#synchronized#(#this#)#{#notifyAll#(#)#;#}#}#}##boolean#isFinished#(#)#{#return#finished#;#}##void#waitFor#(#)#throws#InterruptedException#{#while#(#!#isFinished#(#)#)#{#wait#(#)#;#}#}##void#setBufferSize#(#int#bufferSize#)#{#if#(#started#)#{#throw#new#IllegalStateException#(#"Cannot set buffer size on a running StreamPumper"#)#;#}#this#.#bufferSize#=#bufferSize#;#}##int#getBufferSize#(#)#{#return#bufferSize#;#}##Exception#getException#(#)#{#return#exception#;#}##void#stop#(#)#{#finish#=#true#;#notifyAll#(#)#;#}##void#waitForInput#(#InputStream#is#)#throws#IOException#,#InterruptedException#{#if#(#useAvailable#)#{#while#(#!#finish#&&#is#.#available#(#)#==#0#)#{#if#(#Thread#.#interrupted#(#)#)#{#throw#new#InterruptedException#(#)#;#}#synchronized#(#this#)#{#this#.#wait#(#POLL_INTERVAL#)#;#}#}#}#}##