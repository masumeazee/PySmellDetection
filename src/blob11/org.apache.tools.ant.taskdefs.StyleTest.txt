void#setUp#(#)#throws#Exception#{#configureProject#(#"src/etc/testcases/taskdefs/style/build.xml"#)#;#//executeTarget("setup");#//commented out for performance while target is empty#}##void#tearDown#(#)#throws#Exception#{#executeTarget#(#"teardown"#)#;#}##void#testStyleIsSet#(#)#throws#Exception#{#expectSpecificBuildException#(#"testStyleIsSet"#,#"no stylesheet specified"#,#"specify the "#+#"stylesheet either as a filename in style "#+#"attribute or as a nested resource"#)#;#}##void#testTransferParameterSet#(#)#throws#Exception#{#expectFileContains#(#"testTransferParameterSet"#,#// target#"out/out.xml"#,#// file#"set='myvalue'"#)#;#// exptected string#}##void#testTransferParameterEmpty#(#)#throws#Exception#{#expectFileContains#(#"testTransferParameterEmpty"#,#"out/out.xml"#,#"empty=''"#)#;#}##void#testTransferParameterUnset#(#)#throws#Exception#{#expectFileContains#(#"testTransferParameterUnset"#,#"out/out.xml"#,#"undefined='${value}'"#)#;#}##void#testTransferParameterUnsetWithIf#(#)#throws#Exception#{#expectFileContains#(#"testTransferParameterUnsetWithIf"#,#"out/out.xml"#,#"undefined='undefined default value'"#)#;#}##void#testNewerStylesheet#(#)#throws#Exception#{#expectFileContains#(#"testNewerStylesheet"#,#"out/out.xml"#,#"new-value"#)#;#}##void#testDefaultMapper#(#)#throws#Exception#{#testDefaultMapper#(#"testDefaultMapper"#)#;#}##void#testExplicitFileset#(#)#throws#Exception#{#testDefaultMapper#(#"testExplicitFileset"#)#;#}##void#testDefaultMapper#(#String#target#)#throws#Exception#{#assertTrue#(#!#(#FileUtils#.#getFileUtils#(#)#.#resolveFile#(#getProject#(#)#.#getBaseDir#(#)#,#"out/data.html"#)#)#.#exists#(#)#)#;#expectFileContains#(#target#,#"out/data.html"#,#"set='myvalue'"#)#;#}##void#testCustomMapper#(#)#throws#Exception#{#assertTrue#(#!#FILE_UTILS#.#resolveFile#(#getProject#(#)#.#getBaseDir#(#)#,#"out/out.xml"#)#.#exists#(#)#)#;#expectFileContains#(#"testCustomMapper"#,#"out/out.xml"#,#"set='myvalue'"#)#;#}##void#testTypedMapper#(#)#throws#Exception#{#assertTrue#(#!#FILE_UTILS#.#resolveFile#(#getProject#(#)#.#getBaseDir#(#)#,#"out/out.xml"#)#.#exists#(#)#)#;#expectFileContains#(#"testTypedMapper"#,#"out/out.xml"#,#"set='myvalue'"#)#;#}##void#testDirectoryHierarchyWithDirMatching#(#)#throws#Exception#{#executeTarget#(#"testDirectoryHierarchyWithDirMatching"#)#;#assertTrue#(#FILE_UTILS#.#resolveFile#(#getProject#(#)#.#getBaseDir#(#)#,#"out/dest/level1/data.html"#)#.#exists#(#)#)#;#}##void#testDirsWithSpaces#(#)#throws#Exception#{#executeTarget#(#"testDirsWithSpaces"#)#;#assertTrue#(#FILE_UTILS#.#resolveFile#(#getProject#(#)#.#getBaseDir#(#)#,#"out/d est/data.html"#)#.#exists#(#)#)#;#}##void#testWithStyleAttrAndResource#(#)#throws#Exception#{#expectSpecificBuildException#(#"testWithStyleAttrAndResource"#,#"Must throws a BuildException"#,#"specify the "#+#"stylesheet either as a filename in style "#+#"attribute or as a nested resource but not "#+#"as both"#)#;#}##void#testWithFileResource#(#)#throws#Exception#{#expectFileContains#(#"testWithFileResource"#,#"out/out.xml"#,#"set='value'"#)#;#}##void#testWithUrlResource#(#)#throws#Exception#{#expectFileContains#(#"testWithUrlResource"#,#"out/out.xml"#,#"set='value'"#)#;#}##void#testFilenameAsParam#(#)#throws#Exception#{#executeTarget#(#"testFilenameAsParam"#)#;#assertFileContains#(#"out/out/one.txt"#,#"filename='one.xml'"#)#;#assertFileContains#(#"out/out/two.txt"#,#"filename='two.xml'"#)#;#assertFileContains#(#"out/out/three.txt"#,#"filename='three.xml'"#)#;#assertFileContains#(#"out/out/dir/four.txt"#,#"filename='four.xml'"#)#;#assertFileContains#(#"out/out/dir/four.txt"#,#"filedir ='-not-set-'"#)#;#}##void#testFilenameAsParamNoSetting#(#)#throws#Exception#{#executeTarget#(#"testFilenameAsParamNoSetting"#)#;#assertFileContains#(#"out/out/one.txt"#,#"filename='-not-set-'"#)#;#assertFileContains#(#"out/out/two.txt"#,#"filename='-not-set-'"#)#;#assertFileContains#(#"out/out/three.txt"#,#"filename='-not-set-'"#)#;#assertFileContains#(#"out/out/dir/four.txt"#,#"filename='-not-set-'"#)#;#}##void#testFilenameAndFiledirAsParam#(#)#throws#Exception#{#executeTarget#(#"testFilenameAndFiledirAsParam"#)#;#assertFileContains#(#"out/out/one.txt"#,#"filename='one.xml'"#)#;#assertFileContains#(#"out/out/one.txt"#,#"filedir ='.'"#)#;#assertFileContains#(#"out/out/dir/four.txt"#,#"filename='four.xml'"#)#;#assertFileContains#(#"out/out/dir/four.txt"#,#"filedir ='dir'"#)#;#}##String#getFileString#(#String#filename#)#throws#IOException#{#Reader#r#=#null#;#try#{#r#=#new#FileReader#(#getProject#(#)#.#resolveFile#(#filename#)#)#;#return#FileUtils#.#readFully#(#r#)#;#}#finally#{#FileUtils#.#close#(#r#)#;#}#}##void#expectFileContains#(#String#target#,#String#filename#,#String#contains#)#throws#IOException#{#executeTarget#(#target#)#;#assertFileContains#(#filename#,#contains#)#;#}##void#assertFileContains#(#String#filename#,#String#contains#)#throws#IOException#{#String#content#=#getFileString#(#filename#)#;#assertTrue#(#"expecting file "#+#filename#+#" to contain "#+#contains#+#" but got "#+#content#,#content#.#indexOf#(#contains#)#>#-#1#)#;#}##