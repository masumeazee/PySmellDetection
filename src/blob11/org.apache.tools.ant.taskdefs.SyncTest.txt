void#setUp#(#)#{#configureProject#(#"src/etc/testcases/taskdefs/sync.xml"#)#;#}##void#tearDown#(#)#{#executeTarget#(#"cleanup"#)#;#}##void#testSimpleCopy#(#)#{#executeTarget#(#"simplecopy"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsPresent#(#d#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"dangling"#)#==#-#1#)#;#}##void#testEmptyCopy#(#)#{#executeTarget#(#"emptycopy"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsNotPresent#(#d#)#;#String#c#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c"#;#assertFileIsNotPresent#(#c#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"dangling"#)#==#-#1#)#;#}##void#testEmptyDirCopy#(#)#{#executeTarget#(#"emptydircopy"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsNotPresent#(#d#)#;#String#c#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c"#;#assertFileIsPresent#(#c#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"dangling"#)#==#-#1#)#;#}##void#testCopyAndRemove#(#)#{#testCopyAndRemove#(#"copyandremove"#)#;#}##void#testCopyAndRemoveWithFileList#(#)#{#testCopyAndRemove#(#"copyandremove-with-filelist"#)#;#}##void#testCopyAndRemoveWithZipfileset#(#)#{#testCopyAndRemove#(#"copyandremove-with-zipfileset"#)#;#}##void#testCopyAndRemove#(#String#target#)#{#executeTarget#(#target#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsPresent#(#d#)#;#String#f#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/e/f"#;#assertFileIsNotPresent#(#f#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"Removing orphan file:"#)#>#-#1#)#;#assertDebuglogContaining#(#"Removed 1 dangling file from"#)#;#assertDebuglogContaining#(#"Removed 1 dangling directory from"#)#;#}##void#testCopyAndRemoveEmptyPreserve#(#)#{#executeTarget#(#"copyandremove-emptypreserve"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsPresent#(#d#)#;#String#f#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/e/f"#;#assertFileIsNotPresent#(#f#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"Removing orphan file:"#)#>#-#1#)#;#assertDebuglogContaining#(#"Removed 1 dangling file from"#)#;#assertDebuglogContaining#(#"Removed 1 dangling directory from"#)#;#}##void#testEmptyDirCopyAndRemove#(#)#{#executeTarget#(#"emptydircopyandremove"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsNotPresent#(#d#)#;#String#c#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c"#;#assertFileIsPresent#(#c#)#;#String#f#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/e/f"#;#assertFileIsNotPresent#(#f#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"Removing orphan directory:"#)#>#-#1#)#;#assertDebuglogContaining#(#"NO dangling file to remove from"#)#;#assertDebuglogContaining#(#"Removed 2 dangling directories from"#)#;#}##void#testCopyNoRemove#(#)#{#executeTarget#(#"copynoremove"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsPresent#(#d#)#;#String#f#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/e/f"#;#assertFileIsPresent#(#f#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"Removing orphan file:"#)#==#-#1#)#;#}##void#testCopyNoRemoveSelectors#(#)#{#executeTarget#(#"copynoremove-selectors"#)#;#String#d#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/a/b/c/d"#;#assertFileIsPresent#(#d#)#;#String#f#=#getProject#(#)#.#getProperty#(#"dest"#)#+#"/e/f"#;#assertFileIsPresent#(#f#)#;#assertTrue#(#getFullLog#(#)#.#indexOf#(#"Removing orphan file:"#)#==#-#1#)#;#}##void#assertFileIsPresent#(#String#f#)#{#assertTrue#(#"Expected file "#+#f#,#getProject#(#)#.#resolveFile#(#f#)#.#exists#(#)#)#;#}##void#assertFileIsNotPresent#(#String#f#)#{#assertTrue#(#"Didn't expect file "#+#f#,#!#getProject#(#)#.#resolveFile#(#f#)#.#exists#(#)#)#;#}##