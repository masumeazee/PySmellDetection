void#setUp#(#)#{#configureProject#(#"src/etc/testcases/taskdefs/typeadapter.xml"#)#;#}##void#testTaskAdapter#(#)#{#expectLogContaining#(#"taskadapter"#,#"MyExec called"#)#;#}##void#testRunAdapter#(#)#{#expectLogContaining#(#"runadapter"#,#"MyRunnable called"#)#;#}##void#testRunAdapterError#(#)#{#expectBuildExceptionContaining#(#"runadaptererror"#,#"xx"#,#"No public run() method in"#)#;#}##void#testDelay#(#)#{#expectLogContaining#(#"delay"#,#"MyTask called"#)#;#}##void#testOnErrorReport#(#)#{#expectLogContaining#(#"onerror.report"#,#"MyTaskNotPresent cannot be found"#)#;#}##void#testOnErrorIgnore#(#)#{#expectLog#(#"onerror.ignore"#,#""#)#;#}##void#execute#(#)#{#log#(#"MyTask called"#)#;#}##void#setProject#(#Project#project#)#{#this#.#project#=#project#;#}##void#execute#(#)#{#project#.#log#(#"MyExec called"#)#;#}##void#setProject#(#Project#project#)#{#this#.#project#=#project#;#}##void#run#(#)#{#project#.#log#(#"MyRunnable called"#)#;#}##Method#getExecuteMethod#(#Class#proxyClass#)#{#try#{#Method#execMethod#=#proxyClass#.#getMethod#(#execMethodName#,#null#)#;#if#(#!#Void#.#TYPE#.#equals#(#execMethod#.#getReturnType#(#)#)#)#{#String#message#=#"return type of "#+#execMethodName#+#"() should be "#+#"void but was \""#+#execMethod#.#getReturnType#(#)#+#"\" in "#+#proxyClass#;#log#(#message#,#Project#.#MSG_WARN#)#;#}#return#execMethod#;#}#catch#(#NoSuchMethodException#e#)#{#String#message#=#"No public "#+#execMethodName#+#"() method in "#+#proxyClass#;#log#(#message#,#Project#.#MSG_ERR#)#;#throw#new#BuildException#(#message#)#;#}#}##void#checkProxyClass#(#Class#proxyClass#)#{#getExecuteMethod#(#proxyClass#)#;#}##void#setProxy#(#Object#o#)#{#getExecuteMethod#(#o#.#getClass#(#)#)#;#this#.#proxy#=#o#;#}##Object#getProxy#(#)#{#return#proxy#;#}##void#execute#(#)#{#getProject#(#)#.#setProjectReference#(#proxy#)#;#Method#executeMethod#=#getExecuteMethod#(#proxy#.#getClass#(#)#)#;#try#{#executeMethod#.#invoke#(#proxy#,#null#)#;#}#catch#(#java#.#lang#.#reflect#.#InvocationTargetException#ie#)#{#log#(#"Error in "#+#proxy#.#getClass#(#)#,#Project#.#MSG_ERR#)#;#Throwable#t#=#ie#.#getTargetException#(#)#;#if#(#t#instanceof#BuildException#)#{#throw#(#(#BuildException#)#t#)#;#}#else#{#throw#new#BuildException#(#t#)#;#}#}#catch#(#Exception#ex#)#{#log#(#"Error in "#+#proxy#.#getClass#(#)#,#Project#.#MSG_ERR#)#;#throw#new#BuildException#(#ex#)#;#}#}##