void#setRefid#(#Reference#r#)#{#ref#=#r#;#}##void#setType#(#String#type#)#{#this#.#type#=#type#;#}##boolean#eval#(#)#throws#BuildException#{#if#(#ref#==#null#)#{#throw#new#BuildException#(#"No reference specified for isreference "#+#"condition"#)#;#}#String#key#=#ref#.#getRefId#(#)#;#if#(#!#getProject#(#)#.#hasReference#(#key#)#)#{#return#false#;#}#else#if#(#type#==#null#)#{#return#true#;#}#else#{#Object#o#=#getProject#(#)#.#getReference#(#key#)#;#Class#typeClass#=#(#Class#)#getProject#(#)#.#getDataTypeDefinitions#(#)#.#get#(#type#)#;#if#(#typeClass#==#null#)#{#typeClass#=#(#Class#)#getProject#(#)#.#getTaskDefinitions#(#)#.#get#(#type#)#;#}#if#(#typeClass#==#null#)#{#// don't know the type, should throw exception instead?#return#false#;#}#return#typeClass#.#isAssignableFrom#(#o#.#getClass#(#)#)#;#}#}##