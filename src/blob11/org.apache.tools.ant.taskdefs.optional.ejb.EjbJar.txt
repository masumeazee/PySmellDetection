String#[#]#getValues#(#)#{#return#new#String#[#]#{#EJB_NAME#,#DIRECTORY#,#DESCRIPTOR#,#BASEJARNAME#}#;#}##String#[#]#getValues#(#)#{#return#new#String#[#]#{#CMP1_0#,#CMP2_0#,#}#;#}##void#addDeploymentTool#(#EJBDeploymentTool#deploymentTool#)#{#deploymentTool#.#setTask#(#this#)#;#deploymentTools#.#add#(#deploymentTool#)#;#}##WeblogicDeploymentTool#createWeblogic#(#)#{#WeblogicDeploymentTool#tool#=#new#WeblogicDeploymentTool#(#)#;#addDeploymentTool#(#tool#)#;#return#tool#;#}##WebsphereDeploymentTool#createWebsphere#(#)#{#WebsphereDeploymentTool#tool#=#new#WebsphereDeploymentTool#(#)#;#addDeploymentTool#(#tool#)#;#return#tool#;#}##BorlandDeploymentTool#createBorland#(#)#{#log#(#"Borland deployment tools"#,#Project#.#MSG_VERBOSE#)#;#BorlandDeploymentTool#tool#=#new#BorlandDeploymentTool#(#)#;#tool#.#setTask#(#this#)#;#deploymentTools#.#add#(#tool#)#;#return#tool#;#}##IPlanetDeploymentTool#createIplanet#(#)#{#log#(#"iPlanet Application Server deployment tools"#,#Project#.#MSG_VERBOSE#)#;#IPlanetDeploymentTool#tool#=#new#IPlanetDeploymentTool#(#)#;#addDeploymentTool#(#tool#)#;#return#tool#;#}##JbossDeploymentTool#createJboss#(#)#{#JbossDeploymentTool#tool#=#new#JbossDeploymentTool#(#)#;#addDeploymentTool#(#tool#)#;#return#tool#;#}##JonasDeploymentTool#createJonas#(#)#{#log#(#"JOnAS deployment tools"#,#Project#.#MSG_VERBOSE#)#;#JonasDeploymentTool#tool#=#new#JonasDeploymentTool#(#)#;#addDeploymentTool#(#tool#)#;#return#tool#;#}##WeblogicTOPLinkDeploymentTool#createWeblogictoplink#(#)#{#log#(#"The <weblogictoplink> element is no longer required. Please use "#+#"the <weblogic> element and set newCMP=\"true\""#,#Project#.#MSG_INFO#)#;#WeblogicTOPLinkDeploymentTool#tool#=#new#WeblogicTOPLinkDeploymentTool#(#)#;#addDeploymentTool#(#tool#)#;#return#tool#;#}##Path#createClasspath#(#)#{#if#(#config#.#classpath#==#null#)#{#config#.#classpath#=#new#Path#(#getProject#(#)#)#;#}#return#config#.#classpath#.#createPath#(#)#;#}##DTDLocation#createDTD#(#)#{#DTDLocation#dtdLocation#=#new#DTDLocation#(#)#;#config#.#dtdLocations#.#add#(#dtdLocation#)#;#return#dtdLocation#;#}##FileSet#createSupport#(#)#{#FileSet#supportFileSet#=#new#FileSet#(#)#;#config#.#supportFileSets#.#add#(#supportFileSet#)#;#return#supportFileSet#;#}##void#setManifest#(#File#manifest#)#{#config#.#manifest#=#manifest#;#}##void#setSrcdir#(#File#inDir#)#{#config#.#srcDir#=#inDir#;#}##void#setDescriptordir#(#File#inDir#)#{#config#.#descriptorDir#=#inDir#;#}##void#setDependency#(#String#analyzer#)#{#config#.#analyzer#=#analyzer#;#}##void#setBasejarname#(#String#inValue#)#{#config#.#baseJarName#=#inValue#;#if#(#config#.#namingScheme#==#null#)#{#config#.#namingScheme#=#new#NamingScheme#(#)#;#config#.#namingScheme#.#setValue#(#NamingScheme#.#BASEJARNAME#)#;#}#else#if#(#!#config#.#namingScheme#.#getValue#(#)#.#equals#(#NamingScheme#.#BASEJARNAME#)#)#{#throw#new#BuildException#(#"The basejarname attribute is not "#+#"compatible with the "#+#config#.#namingScheme#.#getValue#(#)#+#" naming scheme"#)#;#}#}##void#setNaming#(#NamingScheme#namingScheme#)#{#config#.#namingScheme#=#namingScheme#;#if#(#!#config#.#namingScheme#.#getValue#(#)#.#equals#(#NamingScheme#.#BASEJARNAME#)#&&#config#.#baseJarName#!=#null#)#{#throw#new#BuildException#(#"The basejarname attribute is not "#+#"compatible with the "#+#config#.#namingScheme#.#getValue#(#)#+#" naming scheme"#)#;#}#}##File#getDestdir#(#)#{#return#this#.#destDir#;#}##void#setDestdir#(#File#inDir#)#{#this#.#destDir#=#inDir#;#}##String#getCmpversion#(#)#{#return#this#.#cmpVersion#;#}##void#setCmpversion#(#CMPVersion#version#)#{#this#.#cmpVersion#=#version#.#getValue#(#)#;#}##void#setClasspath#(#Path#classpath#)#{#config#.#classpath#=#classpath#;#}##void#setFlatdestdir#(#boolean#inValue#)#{#config#.#flatDestDir#=#inValue#;#}##void#setGenericjarsuffix#(#String#inString#)#{#this#.#genericJarSuffix#=#inString#;#}##void#setBasenameterminator#(#String#inValue#)#{#config#.#baseNameTerminator#=#inValue#;#}##void#validateConfig#(#)#throws#BuildException#{#if#(#config#.#srcDir#==#null#)#{#throw#new#BuildException#(#"The srcDir attribute must be specified"#)#;#}#if#(#config#.#descriptorDir#==#null#)#{#config#.#descriptorDir#=#config#.#srcDir#;#}#if#(#config#.#namingScheme#==#null#)#{#config#.#namingScheme#=#new#NamingScheme#(#)#;#config#.#namingScheme#.#setValue#(#NamingScheme#.#DESCRIPTOR#)#;#}#else#if#(#config#.#namingScheme#.#getValue#(#)#.#equals#(#NamingScheme#.#BASEJARNAME#)#&&#config#.#baseJarName#==#null#)#{#throw#new#BuildException#(#"The basejarname attribute must "#+#"be specified with the basejarname naming scheme"#)#;#}#}##void#execute#(#)#throws#BuildException#{#validateConfig#(#)#;#if#(#deploymentTools#.#size#(#)#==#0#)#{#GenericDeploymentTool#genericTool#=#new#GenericDeploymentTool#(#)#;#genericTool#.#setTask#(#this#)#;#genericTool#.#setDestdir#(#destDir#)#;#genericTool#.#setGenericJarSuffix#(#genericJarSuffix#)#;#deploymentTools#.#add#(#genericTool#)#;#}#for#(#Iterator#i#=#deploymentTools#.#iterator#(#)#;#i#.#hasNext#(#)#;#)#{#EJBDeploymentTool#tool#=#(#EJBDeploymentTool#)#i#.#next#(#)#;#tool#.#configure#(#config#)#;#tool#.#validateConfigured#(#)#;#}#try#{#// Create the parser using whatever parser the system dictates#SAXParserFactory#saxParserFactory#=#SAXParserFactory#.#newInstance#(#)#;#saxParserFactory#.#setValidating#(#true#)#;#SAXParser#saxParser#=#saxParserFactory#.#newSAXParser#(#)#;#DirectoryScanner#ds#=#getDirectoryScanner#(#config#.#descriptorDir#)#;#ds#.#scan#(#)#;#String#[#]#files#=#ds#.#getIncludedFiles#(#)#;#log#(#files#.#length#+#" deployment descriptors located."#,#Project#.#MSG_VERBOSE#)#;#// Loop through the files. Each file represents one deployment#// descriptor, and hence one bean in our model.#for#(#int#index#=#0#;#index#<#files#.#length#;#++#index#)#{#// process the deployment descriptor in each tool#for#(#Iterator#i#=#deploymentTools#.#iterator#(#)#;#i#.#hasNext#(#)#;#)#{#EJBDeploymentTool#tool#=#(#EJBDeploymentTool#)#i#.#next#(#)#;#tool#.#processDescriptor#(#files#[#index#]#,#saxParser#)#;#}#}#}#catch#(#SAXException#se#)#{#String#msg#=#"SAXException while creating parser."#+#"  Details: "#+#se#.#getMessage#(#)#;#throw#new#BuildException#(#msg#,#se#)#;#}#catch#(#ParserConfigurationException#pce#)#{#String#msg#=#"ParserConfigurationException while creating parser. "#+#"Details: "#+#pce#.#getMessage#(#)#;#throw#new#BuildException#(#msg#,#pce#)#;#}#}##