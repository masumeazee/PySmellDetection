void#setUp#(#)#{#configureProject#(#"src/etc/testcases/taskdefs/optional/junitreport.xml"#)#;#}##void#tearDown#(#)#{#executeTarget#(#"clean"#)#;#}##void#testNoFileJUnitNoFrames#(#)#{#executeTarget#(#"reports1"#)#;#if#(#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/junit-noframes.html"#)#.#exists#(#)#)#{#fail#(#"No file junit-noframes.html expected"#)#;#}#}##void#assertIndexCreated#(#)#{#if#(#!#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/index.html"#)#.#exists#(#)#)#{#fail#(#"No file index file found"#)#;#}#}##void#expectReportWithText#(#String#targetName#,#String#text#)#{#executeTarget#(#targetName#)#;#assertIndexCreated#(#)#;#if#(#text#!=#null#)#{#assertLogContaining#(#text#)#;#}#}##void#testEmptyFile#(#)#throws#Exception#{#expectReportWithText#(#"testEmptyFile"#,#XMLResultAggregator#.#WARNING_EMPTY_FILE#)#;#}##void#testIncompleteFile#(#)#throws#Exception#{#expectReportWithText#(#"testIncompleteFile"#,#XMLResultAggregator#.#WARNING_IS_POSSIBLY_CORRUPTED#)#;#}##void#testWrongElement#(#)#throws#Exception#{#expectReportWithText#(#"testWrongElement"#,#XMLResultAggregator#.#WARNING_INVALID_ROOT_ELEMENT#)#;#}##void#testStackTraceLineBreaks#(#)#throws#Exception#{#expectReportWithText#(#"testStackTraceLineBreaks"#,#null#)#;#FileReader#r#=#null#;#try#{#r#=#new#FileReader#(#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/sampleproject/coins/0_CoinTest.html"#)#)#;#String#report#=#FileUtils#.#readFully#(#r#)#;#assertTrue#(#"output must contain <br>"#,#report#.#indexOf#(#"junit.framework.AssertionFailedError: DOEG<br/>"#)#>#-#1#)#;#}#finally#{#FileUtils#.#close#(#r#)#;#}#}##void#testSpecialSignsInSrcPath#(#)#throws#Exception#{#executeTarget#(#"testSpecialSignsInSrcPath"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/index.html"#)#;#// tests one the file object#assertTrue#(#"No index.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##void#testSpecialSignsInHtmlPath#(#)#throws#Exception#{#executeTarget#(#"testSpecialSignsInHtmlPath"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html# $%\u00A7&-!report/index.html"#)#;#// tests one the file object#assertTrue#(#"No index.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##void#testWithStyleFromDir#(#)#throws#Exception#{#executeTarget#(#"testWithStyleFromDir"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/index.html"#)#;#// tests one the file object#assertTrue#(#"No index.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##void#testNoFrames#(#)#throws#Exception#{#executeTarget#(#"testNoFrames"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/junit-noframes.html"#)#;#// tests one the file object#assertTrue#(#"No junit-noframes.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##void#testWithStyleFromDirAndXslImport#(#)#throws#Exception#{#executeTarget#(#"testWithStyleFromDirAndXslImport"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/index.html"#)#;#// tests one the file object#assertTrue#(#"No index.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##void#testWithStyleFromClasspath#(#)#throws#Exception#{#executeTarget#(#"testWithStyleFromClasspath"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/index.html"#)#;#// tests one the file object#assertTrue#(#"No index.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##void#testWithParams#(#)#throws#Exception#{#expectLogContaining#(#"testWithParams"#,#"key1=value1,key2=value2"#)#;#File#reportFile#=#new#File#(#System#.#getProperty#(#"root"#)#,#"src/etc/testcases/taskdefs/optional/junitreport/test/html/index.html"#)#;#// tests one the file object#assertTrue#(#"No index.html present. Not generated?"#,#reportFile#.#exists#(#)#)#;#assertTrue#(#"Cant read the report file."#,#reportFile#.#canRead#(#)#)#;#assertTrue#(#"File shouldnt be empty."#,#reportFile#.#length#(#)#>#0#)#;#// conversion to URL via FileUtils like in XMLResultAggregator, not as suggested in the bug report#URL#reportUrl#=#new#URL#(#FileUtils#.#getFileUtils#(#)#.#toURI#(#reportFile#.#getAbsolutePath#(#)#)#)#;#InputStream#reportStream#=#reportUrl#.#openStream#(#)#;#assertTrue#(#"This shouldnt be an empty stream."#,#reportStream#.#available#(#)#>#0#)#;#}##