void#execute#(#)#{#getScript#(#)#.#executeScript#(#attributes#,#nestedElementMap#,#this#)#;#}##ScriptDef#getScript#(#)#{#String#name#=#getTaskType#(#)#;#Map#scriptRepository#=#(#Map#)#getProject#(#)#.#getReference#(#MagicNames#.#SCRIPT_REPOSITORY#)#;#if#(#scriptRepository#==#null#)#{#throw#new#BuildException#(#"Script repository not found for "#+#name#)#;#}#ScriptDef#definition#=#(#ScriptDef#)#scriptRepository#.#get#(#getTaskType#(#)#)#;#if#(#definition#==#null#)#{#throw#new#BuildException#(#"Script definition not found for "#+#name#)#;#}#return#definition#;#}##Object#createDynamicElement#(#String#name#)#{#List#nestedElementList#=#(#List#)#nestedElementMap#.#get#(#name#)#;#if#(#nestedElementList#==#null#)#{#nestedElementList#=#new#ArrayList#(#)#;#nestedElementMap#.#put#(#name#,#nestedElementList#)#;#}#Object#element#=#getScript#(#)#.#createNestedElement#(#name#)#;#nestedElementList#.#add#(#element#)#;#return#element#;#}##void#setDynamicAttribute#(#String#name#,#String#value#)#{#ScriptDef#definition#=#getScript#(#)#;#if#(#!#definition#.#isAttributeSupported#(#name#)#)#{#throw#new#BuildException#(#"<"#+#getTaskType#(#)#+#"> does not support the \""#+#name#+#"\" attribute"#)#;#}#attributes#.#put#(#name#,#value#)#;#}##void#addText#(#String#text#)#{#this#.#text#=#getProject#(#)#.#replaceProperties#(#text#)#;#}##String#getText#(#)#{#return#text#;#}##void#fail#(#String#message#)#{#throw#new#BuildException#(#message#)#;#}##