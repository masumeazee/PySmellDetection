void#setRefid#(#Reference#r#)#throws#BuildException#{#if#(#dir#!=#null#||#defaultPatterns#.#hasPatterns#(#getProject#(#)#)#)#{#throw#tooManyAttributes#(#)#;#}#if#(#!#additionalPatterns#.#isEmpty#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#if#(#!#selectors#.#isEmpty#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#super#.#setRefid#(#r#)#;#}##void#setDir#(#File#dir#)#throws#BuildException#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#dir#=#dir#;#directoryScanner#=#null#;#}##File#getDir#(#)#{#return#getDir#(#getProject#(#)#)#;#}##File#getDir#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#getRef#(#p#)#.#getDir#(#p#)#;#}#dieOnCircularReference#(#)#;#return#dir#;#}##PatternSet#createPatternSet#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#PatternSet#patterns#=#new#PatternSet#(#)#;#additionalPatterns#.#addElement#(#patterns#)#;#directoryScanner#=#null#;#return#patterns#;#}##PatternSet#.#NameEntry#createInclude#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#directoryScanner#=#null#;#return#defaultPatterns#.#createInclude#(#)#;#}##PatternSet#.#NameEntry#createIncludesFile#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#directoryScanner#=#null#;#return#defaultPatterns#.#createIncludesFile#(#)#;#}##PatternSet#.#NameEntry#createExclude#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#directoryScanner#=#null#;#return#defaultPatterns#.#createExclude#(#)#;#}##PatternSet#.#NameEntry#createExcludesFile#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#directoryScanner#=#null#;#return#defaultPatterns#.#createExcludesFile#(#)#;#}##void#setFile#(#File#file#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#setDir#(#file#.#getParentFile#(#)#)#;#createInclude#(#)#.#setName#(#file#.#getName#(#)#)#;#}##void#setIncludes#(#String#includes#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#defaultPatterns#.#setIncludes#(#includes#)#;#directoryScanner#=#null#;#}##void#appendIncludes#(#String#[#]#includes#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#if#(#includes#!=#null#)#{#for#(#int#i#=#0#;#i#<#includes#.#length#;#i#++#)#{#defaultPatterns#.#createInclude#(#)#.#setName#(#includes#[#i#]#)#;#}#directoryScanner#=#null#;#}#}##void#setExcludes#(#String#excludes#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#defaultPatterns#.#setExcludes#(#excludes#)#;#directoryScanner#=#null#;#}##void#appendExcludes#(#String#[#]#excludes#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#if#(#excludes#!=#null#)#{#for#(#int#i#=#0#;#i#<#excludes#.#length#;#i#++#)#{#defaultPatterns#.#createExclude#(#)#.#setName#(#excludes#[#i#]#)#;#}#directoryScanner#=#null#;#}#}##void#setIncludesfile#(#File#incl#)#throws#BuildException#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#defaultPatterns#.#setIncludesfile#(#incl#)#;#directoryScanner#=#null#;#}##void#setExcludesfile#(#File#excl#)#throws#BuildException#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#defaultPatterns#.#setExcludesfile#(#excl#)#;#directoryScanner#=#null#;#}##void#setDefaultexcludes#(#boolean#useDefaultExcludes#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#useDefaultExcludes#=#useDefaultExcludes#;#directoryScanner#=#null#;#}##boolean#getDefaultexcludes#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#getDefaultexcludes#(#)#;#}#dieOnCircularReference#(#)#;#return#useDefaultExcludes#;#}##void#setCaseSensitive#(#boolean#caseSensitive#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#caseSensitive#=#caseSensitive#;#directoryScanner#=#null#;#}##boolean#isCaseSensitive#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#isCaseSensitive#(#)#;#}#dieOnCircularReference#(#)#;#return#caseSensitive#;#}##void#setFollowSymlinks#(#boolean#followSymlinks#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#followSymlinks#=#followSymlinks#;#directoryScanner#=#null#;#}##boolean#isFollowSymlinks#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#isCaseSensitive#(#)#;#}#dieOnCircularReference#(#)#;#return#followSymlinks#;#}##void#setMaxLevelsOfSymlinks#(#int#max#)#{#maxLevelsOfSymlinks#=#max#;#}##int#getMaxLevelsOfSymlinks#(#)#{#return#maxLevelsOfSymlinks#;#}##void#setErrorOnMissingDir#(#boolean#errorOnMissingDir#)#{#this#.#errorOnMissingDir#=#errorOnMissingDir#;#}##DirectoryScanner#getDirectoryScanner#(#)#{#return#getDirectoryScanner#(#getProject#(#)#)#;#}##DirectoryScanner#getDirectoryScanner#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#getRef#(#p#)#.#getDirectoryScanner#(#p#)#;#}#dieOnCircularReference#(#)#;#DirectoryScanner#ds#=#null#;#synchronized#(#this#)#{#if#(#directoryScanner#!=#null#&&#p#==#getProject#(#)#)#{#ds#=#directoryScanner#;#}#else#{#if#(#dir#==#null#)#{#throw#new#BuildException#(#"No directory specified for "#+#getDataTypeName#(#)#+#"."#)#;#}#if#(#!#dir#.#exists#(#)#&&#errorOnMissingDir#)#{#throw#new#BuildException#(#dir#.#getAbsolutePath#(#)#+#DirectoryScanner#.#DOES_NOT_EXIST_POSTFIX#)#;#}#if#(#!#dir#.#isDirectory#(#)#&&#dir#.#exists#(#)#)#{#throw#new#BuildException#(#dir#.#getAbsolutePath#(#)#+#" is not a directory."#)#;#}#ds#=#new#DirectoryScanner#(#)#;#setupDirectoryScanner#(#ds#,#p#)#;#ds#.#setFollowSymlinks#(#followSymlinks#)#;#ds#.#setErrorOnMissingDir#(#errorOnMissingDir#)#;#ds#.#setMaxLevelsOfSymlinks#(#maxLevelsOfSymlinks#)#;#directoryScanner#=#(#p#==#getProject#(#)#)#?#ds#:#directoryScanner#;#}#}#ds#.#scan#(#)#;#return#ds#;#}##void#setupDirectoryScanner#(#FileScanner#ds#)#{#setupDirectoryScanner#(#ds#,#getProject#(#)#)#;#}##void#setupDirectoryScanner#(#FileScanner#ds#,#Project#p#)#{#if#(#isReference#(#)#)#{#getRef#(#p#)#.#setupDirectoryScanner#(#ds#,#p#)#;#return#;#}#dieOnCircularReference#(#p#)#;#if#(#ds#==#null#)#{#throw#new#IllegalArgumentException#(#"ds cannot be null"#)#;#}#ds#.#setBasedir#(#dir#)#;#PatternSet#ps#=#mergePatterns#(#p#)#;#p#.#log#(#getDataTypeName#(#)#+#": Setup scanner in dir "#+#dir#+#" with "#+#ps#,#Project#.#MSG_DEBUG#)#;#ds#.#setIncludes#(#ps#.#getIncludePatterns#(#p#)#)#;#ds#.#setExcludes#(#ps#.#getExcludePatterns#(#p#)#)#;#if#(#ds#instanceof#SelectorScanner#)#{#SelectorScanner#ss#=#(#SelectorScanner#)#ds#;#ss#.#setSelectors#(#getSelectors#(#p#)#)#;#}#if#(#useDefaultExcludes#)#{#ds#.#addDefaultExcludes#(#)#;#}#ds#.#setCaseSensitive#(#caseSensitive#)#;#}##AbstractFileSet#getRef#(#Project#p#)#{#return#(#AbstractFileSet#)#getCheckedRef#(#p#)#;#}##boolean#hasSelectors#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#hasSelectors#(#)#;#}#dieOnCircularReference#(#)#;#return#!#(#selectors#.#isEmpty#(#)#)#;#}##boolean#hasPatterns#(#)#{#if#(#isReference#(#)#&&#getProject#(#)#!=#null#)#{#return#getRef#(#getProject#(#)#)#.#hasPatterns#(#)#;#}#dieOnCircularReference#(#)#;#if#(#defaultPatterns#.#hasPatterns#(#getProject#(#)#)#)#{#return#true#;#}#Enumeration#e#=#additionalPatterns#.#elements#(#)#;#while#(#e#.#hasMoreElements#(#)#)#{#PatternSet#ps#=#(#PatternSet#)#e#.#nextElement#(#)#;#if#(#ps#.#hasPatterns#(#getProject#(#)#)#)#{#return#true#;#}#}#return#false#;#}##int#selectorCount#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#selectorCount#(#)#;#}#dieOnCircularReference#(#)#;#return#selectors#.#size#(#)#;#}##FileSelector#[#]#getSelectors#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#getSelectors#(#p#)#;#}#dieOnCircularReference#(#p#)#;#return#(#FileSelector#[#]#)#(#selectors#.#toArray#(#new#FileSelector#[#selectors#.#size#(#)#]#)#)#;#}##Enumeration#selectorElements#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#selectorElements#(#)#;#}#dieOnCircularReference#(#)#;#return#selectors#.#elements#(#)#;#}##void#appendSelector#(#FileSelector#selector#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#selectors#.#addElement#(#selector#)#;#directoryScanner#=#null#;#setChecked#(#false#)#;#}##void#addSelector#(#SelectSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addAnd#(#AndSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addOr#(#OrSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addNot#(#NotSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addNone#(#NoneSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addMajority#(#MajoritySelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addDate#(#DateSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addSize#(#SizeSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addDifferent#(#DifferentSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addFilename#(#FilenameSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addType#(#TypeSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addCustom#(#ExtendSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addContains#(#ContainsSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addPresent#(#PresentSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addDepth#(#DepthSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addDepend#(#DependSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addContainsRegexp#(#ContainsRegexpSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addModified#(#ModifiedSelector#selector#)#{#appendSelector#(#selector#)#;#}##void#addReadable#(#ReadableSelector#r#)#{#appendSelector#(#r#)#;#}##void#addWritable#(#WritableSelector#w#)#{#appendSelector#(#w#)#;#}##void#add#(#FileSelector#selector#)#{#appendSelector#(#selector#)#;#}##String#toString#(#)#{#if#(#isReference#(#)#)#{#return#getRef#(#getProject#(#)#)#.#toString#(#)#;#}#dieOnCircularReference#(#)#;#DirectoryScanner#ds#=#getDirectoryScanner#(#getProject#(#)#)#;#String#[#]#files#=#ds#.#getIncludedFiles#(#)#;#StringBuffer#sb#=#new#StringBuffer#(#)#;#for#(#int#i#=#0#;#i#<#files#.#length#;#i#++#)#{#if#(#i#>#0#)#{#sb#.#append#(#';'#)#;#}#sb#.#append#(#files#[#i#]#)#;#}#return#sb#.#toString#(#)#;#}##Object#clone#(#)#{#if#(#isReference#(#)#)#{#return#(#getRef#(#getProject#(#)#)#)#.#clone#(#)#;#}#else#{#try#{#AbstractFileSet#fs#=#(#AbstractFileSet#)#super#.#clone#(#)#;#fs#.#defaultPatterns#=#(#PatternSet#)#defaultPatterns#.#clone#(#)#;#fs#.#additionalPatterns#=#new#Vector#(#additionalPatterns#.#size#(#)#)#;#Enumeration#e#=#additionalPatterns#.#elements#(#)#;#while#(#e#.#hasMoreElements#(#)#)#{#fs#.#additionalPatterns#.#addElement#(#(#(#PatternSet#)#e#.#nextElement#(#)#)#.#clone#(#)#)#;#}#fs#.#selectors#=#new#Vector#(#selectors#)#;#return#fs#;#}#catch#(#CloneNotSupportedException#e#)#{#throw#new#BuildException#(#e#)#;#}#}#}##String#[#]#mergeIncludes#(#Project#p#)#{#return#mergePatterns#(#p#)#.#getIncludePatterns#(#p#)#;#}##String#[#]#mergeExcludes#(#Project#p#)#{#return#mergePatterns#(#p#)#.#getExcludePatterns#(#p#)#;#}##PatternSet#mergePatterns#(#Project#p#)#{#if#(#isReference#(#)#)#{#return#getRef#(#p#)#.#mergePatterns#(#p#)#;#}#dieOnCircularReference#(#)#;#PatternSet#ps#=#(#PatternSet#)#defaultPatterns#.#clone#(#)#;#final#int#count#=#additionalPatterns#.#size#(#)#;#for#(#int#i#=#0#;#i#<#count#;#i#++#)#{#Object#o#=#additionalPatterns#.#elementAt#(#i#)#;#ps#.#append#(#(#PatternSet#)#o#,#p#)#;#}#return#ps#;#}##void#dieOnCircularReference#(#Stack#stk#,#Project#p#)#throws#BuildException#{#if#(#isChecked#(#)#)#{#return#;#}#if#(#isReference#(#)#)#{#super#.#dieOnCircularReference#(#stk#,#p#)#;#}#else#{#for#(#Iterator#i#=#selectors#.#iterator#(#)#;#i#.#hasNext#(#)#;#)#{#Object#o#=#i#.#next#(#)#;#if#(#o#instanceof#DataType#)#{#pushAndInvokeCircularReferenceCheck#(#(#DataType#)#o#,#stk#,#p#)#;#}#}#for#(#Iterator#i#=#additionalPatterns#.#iterator#(#)#;#i#.#hasNext#(#)#;#)#{#PatternSet#ps#=#(#PatternSet#)#i#.#next#(#)#;#pushAndInvokeCircularReferenceCheck#(#ps#,#stk#,#p#)#;#}#setChecked#(#true#)#;#}#}##