void#addEnable#(#EnabledAssertion#assertion#)#{#checkChildrenAllowed#(#)#;#assertionList#.#add#(#assertion#)#;#}##void#addDisable#(#DisabledAssertion#assertion#)#{#checkChildrenAllowed#(#)#;#assertionList#.#add#(#assertion#)#;#}##void#setEnableSystemAssertions#(#Boolean#enableSystemAssertions#)#{#checkAttributesAllowed#(#)#;#this#.#enableSystemAssertions#=#enableSystemAssertions#;#}##void#setRefid#(#Reference#ref#)#{#if#(#assertionList#.#size#(#)#>#0#||#enableSystemAssertions#!=#null#)#{#throw#tooManyAttributes#(#)#;#}#super#.#setRefid#(#ref#)#;#}##Assertions#getFinalReference#(#)#{#if#(#getRefid#(#)#==#null#)#{#return#this#;#}#else#{#Object#o#=#getRefid#(#)#.#getReferencedObject#(#getProject#(#)#)#;#if#(#!#(#o#instanceof#Assertions#)#)#{#throw#new#BuildException#(#"reference is of wrong type"#)#;#}#return#(#Assertions#)#o#;#}#}##int#size#(#)#{#Assertions#clause#=#getFinalReference#(#)#;#return#clause#.#getFinalSize#(#)#;#}##int#getFinalSize#(#)#{#return#assertionList#.#size#(#)#+#(#enableSystemAssertions#!=#null#?#1#:#0#)#;#}##void#applyAssertions#(#List#commandList#)#{#getProject#(#)#.#log#(#"Applying assertions"#,#Project#.#MSG_DEBUG#)#;#Assertions#clause#=#getFinalReference#(#)#;#//do the system assertions#if#(#Boolean#.#TRUE#.#equals#(#clause#.#enableSystemAssertions#)#)#{#getProject#(#)#.#log#(#"Enabling system assertions"#,#Project#.#MSG_DEBUG#)#;#commandList#.#add#(#"-enablesystemassertions"#)#;#}#else#if#(#Boolean#.#FALSE#.#equals#(#clause#.#enableSystemAssertions#)#)#{#getProject#(#)#.#log#(#"disabling system assertions"#,#Project#.#MSG_DEBUG#)#;#commandList#.#add#(#"-disablesystemassertions"#)#;#}#//now any inner assertions#Iterator#it#=#clause#.#assertionList#.#iterator#(#)#;#while#(#it#.#hasNext#(#)#)#{#BaseAssertion#assertion#=#(#BaseAssertion#)#it#.#next#(#)#;#String#arg#=#assertion#.#toCommand#(#)#;#getProject#(#)#.#log#(#"adding assertion "#+#arg#,#Project#.#MSG_DEBUG#)#;#commandList#.#add#(#arg#)#;#}#}##void#applyAssertions#(#CommandlineJava#command#)#{#Assertions#clause#=#getFinalReference#(#)#;#//do the system assertions#if#(#Boolean#.#TRUE#.#equals#(#clause#.#enableSystemAssertions#)#)#{#addVmArgument#(#command#,#"-enablesystemassertions"#)#;#}#else#if#(#Boolean#.#FALSE#.#equals#(#clause#.#enableSystemAssertions#)#)#{#addVmArgument#(#command#,#"-disablesystemassertions"#)#;#}#//now any inner assertions#Iterator#it#=#clause#.#assertionList#.#iterator#(#)#;#while#(#it#.#hasNext#(#)#)#{#BaseAssertion#assertion#=#(#BaseAssertion#)#it#.#next#(#)#;#String#arg#=#assertion#.#toCommand#(#)#;#addVmArgument#(#command#,#arg#)#;#}#}##void#applyAssertions#(#final#ListIterator#commandIterator#)#{#getProject#(#)#.#log#(#"Applying assertions"#,#Project#.#MSG_DEBUG#)#;#Assertions#clause#=#getFinalReference#(#)#;#//do the system assertions#if#(#Boolean#.#TRUE#.#equals#(#clause#.#enableSystemAssertions#)#)#{#getProject#(#)#.#log#(#"Enabling system assertions"#,#Project#.#MSG_DEBUG#)#;#commandIterator#.#add#(#"-enablesystemassertions"#)#;#}#else#if#(#Boolean#.#FALSE#.#equals#(#clause#.#enableSystemAssertions#)#)#{#getProject#(#)#.#log#(#"disabling system assertions"#,#Project#.#MSG_DEBUG#)#;#commandIterator#.#add#(#"-disablesystemassertions"#)#;#}#//now any inner assertions#Iterator#it#=#clause#.#assertionList#.#iterator#(#)#;#while#(#it#.#hasNext#(#)#)#{#BaseAssertion#assertion#=#(#BaseAssertion#)#it#.#next#(#)#;#String#arg#=#assertion#.#toCommand#(#)#;#getProject#(#)#.#log#(#"adding assertion "#+#arg#,#Project#.#MSG_DEBUG#)#;#commandIterator#.#add#(#arg#)#;#}#}##void#addVmArgument#(#CommandlineJava#command#,#String#arg#)#{#Commandline#.#Argument#argument#;#argument#=#command#.#createVmArgument#(#)#;#argument#.#setValue#(#arg#)#;#}##Object#clone#(#)#throws#CloneNotSupportedException#{#Assertions#that#=#(#Assertions#)#super#.#clone#(#)#;#that#.#assertionList#=#(#ArrayList#)#assertionList#.#clone#(#)#;#return#that#;#}##void#setClass#(#String#className#)#{#this#.#className#=#className#;#}##void#setPackage#(#String#packageName#)#{#this#.#packageName#=#packageName#;#}##String#getClassName#(#)#{#return#className#;#}##String#getPackageName#(#)#{#return#packageName#;#}##String#getCommandPrefix#(#)#;##String#toCommand#(#)#{#//catch invalidness#if#(#getPackageName#(#)#!=#null#&&#getClassName#(#)#!=#null#)#{#throw#new#BuildException#(#"Both package and class have been set"#)#;#}#StringBuffer#command#=#new#StringBuffer#(#getCommandPrefix#(#)#)#;#//see if it is a package or a class#if#(#getPackageName#(#)#!=#null#)#{#//packages get a ... prefix#command#.#append#(#':'#)#;#command#.#append#(#getPackageName#(#)#)#;#if#(#!#command#.#toString#(#)#.#endsWith#(#"..."#)#)#{#//append the ... suffix if not there already#command#.#append#(#"..."#)#;#}#}#else#if#(#getClassName#(#)#!=#null#)#{#//classes just get the classname#command#.#append#(#':'#)#;#command#.#append#(#getClassName#(#)#)#;#}#return#command#.#toString#(#)#;#}##String#getCommandPrefix#(#)#{#return#"-ea"#;#}##String#getCommandPrefix#(#)#{#return#"-da"#;#}##