void#setType#(#MapperType#type#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#type#=#type#;#}##void#addConfigured#(#FileNameMapper#fileNameMapper#)#{#add#(#fileNameMapper#)#;#}##void#add#(#FileNameMapper#fileNameMapper#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#if#(#container#==#null#)#{#if#(#type#==#null#&&#classname#==#null#)#{#container#=#new#CompositeMapper#(#)#;#}#else#{#FileNameMapper#m#=#getImplementation#(#)#;#if#(#m#instanceof#ContainerMapper#)#{#container#=#(#ContainerMapper#)#m#;#}#else#{#throw#new#BuildException#(#String#.#valueOf#(#m#)#+#" mapper implementation does not support nested mappers!"#)#;#}#}#}#container#.#add#(#fileNameMapper#)#;#setChecked#(#false#)#;#}##void#addConfiguredMapper#(#Mapper#mapper#)#{#add#(#mapper#.#getImplementation#(#)#)#;#}##void#setClassname#(#String#classname#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#classname#=#classname#;#}##void#setClasspath#(#Path#classpath#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#if#(#this#.#classpath#==#null#)#{#this#.#classpath#=#classpath#;#}#else#{#this#.#classpath#.#append#(#classpath#)#;#}#}##Path#createClasspath#(#)#{#if#(#isReference#(#)#)#{#throw#noChildrenAllowed#(#)#;#}#if#(#this#.#classpath#==#null#)#{#this#.#classpath#=#new#Path#(#getProject#(#)#)#;#}#setChecked#(#false#)#;#return#this#.#classpath#.#createPath#(#)#;#}##void#setClasspathRef#(#Reference#ref#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#createClasspath#(#)#.#setRefid#(#ref#)#;#}##void#setFrom#(#String#from#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#from#=#from#;#}##void#setTo#(#String#to#)#{#if#(#isReference#(#)#)#{#throw#tooManyAttributes#(#)#;#}#this#.#to#=#to#;#}##void#setRefid#(#Reference#r#)#throws#BuildException#{#if#(#type#!=#null#||#from#!=#null#||#to#!=#null#)#{#throw#tooManyAttributes#(#)#;#}#super#.#setRefid#(#r#)#;#}##FileNameMapper#getImplementation#(#)#throws#BuildException#{#if#(#isReference#(#)#)#{#dieOnCircularReference#(#)#;#Reference#r#=#getRefid#(#)#;#Object#o#=#r#.#getReferencedObject#(#getProject#(#)#)#;#if#(#o#instanceof#FileNameMapper#)#{#return#(#FileNameMapper#)#o#;#}#if#(#o#instanceof#Mapper#)#{#return#(#(#Mapper#)#o#)#.#getImplementation#(#)#;#}#String#od#=#o#==#null#?#"null"#:#o#.#getClass#(#)#.#getName#(#)#;#throw#new#BuildException#(#od#+#" at reference '"#+#r#.#getRefId#(#)#+#"' is not a valid mapper reference."#)#;#}#if#(#type#==#null#&&#classname#==#null#&&#container#==#null#)#{#throw#new#BuildException#(#"nested mapper or "#+#"one of the attributes type or classname is required"#)#;#}#if#(#container#!=#null#)#{#return#container#;#}#if#(#type#!=#null#&&#classname#!=#null#)#{#throw#new#BuildException#(#"must not specify both type and classname attribute"#)#;#}#try#{#FileNameMapper#m#=#(#FileNameMapper#)#(#getImplementationClass#(#)#.#newInstance#(#)#)#;#final#Project#p#=#getProject#(#)#;#if#(#p#!=#null#)#{#p#.#setProjectReference#(#m#)#;#}#m#.#setFrom#(#from#)#;#m#.#setTo#(#to#)#;#return#m#;#}#catch#(#BuildException#be#)#{#throw#be#;#}#catch#(#Throwable#t#)#{#throw#new#BuildException#(#t#)#;#}#}##Class#getImplementationClass#(#)#throws#ClassNotFoundException#{#String#cName#=#this#.#classname#;#if#(#type#!=#null#)#{#cName#=#type#.#getImplementation#(#)#;#}#ClassLoader#loader#=#(#classpath#==#null#)#?#getClass#(#)#.#getClassLoader#(#)#// Memory leak in line below#:#getProject#(#)#.#createClassLoader#(#classpath#)#;#return#Class#.#forName#(#cName#,#true#,#loader#)#;#}##Mapper#getRef#(#)#{#return#(#Mapper#)#getCheckedRef#(#)#;#}##String#[#]#getValues#(#)#{#return#new#String#[#]#{#"identity"#,#"flatten"#,#"glob"#,#"merge"#,#"regexp"#,#"package"#,#"unpackage"#}#;#}##String#getImplementation#(#)#{#return#implementations#.#getProperty#(#getValue#(#)#)#;#}##