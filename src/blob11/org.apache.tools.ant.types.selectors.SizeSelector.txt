String#toString#(#)#{#StringBuffer#buf#=#new#StringBuffer#(#"{sizeselector value: "#)#;#buf#.#append#(#sizelimit#)#;#buf#.#append#(#"compare: "#)#.#append#(#when#.#getValue#(#)#)#;#buf#.#append#(#"}"#)#;#return#buf#.#toString#(#)#;#}##void#setValue#(#long#size#)#{#this#.#size#=#size#;#if#(#multiplier#!=#0#&&#size#>#-#1#)#{#sizelimit#=#size#*#multiplier#;#}#}##void#setUnits#(#ByteUnits#units#)#{#int#i#=#units#.#getIndex#(#)#;#multiplier#=#0#;#if#(#i#>#-#1#&&#i#<#KIBI_POS#)#{#multiplier#=#KILO#;#}#else#if#(#i#<#MEGA_POS#)#{#multiplier#=#KIBI#;#}#else#if#(#i#<#MEBI_POS#)#{#multiplier#=#MEGA#;#}#else#if#(#i#<#GIGA_POS#)#{#multiplier#=#MEBI#;#}#else#if#(#i#<#GIBI_POS#)#{#multiplier#=#GIGA#;#}#else#if#(#i#<#TERA_POS#)#{#multiplier#=#GIBI#;#}#else#if#(#i#<#TEBI_POS#)#{#multiplier#=#TERA#;#}#else#if#(#i#<#END_POS#)#{#multiplier#=#TEBI#;#}#if#(#multiplier#>#0#&&#size#>#-#1#)#{#sizelimit#=#size#*#multiplier#;#}#}##void#setWhen#(#SizeComparisons#when#)#{#this#.#when#=#when#;#}##void#setParameters#(#Parameter#[#]#parameters#)#{#super#.#setParameters#(#parameters#)#;#if#(#parameters#!=#null#)#{#for#(#int#i#=#0#;#i#<#parameters#.#length#;#i#++#)#{#String#paramname#=#parameters#[#i#]#.#getName#(#)#;#if#(#SIZE_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#try#{#setValue#(#Long#.#parseLong#(#parameters#[#i#]#.#getValue#(#)#)#)#;#}#catch#(#NumberFormatException#nfe#)#{#setError#(#"Invalid size setting "#+#parameters#[#i#]#.#getValue#(#)#)#;#}#}#else#if#(#UNITS_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#ByteUnits#units#=#new#ByteUnits#(#)#;#units#.#setValue#(#parameters#[#i#]#.#getValue#(#)#)#;#setUnits#(#units#)#;#}#else#if#(#WHEN_KEY#.#equalsIgnoreCase#(#paramname#)#)#{#SizeComparisons#scmp#=#new#SizeComparisons#(#)#;#scmp#.#setValue#(#parameters#[#i#]#.#getValue#(#)#)#;#setWhen#(#scmp#)#;#}#else#{#setError#(#"Invalid parameter "#+#paramname#)#;#}#}#}#}##void#verifySettings#(#)#{#if#(#size#<#0#)#{#setError#(#"The value attribute is required, and must be positive"#)#;#}#else#if#(#multiplier#<#1#)#{#setError#(#"Invalid Units supplied, must be K,Ki,M,Mi,G,Gi,T,or Ti"#)#;#}#else#if#(#sizelimit#<#0#)#{#setError#(#"Internal error: Code is not setting sizelimit correctly"#)#;#}#}##boolean#isSelected#(#File#basedir#,#String#filename#,#File#file#)#{#// throw BuildException on error#validate#(#)#;#// Directory size never selected for#if#(#file#.#isDirectory#(#)#)#{#return#true#;#}#long#diff#=#file#.#length#(#)#-#sizelimit#;#return#when#.#evaluate#(#diff#==#0#?#0#:#(#int#)#(#diff#/#Math#.#abs#(#diff#)#)#)#;#}##String#[#]#getValues#(#)#{#return#new#String#[#]#{#"K"#,#"k"#,#"kilo"#,#"KILO"#,#"Ki"#,#"KI"#,#"ki"#,#"kibi"#,#"KIBI"#,#"M"#,#"m"#,#"mega"#,#"MEGA"#,#"Mi"#,#"MI"#,#"mi"#,#"mebi"#,#"MEBI"#,#"G"#,#"g"#,#"giga"#,#"GIGA"#,#"Gi"#,#"GI"#,#"gi"#,#"gibi"#,#"GIBI"#,#"T"#,#"t"#,#"tera"#,#"TERA"#,#/* You wish! */#"Ti"#,#"TI"#,#"ti"#,#"tebi"#,#"TEBI"#}#;#}##