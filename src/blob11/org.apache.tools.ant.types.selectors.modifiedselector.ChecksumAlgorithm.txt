void#setAlgorithm#(#String#algorithm#)#{#this#.#algorithm#=#algorithm#;#}##void#initChecksum#(#)#{#if#(#checksum#!=#null#)#{#return#;#}#if#(#"CRC"#.#equalsIgnoreCase#(#algorithm#)#)#{#checksum#=#new#CRC32#(#)#;#}#else#if#(#"ADLER"#.#equalsIgnoreCase#(#algorithm#)#)#{#checksum#=#new#Adler32#(#)#;#}#else#{#throw#new#BuildException#(#new#NoSuchAlgorithmException#(#)#)#;#}#}##boolean#isValid#(#)#{#return#"CRC"#.#equalsIgnoreCase#(#algorithm#)#||#"ADLER"#.#equalsIgnoreCase#(#algorithm#)#;#}##String#getValue#(#File#file#)#{#initChecksum#(#)#;#String#rval#=#null#;#try#{#if#(#file#.#canRead#(#)#)#{#checksum#.#reset#(#)#;#FileInputStream#fis#=#new#FileInputStream#(#file#)#;#CheckedInputStream#check#=#new#CheckedInputStream#(#fis#,#checksum#)#;#BufferedInputStream#in#=#new#BufferedInputStream#(#check#)#;#while#(#in#.#read#(#)#!=#-#1#)#{#// Read the file#}#rval#=#Long#.#toString#(#check#.#getChecksum#(#)#.#getValue#(#)#)#;#in#.#close#(#)#;#}#}#catch#(#Exception#e#)#{#rval#=#null#;#}#return#rval#;#}##String#toString#(#)#{#StringBuffer#buf#=#new#StringBuffer#(#)#;#buf#.#append#(#"<ChecksumAlgorithm:"#)#;#buf#.#append#(#"algorithm="#)#.#append#(#algorithm#)#;#buf#.#append#(#">"#)#;#return#buf#.#toString#(#)#;#}##