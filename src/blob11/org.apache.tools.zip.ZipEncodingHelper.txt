Simple8BitZipEncoding#getEncoding#(#)#{#if#(#this#.#encoding#==#null#)#{#this#.#encoding#=#new#Simple8BitZipEncoding#(#this#.#highChars#)#;#}#return#this#.#encoding#;#}##ByteBuffer#growBuffer#(#ByteBuffer#b#,#int#newCapacity#)#{#b#.#limit#(#b#.#position#(#)#)#;#b#.#rewind#(#)#;#int#c2#=#b#.#capacity#(#)#*#2#;#ByteBuffer#on#=#ByteBuffer#.#allocate#(#c2#<#newCapacity#?#newCapacity#:#c2#)#;#on#.#put#(#b#)#;#return#on#;#}##void#appendSurrogate#(#ByteBuffer#bb#,#char#c#)#{#bb#.#put#(#(#byte#)#'%'#)#;#bb#.#put#(#(#byte#)#'U'#)#;#bb#.#put#(#HEX_DIGITS#[#(#c#>#>#12#)#&#0x0f#]#)#;#bb#.#put#(#HEX_DIGITS#[#(#c#>#>#8#)#&#0x0f#]#)#;#bb#.#put#(#HEX_DIGITS#[#(#c#>#>#4#)#&#0x0f#]#)#;#bb#.#put#(#HEX_DIGITS#[#c#&#0x0f#]#)#;#}##ZipEncoding#getZipEncoding#(#String#name#)#{#// fallback encoding is good enough for utf-8.#if#(#isUTF8#(#name#)#)#{#return#UTF8_ZIP_ENCODING#;#}#if#(#name#==#null#)#{#return#new#FallbackZipEncoding#(#)#;#}#SimpleEncodingHolder#h#=#(#SimpleEncodingHolder#)#simpleEncodings#.#get#(#name#)#;#if#(#h#!=#null#)#{#return#h#.#getEncoding#(#)#;#}#try#{#Charset#cs#=#Charset#.#forName#(#name#)#;#return#new#NioZipEncoding#(#cs#)#;#}#catch#(#UnsupportedCharsetException#e#)#{#return#new#FallbackZipEncoding#(#name#)#;#}#}##boolean#isUTF8#(#String#encoding#)#{#if#(#encoding#==#null#)#{#// check platform's default encoding#encoding#=#System#.#getProperty#(#"file.encoding"#)#;#}#return#UTF8#.#equalsIgnoreCase#(#encoding#)#||#"utf-8"#.#equalsIgnoreCase#(#encoding#)#;#}##