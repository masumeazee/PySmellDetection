Object#clone#(#)#{#ZipEntry#e#=#(#ZipEntry#)#super#.#clone#(#)#;#e#.#extraFields#=#extraFields#!=#null#?#(#LinkedHashMap#)#extraFields#.#clone#(#)#:#null#;#e#.#setInternalAttributes#(#getInternalAttributes#(#)#)#;#e#.#setExternalAttributes#(#getExternalAttributes#(#)#)#;#e#.#setExtraFields#(#getExtraFields#(#)#)#;#return#e#;#}##int#getInternalAttributes#(#)#{#return#internalAttributes#;#}##void#setInternalAttributes#(#int#value#)#{#internalAttributes#=#value#;#}##long#getExternalAttributes#(#)#{#return#externalAttributes#;#}##void#setExternalAttributes#(#long#value#)#{#externalAttributes#=#value#;#}##void#setUnixMode#(#int#mode#)#{#// CheckStyle:MagicNumberCheck OFF - no point#setExternalAttributes#(#(#mode#<#<#SHORT_SHIFT#)#// MS-DOS read-only attribute#|#(#(#mode#&#0200#)#==#0#?#1#:#0#)#// MS-DOS directory flag#|#(#isDirectory#(#)#?#0x10#:#0#)#)#;#// CheckStyle:MagicNumberCheck ON#platform#=#PLATFORM_UNIX#;#}##int#getUnixMode#(#)#{#return#platform#!=#PLATFORM_UNIX#?#0#:#(#int#)#(#(#getExternalAttributes#(#)#>#>#SHORT_SHIFT#)#&#SHORT_MASK#)#;#}##int#getPlatform#(#)#{#return#platform#;#}##void#setPlatform#(#int#platform#)#{#this#.#platform#=#platform#;#}##void#setExtraFields#(#ZipExtraField#[#]#fields#)#{#extraFields#=#new#LinkedHashMap#(#)#;#for#(#int#i#=#0#;#i#<#fields#.#length#;#i#++#)#{#extraFields#.#put#(#fields#[#i#]#.#getHeaderId#(#)#,#fields#[#i#]#)#;#}#setExtra#(#)#;#}##ZipExtraField#[#]#getExtraFields#(#)#{#if#(#extraFields#==#null#)#{#return#new#ZipExtraField#[#0#]#;#}#ZipExtraField#[#]#result#=#new#ZipExtraField#[#extraFields#.#size#(#)#]#;#return#(#ZipExtraField#[#]#)#extraFields#.#values#(#)#.#toArray#(#result#)#;#}##void#addExtraField#(#ZipExtraField#ze#)#{#if#(#extraFields#==#null#)#{#extraFields#=#new#LinkedHashMap#(#)#;#}#extraFields#.#put#(#ze#.#getHeaderId#(#)#,#ze#)#;#setExtra#(#)#;#}##void#addAsFirstExtraField#(#ZipExtraField#ze#)#{#LinkedHashMap#copy#=#extraFields#;#extraFields#=#new#LinkedHashMap#(#)#;#extraFields#.#put#(#ze#.#getHeaderId#(#)#,#ze#)#;#if#(#copy#!=#null#)#{#copy#.#remove#(#ze#.#getHeaderId#(#)#)#;#extraFields#.#putAll#(#copy#)#;#}#setExtra#(#)#;#}##void#removeExtraField#(#ZipShort#type#)#{#if#(#extraFields#==#null#)#{#throw#new#java#.#util#.#NoSuchElementException#(#)#;#}#if#(#extraFields#.#remove#(#type#)#==#null#)#{#throw#new#java#.#util#.#NoSuchElementException#(#)#;#}#setExtra#(#)#;#}##ZipExtraField#getExtraField#(#ZipShort#type#)#{#if#(#extraFields#!=#null#)#{#return#(#ZipExtraField#)#extraFields#.#get#(#type#)#;#}#return#null#;#}##void#setExtra#(#byte#[#]#extra#)#throws#RuntimeException#{#try#{#ZipExtraField#[#]#local#=#ExtraFieldUtils#.#parse#(#extra#,#true#)#;#mergeExtraFields#(#local#,#true#)#;#}#catch#(#Exception#e#)#{#throw#new#RuntimeException#(#e#.#getMessage#(#)#,#e#)#;#}#}##void#setExtra#(#)#{#super#.#setExtra#(#ExtraFieldUtils#.#mergeLocalFileDataData#(#getExtraFields#(#)#)#)#;#}##void#setCentralDirectoryExtra#(#byte#[#]#b#)#{#try#{#ZipExtraField#[#]#central#=#ExtraFieldUtils#.#parse#(#b#,#false#)#;#mergeExtraFields#(#central#,#false#)#;#}#catch#(#Exception#e#)#{#throw#new#RuntimeException#(#e#.#getMessage#(#)#,#e#)#;#}#}##byte#[#]#getLocalFileDataExtra#(#)#{#byte#[#]#extra#=#getExtra#(#)#;#return#extra#!=#null#?#extra#:#new#byte#[#0#]#;#}##byte#[#]#getCentralDirectoryExtra#(#)#{#return#ExtraFieldUtils#.#mergeCentralDirectoryData#(#getExtraFields#(#)#)#;#}##void#setComprSize#(#long#size#)#{#setCompressedSize#(#size#)#;#}##String#getName#(#)#{#return#name#==#null#?#super#.#getName#(#)#:#name#;#}##boolean#isDirectory#(#)#{#return#getName#(#)#.#endsWith#(#"/"#)#;#}##void#setName#(#String#name#)#{#this#.#name#=#name#;#}##int#hashCode#(#)#{#// this method has severe consequences on performance. We cannot rely#// on the super.hashCode() method since super.getName() always return#// the empty string in the current implemention (there's no setter)#// so it is basically draining the performance of a hashmap lookup#return#getName#(#)#.#hashCode#(#)#;#}##boolean#equals#(#Object#o#)#{#return#(#this#==#o#)#;#}##void#mergeExtraFields#(#ZipExtraField#[#]#f#,#boolean#local#)#throws#ZipException#{#if#(#extraFields#==#null#)#{#setExtraFields#(#f#)#;#}#else#{#for#(#int#i#=#0#;#i#<#f#.#length#;#i#++#)#{#ZipExtraField#existing#=#getExtraField#(#f#[#i#]#.#getHeaderId#(#)#)#;#if#(#existing#==#null#)#{#addExtraField#(#f#[#i#]#)#;#}#else#{#if#(#local#||#!#(#existing#instanceof#CentralDirectoryParsingZipExtraField#)#)#{#byte#[#]#b#=#f#[#i#]#.#getLocalFileDataData#(#)#;#existing#.#parseFromLocalFileData#(#b#,#0#,#b#.#length#)#;#}#else#{#byte#[#]#b#=#f#[#i#]#.#getCentralDirectoryData#(#)#;#(#(#CentralDirectoryParsingZipExtraField#)#existing#)#.#parseFromCentralDirectoryData#(#b#,#0#,#b#.#length#)#;#}#}#}#setExtra#(#)#;#}#}##