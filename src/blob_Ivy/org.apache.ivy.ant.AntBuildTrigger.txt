void#progress#(#IvyEvent#event#)#{#File#f#=#getBuildFile#(#event#)#;#if#(#f#.#exists#(#)#)#{#if#(#onlyOnce#&&#isBuilt#(#f#)#)#{#Message#.#verbose#(#"target build file already built, skipping: "#+#f#)#;#}#else#{#Ant#ant#=#new#Ant#(#)#;#Project#project#=#(#Project#)#IvyContext#.#peekInContextStack#(#IvyTask#.#ANT_PROJECT_CONTEXT_KEY#)#;#if#(#project#==#null#)#{#project#=#new#Project#(#)#;#project#.#init#(#)#;#}#ant#.#setProject#(#project#)#;#ant#.#setTaskName#(#"ant"#)#;#ant#.#setAntfile#(#f#.#getAbsolutePath#(#)#)#;#ant#.#setInheritAll#(#false#)#;#String#target#=#getTarget#(#)#;#if#(#target#!=#null#)#{#ant#.#setTarget#(#target#)#;#}#Map#atts#=#event#.#getAttributes#(#)#;#for#(#Iterator#iter#=#atts#.#keySet#(#)#.#iterator#(#)#;#iter#.#hasNext#(#)#;#)#{#String#key#=#(#String#)#iter#.#next#(#)#;#String#value#=#(#String#)#atts#.#get#(#key#)#;#if#(#value#!=#null#)#{#Property#p#=#ant#.#createProperty#(#)#;#p#.#setName#(#prefix#==#null#?#key#:#prefix#+#key#)#;#p#.#setValue#(#value#)#;#}#}#Message#.#verbose#(#"triggering build: "#+#f#+#" target="#+#target#+#" for "#+#event#)#;#try#{#ant#.#execute#(#)#;#}#catch#(#BuildException#e#)#{#Message#.#verbose#(#"Exception occurred while executing target "#+#target#)#;#e#.#printStackTrace#(#)#;#// TODO: remove when finished debugging#throw#e#;#}#markBuilt#(#f#)#;#Message#.#debug#(#"triggered build finished: "#+#f#+#" target="#+#target#+#" for "#+#event#)#;#}#}#else#{#Message#.#verbose#(#"no build file found for dependency, skipping: "#+#f#)#;#}#}##void#markBuilt#(#File#f#)#{#builds#.#add#(#f#.#getAbsolutePath#(#)#)#;#}##boolean#isBuilt#(#File#f#)#{#return#builds#.#contains#(#f#.#getAbsolutePath#(#)#)#;#}##File#getBuildFile#(#IvyEvent#event#)#{#return#IvyContext#.#getContext#(#)#.#getSettings#(#)#.#resolveFile#(#IvyPatternHelper#.#substituteTokens#(#getBuildFilePattern#(#)#,#event#.#getAttributes#(#)#)#)#;#}##String#getBuildFilePattern#(#)#{#return#buildFilePattern#;#}##void#setAntfile#(#String#pattern#)#{#buildFilePattern#=#pattern#;#}##String#getTarget#(#)#{#return#target#;#}##void#setTarget#(#String#target#)#{#this#.#target#=#target#;#}##boolean#isOnlyonce#(#)#{#return#onlyOnce#;#}##void#setOnlyonce#(#boolean#onlyonce#)#{#onlyOnce#=#onlyonce#;#}##String#getPrefix#(#)#{#return#prefix#;#}##void#setPrefix#(#String#prefix#)#{#this#.#prefix#=#prefix#;#if#(#!#prefix#.#endsWith#(#"."#)#)#{#this#.#prefix#+=#"."#;#}#}##