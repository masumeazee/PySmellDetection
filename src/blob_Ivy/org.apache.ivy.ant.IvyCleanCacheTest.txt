void#setUp#(#)#throws#Exception#{#Project#p#=#new#Project#(#)#;#cacheDir#=#new#File#(#"build/cache"#)#;#p#.#setProperty#(#"cache"#,#cacheDir#.#getAbsolutePath#(#)#)#;#cleanCache#=#new#IvyCleanCache#(#)#;#cleanCache#.#setProject#(#p#)#;#IvyConfigure#settings#=#new#IvyConfigure#(#)#;#settings#.#setProject#(#p#)#;#settings#.#setUrl#(#IvyCleanCacheTest#.#class#.#getResource#(#"ivysettings-cleancache.xml"#)#.#toExternalForm#(#)#)#;#settings#.#perform#(#)#;#resolutionCache#=#new#File#(#cacheDir#,#"resolution"#)#;#repoCache#=#new#File#(#cacheDir#,#"repository"#)#;#repoCache2#=#new#File#(#cacheDir#,#"repository2"#)#;#resolutionCache#.#mkdirs#(#)#;#repoCache#.#mkdirs#(#)#;#repoCache2#.#mkdirs#(#)#;#}##void#testCleanAll#(#)#throws#Exception#{#cleanCache#.#perform#(#)#;#assertFalse#(#resolutionCache#.#exists#(#)#)#;#assertFalse#(#repoCache#.#exists#(#)#)#;#assertFalse#(#repoCache2#.#exists#(#)#)#;#}##void#testResolutionOnly#(#)#throws#Exception#{#cleanCache#.#setCache#(#IvyCleanCache#.#NONE#)#;#cleanCache#.#perform#(#)#;#assertFalse#(#resolutionCache#.#exists#(#)#)#;#assertTrue#(#repoCache#.#exists#(#)#)#;#assertTrue#(#repoCache2#.#exists#(#)#)#;#}##void#testRepositoryOnly#(#)#throws#Exception#{#cleanCache#.#setResolution#(#false#)#;#cleanCache#.#perform#(#)#;#assertTrue#(#resolutionCache#.#exists#(#)#)#;#assertFalse#(#repoCache#.#exists#(#)#)#;#assertFalse#(#repoCache2#.#exists#(#)#)#;#}##void#testOneRepositoryOnly#(#)#throws#Exception#{#cleanCache#.#setResolution#(#false#)#;#cleanCache#.#setCache#(#"mycache"#)#;#cleanCache#.#perform#(#)#;#assertTrue#(#resolutionCache#.#exists#(#)#)#;#assertFalse#(#repoCache#.#exists#(#)#)#;#assertTrue#(#repoCache2#.#exists#(#)#)#;#}##void#testUnknownCache#(#)#throws#Exception#{#cleanCache#.#setResolution#(#false#)#;#cleanCache#.#setCache#(#"yourcache"#)#;#try#{#cleanCache#.#perform#(#)#;#fail#(#"clean cache should have raised an exception with unkown cache"#)#;#}#catch#(#BuildException#e#)#{#assertTrue#(#e#.#getMessage#(#)#.#indexOf#(#"yourcache"#)#!=#-#1#)#;#}#}##