void#setUp#(#)#throws#Exception#{#createCache#(#)#;#}##void#createCache#(#)#{#cache#=#new#File#(#"build/cache"#)#;#cache#.#mkdirs#(#)#;#}##void#tearDown#(#)#throws#Exception#{#cleanCache#(#)#;#}##void#cleanCache#(#)#{#Delete#del#=#new#Delete#(#)#;#del#.#setProject#(#new#Project#(#)#)#;#del#.#setDir#(#cache#)#;#del#.#execute#(#)#;#}##void#cleanRepo#(#)#{#Delete#del#=#new#Delete#(#)#;#del#.#setProject#(#new#Project#(#)#)#;#del#.#setDir#(#new#File#(#"build/test/perf"#)#)#;#del#.#execute#(#)#;#}##void#generateModules#(#int#nbModules#,#int#minDependencies#,#int#maxDependencies#,#int#minVersions#,#int#maxVersions#)#throws#IOException#{#int#nb#=#0#;#int#curDep#=#1#;#int#varDeps#=#maxDependencies#-#minDependencies#;#int#varVersions#=#maxVersions#-#minVersions#;#Random#r#=#new#Random#(#System#.#currentTimeMillis#(#)#)#;#while#(#nb#<#nbModules#)#{#int#deps#=#minDependencies#+#r#.#nextInt#(#varDeps#+#1#)#;#int#versions#=#minVersions#+#r#.#nextInt#(#varVersions#+#1#)#;#int#prevCurDep#=#curDep#;#for#(#int#ver#=#0#;#ver#<#versions#;#ver#++#)#{#DefaultModuleDescriptor#md#=#new#DefaultModuleDescriptor#(#ModuleRevisionId#.#newInstance#(#"apache"#,#"mod"#+#nb#,#"1."#+#ver#)#,#"integration"#,#new#Date#(#)#)#;#curDep#=#prevCurDep#;#for#(#int#i#=#0#;#i#<#deps#&&#curDep#<#nbModules#;#i#++#)#{#int#d#;#if#(#i#%#2#==#1#)#{#d#=#nb#+#i#;#if#(#d#>=#prevCurDep#)#{#d#=#curDep#;#curDep#++#;#}#}#else#{#d#=#curDep#;#curDep#++#;#}#DefaultDependencyDescriptor#dd#=#new#DefaultDependencyDescriptor#(#md#,#ModuleRevisionId#.#newInstance#(#"apache"#,#"mod"#+#d#,#"latest.integration"#)#,#false#,#false#,#true#)#;#dd#.#addDependencyConfiguration#(#"default"#,#"default"#)#;#md#.#addDependency#(#dd#)#;#}#XmlModuleDescriptorWriter#.#write#(#md#,#new#File#(#"build/test/perf/mod"#+#nb#+#"/ivy-1."#+#ver#+#".xml"#)#)#;#FileUtil#.#copy#(#new#File#(#"test/repositories/1/org1/mod1.1/jars/mod1.1-1.0.jar"#)#,#new#File#(#"build/test/perf/mod"#+#nb#+#"/mod"#+#nb#+#"-1."#+#ver#+#".jar"#)#,#null#)#;#}#nb#++#;#}#}##void#testPerfs#(#)#throws#Exception#{#generateModules#(#70#,#2#,#5#,#2#,#15#)#;#long#start#=#System#.#currentTimeMillis#(#)#;#ResolveReport#report#=#ivy#.#resolve#(#new#File#(#"build/test/perf/mod0/ivy-1.0.xml"#)#.#toURL#(#)#,#getResolveOptions#(#new#String#[#]#{#"*"#}#)#.#setRevision#(#"1.0"#)#)#;#long#end#=#System#.#currentTimeMillis#(#)#;#System#.#out#.#println#(#"resolve "#+#report#.#getConfigurationReport#(#"default"#)#.#getNodesNumber#(#)#+#" modules took "#+#(#end#-#start#)#+#" ms"#)#;#cleanRepo#(#)#;#}##ResolveOptions#getResolveOptions#(#String#[#]#confs#)#{#return#new#ResolveOptions#(#)#.#setConfs#(#confs#)#;#}##void#main#(#String#[#]#args#)#throws#Exception#{#TestPerformance#t#=#new#TestPerformance#(#)#;#t#.#setUp#(#)#;#t#.#testPerfs#(#)#;#t#.#tearDown#(#)#;#}##