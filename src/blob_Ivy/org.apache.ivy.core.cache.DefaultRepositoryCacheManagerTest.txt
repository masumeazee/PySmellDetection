void#setUp#(#)#throws#Exception#{#File#f#=#File#.#createTempFile#(#"ivycache"#,#".dir"#)#;#Ivy#ivy#=#new#Ivy#(#)#;#ivy#.#configureDefault#(#)#;#IvySettings#settings#=#ivy#.#getSettings#(#)#;#f#.#delete#(#)#;#// we want to use the file as a directory, so we delete the file itself#cacheManager#=#new#DefaultRepositoryCacheManager#(#)#;#cacheManager#.#setSettings#(#settings#)#;#cacheManager#.#setBasedir#(#f#)#;#artifact#=#createArtifact#(#"org"#,#"module"#,#"rev"#,#"name"#,#"type"#,#"ext"#)#;#origin#=#new#ArtifactOrigin#(#artifact#,#true#,#"/some/where"#)#;#cacheManager#.#saveArtifactOrigin#(#artifact#,#origin#)#;#}##void#tearDown#(#)#throws#Exception#{#Delete#del#=#new#Delete#(#)#;#del#.#setProject#(#new#Project#(#)#)#;#del#.#setDir#(#cacheManager#.#getRepositoryCacheRoot#(#)#)#;#del#.#execute#(#)#;#}##void#testArtifactOrigin#(#)#{#ArtifactOrigin#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertEquals#(#origin#,#found#)#;#artifact#=#createArtifact#(#"org"#,#"module"#,#"rev"#,#"name"#,#"type2"#,#"ext"#)#;#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#}##void#testUniqueness#(#)#{#cacheManager#.#saveArtifactOrigin#(#artifact#,#origin#)#;#artifact#=#createArtifact#(#"org1"#,#"module"#,#"rev"#,#"name"#,#"type"#,#"ext"#)#;#ArtifactOrigin#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#artifact#=#createArtifact#(#"org"#,#"module1"#,#"rev"#,#"name"#,#"type"#,#"ext"#)#;#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#artifact#=#createArtifact#(#"org"#,#"module"#,#"rev1"#,#"name"#,#"type"#,#"ext"#)#;#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#artifact#=#createArtifact#(#"org"#,#"module"#,#"rev"#,#"name1"#,#"type"#,#"ext"#)#;#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#artifact#=#createArtifact#(#"org"#,#"module"#,#"rev"#,#"name"#,#"type1"#,#"ext"#)#;#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#artifact#=#createArtifact#(#"org"#,#"module"#,#"rev"#,#"name"#,#"type"#,#"ext1"#)#;#found#=#cacheManager#.#getSavedArtifactOrigin#(#artifact#)#;#assertTrue#(#ArtifactOrigin#.#isUnknown#(#found#)#)#;#}##Artifact#createArtifact#(#String#org#,#String#module#,#String#rev#,#String#name#,#String#type#,#String#ext#)#{#ModuleId#mid#=#new#ModuleId#(#org#,#module#)#;#ModuleRevisionId#mrid#=#new#ModuleRevisionId#(#mid#,#rev#)#;#return#new#DefaultArtifact#(#mrid#,#new#Date#(#)#,#name#,#type#,#ext#)#;#}##