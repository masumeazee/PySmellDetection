void#setUp#(#)#throws#Exception#{#settings#=#new#IvySettings#(#)#;#engine#=#new#ResolveEngine#(#settings#,#new#EventManager#(#)#,#new#SortEngine#(#settings#)#)#;#cache#=#new#File#(#"build/cache"#)#;#data#=#new#ResolveData#(#engine#,#new#ResolveOptions#(#)#)#;#cache#.#mkdirs#(#)#;#settings#.#setDefaultCache#(#cache#)#;#}##void#tearDown#(#)#throws#Exception#{#CacheCleaner#.#deleteDir#(#cache#)#;#}##void#testUseMetadataForListing#(#)#throws#Exception#{#IBiblioResolver#resolver#=#maven2Resolver#(#)#;#ResolvedModuleRevision#m#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#ModuleRevisionId#.#newInstance#(#"org.apache"#,#"test-metadata"#,#"latest.integration"#)#,#false#)#,#data#)#;#assertNotNull#(#m#)#;#// should trust the metadata (latest=1.1) instead of listing revisions (latest=1.2)#assertEquals#(#ModuleRevisionId#.#newInstance#(#"org.apache"#,#"test-metadata"#,#"1.1"#)#,#m#.#getId#(#)#)#;#}##void#testNotUseMetadataForListing#(#)#throws#Exception#{#IBiblioResolver#resolver#=#maven2Resolver#(#)#;#resolver#.#setUseMavenMetadata#(#false#)#;#ResolvedModuleRevision#m#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#ModuleRevisionId#.#newInstance#(#"org.apache"#,#"test-metadata"#,#"latest.integration"#)#,#false#)#,#data#)#;#assertNotNull#(#m#)#;#// should trust listing revisions (latest=1.2) instead of the metadata (latest=1.1) #assertEquals#(#ModuleRevisionId#.#newInstance#(#"org.apache"#,#"test-metadata"#,#"1.2"#)#,#m#.#getId#(#)#)#;#}##IBiblioResolver#maven2Resolver#(#)#throws#MalformedURLException#{#IBiblioResolver#resolver#=#new#IBiblioResolver#(#)#;#resolver#.#setSettings#(#settings#)#;#resolver#.#setName#(#"maven2"#)#;#resolver#.#setM2compatible#(#true#)#;#resolver#.#setRoot#(#new#File#(#"test/repositories/m2"#)#.#toURL#(#)#.#toExternalForm#(#)#)#;#return#resolver#;#}##