void#setUp#(#)#throws#Exception#{#_settings#=#new#IvySettings#(#)#;#_engine#=#new#ResolveEngine#(#_settings#,#new#EventManager#(#)#,#new#SortEngine#(#_settings#)#)#;#_cache#=#new#File#(#"build/cache"#)#;#_data#=#new#ResolveData#(#_engine#,#new#ResolveOptions#(#)#)#;#_cache#.#mkdirs#(#)#;#_settings#.#setDefaultCache#(#_cache#)#;#}##void#tearDown#(#)#throws#Exception#{#Delete#del#=#new#Delete#(#)#;#del#.#setProject#(#new#Project#(#)#)#;#del#.#setDir#(#_cache#)#;#del#.#execute#(#)#;#}##void#testFile#(#)#throws#Exception#{#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#String#rootpath#=#new#File#(#"test/repositories/1"#)#.#getAbsolutePath#(#)#;#resolver#.#addIvyPattern#(#"file:"#+#rootpath#+#"/[organisation]/[module]/ivys/ivy-[revision].xml"#)#;#resolver#.#addArtifactPattern#(#"file:"#+#rootpath#+#"/[organisation]/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"org1"#,#"mod1.1"#,#"1.0"#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#mrid#,#false#)#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#mrid#,#rmr#.#getId#(#)#)#;#Date#pubdate#=#new#GregorianCalendar#(#2004#,#10#,#1#,#11#,#0#,#0#)#.#getTime#(#)#;#assertEquals#(#pubdate#,#rmr#.#getPublicationDate#(#)#)#;#// test to ask to download#DefaultArtifact#artifact#=#new#DefaultArtifact#(#mrid#,#pubdate#,#"mod1.1"#,#"jar"#,#"jar"#)#;#DownloadReport#report#=#resolver#.#download#(#new#Artifact#[#]#{#artifact#}#,#downloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#1#,#report#.#getArtifactsReports#(#)#.#length#)#;#ArtifactDownloadReport#ar#=#report#.#getArtifactReport#(#artifact#)#;#assertNotNull#(#ar#)#;#assertEquals#(#artifact#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#SUCCESSFUL#,#ar#.#getDownloadStatus#(#)#)#;#// test to ask to download again, should use cache#report#=#resolver#.#download#(#new#Artifact#[#]#{#artifact#}#,#downloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#1#,#report#.#getArtifactsReports#(#)#.#length#)#;#ar#=#report#.#getArtifactReport#(#artifact#)#;#assertNotNull#(#ar#)#;#assertEquals#(#artifact#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#NO#,#ar#.#getDownloadStatus#(#)#)#;#}##void#testLatestFile#(#)#throws#Exception#{#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#String#rootpath#=#new#File#(#"test/repositories/1"#)#.#toURI#(#)#.#toURL#(#)#.#toExternalForm#(#)#;#resolver#.#addIvyPattern#(#rootpath#+#"[organisation]/[module]/ivys/ivy-[revision].xml"#)#;#resolver#.#addArtifactPattern#(#rootpath#+#"[organisation]/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"org1"#,#"mod1.1"#,#"2.0"#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#ModuleRevisionId#.#newInstance#(#"org1"#,#"mod1.1"#,#"latest.integration"#)#,#false#)#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#mrid#,#rmr#.#getId#(#)#)#;#Date#pubdate#=#new#GregorianCalendar#(#2005#,#1#,#15#,#11#,#0#,#0#)#.#getTime#(#)#;#assertEquals#(#pubdate#,#rmr#.#getPublicationDate#(#)#)#;#}##void#testIBiblio#(#)#throws#Exception#{#String#ibiblioRoot#=#IBiblioHelper#.#getIBiblioMirror#(#)#;#if#(#ibiblioRoot#==#null#)#{#return#;#}#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#resolver#.#addArtifactPattern#(#ibiblioRoot#+#"/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"apache"#,#"commons-fileupload"#,#"1.0"#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#mrid#,#false#)#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#mrid#,#rmr#.#getId#(#)#)#;#DefaultArtifact#artifact#=#new#DefaultArtifact#(#mrid#,#rmr#.#getPublicationDate#(#)#,#"commons-fileupload"#,#"jar"#,#"jar"#)#;#DownloadReport#report#=#resolver#.#download#(#new#Artifact#[#]#{#artifact#}#,#downloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#1#,#report#.#getArtifactsReports#(#)#.#length#)#;#ArtifactDownloadReport#ar#=#report#.#getArtifactReport#(#artifact#)#;#assertNotNull#(#ar#)#;#assertEquals#(#artifact#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#SUCCESSFUL#,#ar#.#getDownloadStatus#(#)#)#;#// test to ask to download again, should use cache#report#=#resolver#.#download#(#new#Artifact#[#]#{#artifact#}#,#downloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#1#,#report#.#getArtifactsReports#(#)#.#length#)#;#ar#=#report#.#getArtifactReport#(#artifact#)#;#assertNotNull#(#ar#)#;#assertEquals#(#artifact#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#NO#,#ar#.#getDownloadStatus#(#)#)#;#}##void#testIBiblioArtifacts#(#)#throws#Exception#{#String#ibiblioRoot#=#IBiblioHelper#.#getIBiblioMirror#(#)#;#if#(#ibiblioRoot#==#null#)#{#return#;#}#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#resolver#.#addArtifactPattern#(#ibiblioRoot#+#"/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"apache"#,#"nanning"#,#"0.9"#)#;#DefaultDependencyDescriptor#dd#=#new#DefaultDependencyDescriptor#(#mrid#,#false#)#;#dd#.#addIncludeRule#(#"default"#,#new#DefaultIncludeRule#(#new#ArtifactId#(#mrid#.#getModuleId#(#)#,#"nanning-profiler"#,#"jar"#,#"jar"#)#,#ExactPatternMatcher#.#INSTANCE#,#null#)#)#;#dd#.#addIncludeRule#(#"default"#,#new#DefaultIncludeRule#(#new#ArtifactId#(#mrid#.#getModuleId#(#)#,#"nanning-trace"#,#"jar"#,#"jar"#)#,#ExactPatternMatcher#.#INSTANCE#,#null#)#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#dd#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#mrid#,#rmr#.#getId#(#)#)#;#DefaultArtifact#profiler#=#new#DefaultArtifact#(#mrid#,#rmr#.#getPublicationDate#(#)#,#"nanning-profiler"#,#"jar"#,#"jar"#)#;#DefaultArtifact#trace#=#new#DefaultArtifact#(#mrid#,#rmr#.#getPublicationDate#(#)#,#"nanning-trace"#,#"jar"#,#"jar"#)#;#DownloadReport#report#=#resolver#.#download#(#new#Artifact#[#]#{#profiler#,#trace#}#,#downloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#2#,#report#.#getArtifactsReports#(#)#.#length#)#;#ArtifactDownloadReport#ar#=#report#.#getArtifactReport#(#profiler#)#;#assertNotNull#(#ar#)#;#assertEquals#(#profiler#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#SUCCESSFUL#,#ar#.#getDownloadStatus#(#)#)#;#ar#=#report#.#getArtifactReport#(#trace#)#;#assertNotNull#(#ar#)#;#assertEquals#(#trace#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#SUCCESSFUL#,#ar#.#getDownloadStatus#(#)#)#;#// test to ask to download again, should use cache#report#=#resolver#.#download#(#new#Artifact#[#]#{#profiler#,#trace#}#,#downloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#2#,#report#.#getArtifactsReports#(#)#.#length#)#;#ar#=#report#.#getArtifactReport#(#profiler#)#;#assertNotNull#(#ar#)#;#assertEquals#(#profiler#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#NO#,#ar#.#getDownloadStatus#(#)#)#;#ar#=#report#.#getArtifactReport#(#trace#)#;#assertNotNull#(#ar#)#;#assertEquals#(#trace#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#NO#,#ar#.#getDownloadStatus#(#)#)#;#}##void#testLatestIBiblio#(#)#throws#Exception#{#String#ibiblioRoot#=#IBiblioHelper#.#getIBiblioMirror#(#)#;#if#(#ibiblioRoot#==#null#)#{#return#;#}#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#resolver#.#addArtifactPattern#(#ibiblioRoot#+#"/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"objectweb"#,#"asm"#,#"1.4+"#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#mrid#,#false#)#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#"1.4.3"#,#rmr#.#getId#(#)#.#getRevision#(#)#)#;#}##void#testVersionRangeIBiblio#(#)#throws#Exception#{#String#ibiblioRoot#=#IBiblioHelper#.#getIBiblioMirror#(#)#;#if#(#ibiblioRoot#==#null#)#{#return#;#}#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#resolver#.#setAlwaysCheckExactRevision#(#true#)#;#resolver#.#addIvyPattern#(#ibiblioRoot#+#"/[module]/poms/[module]-[revision].pom"#)#;#resolver#.#addArtifactPattern#(#ibiblioRoot#+#"/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"asm"#,#"asm"#,#"[1.4,1.5]"#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#mrid#,#false#)#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#"1.4.4"#,#rmr#.#getId#(#)#.#getRevision#(#)#)#;#}##void#testUnknown#(#)#throws#Exception#{#String#ibiblioRoot#=#IBiblioHelper#.#getIBiblioMirror#(#)#;#if#(#ibiblioRoot#==#null#)#{#return#;#}#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#resolver#.#addIvyPattern#(#ibiblioRoot#+#"/[module]/ivys/ivy-[revision].xml"#)#;#resolver#.#addArtifactPattern#(#ibiblioRoot#+#"/maven/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#assertNull#(#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#ModuleRevisionId#.#newInstance#(#"unknown"#,#"unknown"#,#"1.0"#)#,#false#)#,#_data#)#)#;#}##void#testDownloadWithUseOriginIsTrue#(#)#throws#Exception#{#URLResolver#resolver#=#new#URLResolver#(#)#;#resolver#.#setSettings#(#_settings#)#;#String#rootpath#=#new#File#(#"test/repositories/1"#)#.#getAbsolutePath#(#)#;#resolver#.#addIvyPattern#(#"file:"#+#rootpath#+#"/[organisation]/[module]/ivys/ivy-[revision].xml"#)#;#resolver#.#addArtifactPattern#(#"file:"#+#rootpath#+#"/[organisation]/[module]/[type]s/[artifact]-[revision].[type]"#)#;#resolver#.#setName#(#"test"#)#;#(#(#DefaultRepositoryCacheManager#)#resolver#.#getRepositoryCacheManager#(#)#)#.#setUseOrigin#(#true#)#;#assertEquals#(#"test"#,#resolver#.#getName#(#)#)#;#ModuleRevisionId#mrid#=#ModuleRevisionId#.#newInstance#(#"org1"#,#"mod1.1"#,#"1.0"#)#;#ResolvedModuleRevision#rmr#=#resolver#.#getDependency#(#new#DefaultDependencyDescriptor#(#mrid#,#false#)#,#_data#)#;#assertNotNull#(#rmr#)#;#assertEquals#(#mrid#,#rmr#.#getId#(#)#)#;#Date#pubdate#=#new#GregorianCalendar#(#2004#,#10#,#1#,#11#,#0#,#0#)#.#getTime#(#)#;#assertEquals#(#pubdate#,#rmr#.#getPublicationDate#(#)#)#;#// test to ask to download#DefaultArtifact#artifact#=#new#DefaultArtifact#(#mrid#,#pubdate#,#"mod1.1"#,#"jar"#,#"jar"#)#;#DownloadReport#report#=#resolver#.#download#(#new#Artifact#[#]#{#artifact#}#,#new#DownloadOptions#(#)#)#;#assertNotNull#(#report#)#;#assertEquals#(#1#,#report#.#getArtifactsReports#(#)#.#length#)#;#ArtifactDownloadReport#ar#=#report#.#getArtifactReport#(#artifact#)#;#assertNotNull#(#ar#)#;#assertEquals#(#artifact#,#ar#.#getArtifact#(#)#)#;#assertEquals#(#DownloadStatus#.#SUCCESSFUL#,#ar#.#getDownloadStatus#(#)#)#;#// test to ask to download again, should use cache#// report = resolver.download(new Artifact[] {artifact}, _data.getIvy(), _cache);#// assertNotNull(report);#//        #// assertEquals(1, report.getArtifactsReports().length);#//        #// ar = report.getArtifactReport(artifact);#// assertNotNull(ar);#//        #// assertEquals(artifact, ar.getArtifact());#// assertEquals(DownloadStatus.NO, ar.getDownloadStatus());#//    	#}##